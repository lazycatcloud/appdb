function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SmartPlaylistRuleInput-B6ziMvWU.js","assets/TextInput.vue_vue_type_script_setup_true_lang-Cn7Fe5WG.js","assets/userStore-DI58VgZ6.js","assets/userStore-CkW9hTsr.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{a$ as v,b0 as c,b1 as W,b2 as D,b3 as F,b4 as j,b5 as q,b6 as z,b7 as C,b8 as G,b9 as H,t as J,a4 as K,a5 as Q,v as X,r as I,ba as $,h as i,w as Y,x as Z,o as n,y as R,z as p,T as O,W as d,n as r,a0 as f,a1 as _,B as b,V as y,U as ee,A as ae}from"./userStore-DI58VgZ6.js";import{aF as te}from"./index-bkhK2U3_.js";import{_ as le}from"./FormRow.vue_vue_type_script_setup_true_lang-jRw1p4cD.js";import{S}from"./SelectBox-CnkytuoA.js";import{B as oe}from"./Btn-2hiIT76k.js";const se={text:[v,c,W,D,F,j],number:[v,c,q,z,C],date:[v,c,G,H,C]},ne=se,re={class:"w-full flex gap-2 relative"},ue=["value"],ie=["value"],pe={class:"inline-flex flex-1 items-center gap-3"},de={key:0,class:"suffix"},be=J({__name:"SmartPlaylistRule",props:{rule:{}},emits:["input","remove"],setup(T,{emit:h}){const E=T,L=K(()=>Q(()=>import("./SmartPlaylistRuleInput-B6ziMvWU.js"),__vite__mapDeps([0,1,2,3]))),{rule:U}=X(E),l=Object.assign({},U.value),s=I(),o=I(),V=$.find(({name:e})=>e===l.model.name);if(!V)throw new Error(`Invalid smart playlist model: ${l.model.name}`);l.model=s.value=V;const u=i(()=>s.value?ne[s.value.type]:[]),x=u.value.find(({operator:e})=>e===l.operator);if(!x)throw new Error(`Invalid smart playlist operator: ${l.operator}`);o.value=x;const N=i(()=>{var e,a;return((e=s.value)==null?void 0:e.name)===l.model.name&&((a=o.value)==null?void 0:a.operator)===l.operator}),w=i(()=>{if(!o.value)return[];const e=[];for(let a=0,m=o.value.inputs||1;a<m;++a)e.push({id:`${l.model.name}_${o.value.operator}_${a}`,value:N.value?l.value[a]:""});return e});Y(u,()=>{var e;((e=s.value)==null?void 0:e.name)===l.model.name?o.value=u.value.find(({operator:a})=>a===l.operator):o.value=u.value[0]});const g=i(()=>{var e,a;return((e=o.value)==null?void 0:e.unit)||((a=s.value)==null?void 0:a.unit)}),A=()=>{var e;h("input",{id:l.id,model:s.value,operator:(e=o.value)==null?void 0:e.operator,value:w.value.map(a=>a.value)})},M=()=>h("remove");return(e,a)=>{const m=Z("Icon");return n(),R(le,null,{default:p(()=>[O("div",re,[d(S,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t),name:"model[]"},{default:p(()=>[(n(!0),r(f,null,_(b($),t=>(n(),r("option",{key:t.name,value:t},y(t.label),9,ue))),128))]),_:1},8,["modelValue"]),d(S,{modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=t=>o.value=t),name:"operator[]"},{default:p(()=>[(n(!0),r(f,null,_(u.value,t=>(n(),r("option",{key:t.operator,value:t},y(t.label),9,ie))),128))]),_:1},8,["modelValue"]),O("span",pe,[(n(!0),r(f,null,_(w.value,t=>{var k,B;return n(),R(b(L),{key:t.id,modelValue:t.value,"onUpdate:modelValue":[P=>t.value=P,A],type:((k=o.value)==null?void 0:k.type)||((B=s.value)==null?void 0:B.type),value:t.value,class:"!flex-1"},null,8,["modelValue","onUpdate:modelValue","type","value"])}),128)),g.value?(n(),r("span",de,y(g.value),1)):ee("",!0)]),d(oe,{class:"absolute -right-[14px] aspect-square top-1 scale-[60%] hover:scale-75 active:scale-[60%]",danger:"",rounded:"",small:"",title:"Remove this rule",onClick:ae(M,["prevent"])},{default:p(()=>[d(m,{icon:b(te)},null,8,["icon"])]),_:1},8,["onClick"])])]),_:1})}}});export{be as default};
