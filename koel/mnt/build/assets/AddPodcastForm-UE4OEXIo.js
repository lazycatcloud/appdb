import{t as y,r as b,k,o as x,n as C,T as s,W as a,z as t,Y as l,m as g,A as i,au as B,g as V}from"./userStore-DI58VgZ6.js";import{u as D,a as S,B as d,b as N}from"./Btn-2hiIT76k.js";import{k as P}from"./app-Dh_3ddLE.js";import{_ as E}from"./TextInput.vue_vue_type_script_setup_true_lang-Cn7Fe5WG.js";import{_ as K}from"./FormRow.vue_vue_type_script_setup_true_lang-jRw1p4cD.js";import"./index-bkhK2U3_.js";import"./common-Qp7bRr50.js";import"./index-BBRRzm9T.js";const O=["onSubmit","onKeydown"],T=s("header",null,[s("h1",null,"New Podcast")],-1),L=y({__name:"AddPodcastForm",emits:["close"],setup($,{emit:u}){const{showOverlay:m,hideOverlay:p}=P(),{toastSuccess:f}=D(),{showConfirmDialog:_}=S(),e=b(""),r=()=>u("close"),h=async()=>{m();try{const o=await V.store(e.value);r(),f(`Podcast "${o.title}" added.`)}catch(o){N("dialog").handleHttpError(o,{409:"You have already subscribed to this podcast."})}finally{p()}},n=async()=>{if(e.value.trim()===""){r();return}await _("Discard all changes?")&&r()};return(o,c)=>{const v=k("koel-focus");return x(),C("form",{class:"md:w-[420px] min-w-full",onSubmit:i(h,["prevent"]),onKeydown:B(n,["esc"])},[T,s("main",null,[a(K,null,{label:t(()=>[l("Podcast feed URL")]),default:t(()=>[g(a(E,{type:"url",modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=w=>e.value=w),name:"url",placeholder:"https://example.com/feed.xml",required:""},null,8,["modelValue"]),[[v]])]),_:1})]),s("footer",null,[a(d,{type:"submit"},{default:t(()=>[l("Save")]),_:1}),a(d,{white:"",onClick:i(n,["prevent"])},{default:t(()=>[l("Cancel")]),_:1},8,["onClick"])])],40,O)}}});export{L as default};
