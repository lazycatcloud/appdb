import{t as x,r as u,i as k,aR as d,h as B,o as r,y as V,z as e,W as o,Y as t,n as p,A as C,T as s}from"./userStore-DI58VgZ6.js";import{f as H}from"./common-Qp7bRr50.js";import{u as P,a as T,B as M,b as D}from"./Btn-2hiIT76k.js";import{u as E,k as N}from"./app-Dh_3ddLE.js";import{S as O,b as R}from"./index-Dvdk0smA.js";import{_ as W}from"./TextInput.vue_vue_type_script_setup_true_lang-Cn7Fe5WG.js";import{_ as f}from"./FormRow.vue_vue_type_script_setup_true_lang-jRw1p4cD.js";import"./index-bkhK2U3_.js";import"./index-BBRRzm9T.js";import"./usePlaylistManagement-BYa-nJNx.js";import"./downloadService-C6bGKWwx.js";import"./SoundBars-BQEuboqd.js";import"./index-SJV2sFs2.js";const $={key:0,class:"textk-text-secondary"},z=["onSubmit"],A=s("span",{id:"mediaPathHelp"},[t(" The "),s("em",null,"absolute"),t(" path to the server directory containing your media. Koel will scan this directory for songs and extract any available information."),s("br"),t(" Scanning may take a while, especially if you have a lot of songs, so be patient. ")],-1),ae=x({__name:"SettingsScreen",setup(K){const{toastSuccess:h}=P(),{showConfirmDialog:_}=T(),{go:y}=E(),{showOverlay:g,hideOverlay:v}=N(),i=u(k.state.storage_driver),a=u(d.state.media_path),n=a.value,S=B(()=>!n||!a.value||i.value!=="local"?!1:n!==a.value.trim()),l=async()=>{g({message:"Scanning…"});try{await d.update({media_path:a.value}),h("Settings saved."),y("home"),H()}catch(c){D("dialog").handleHttpError(c)}finally{v()}},w=async()=>{S.value?await _("Changing the media path will essentially remove all existing local data – songs, artists,           albums, favorites, etc. Sure you want to proceed?","Confirm")&&await l():await l()};return(c,m)=>(r(),V(R,null,{header:e(()=>[o(O,null,{default:e(()=>[t("Settings")]),_:1})]),default:e(()=>[i.value!=="local"?(r(),p("p",$," Since you’re not using a cloud storage, there’s no need to set a media path. ")):(r(),p("form",{key:1,class:"space-y-6",onSubmit:C(w,["prevent"])},[o(f,null,{label:e(()=>[t("Media Path")]),help:e(()=>[A]),default:e(()=>[o(W,{modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=b=>a.value=b),"aria-describedby":"mediaPathHelp",class:"w-full md:!w-2/3",name:"media_path",placeholder:"/path/to/your/music"},null,8,["modelValue"])]),_:1}),o(f,null,{default:e(()=>[s("div",null,[o(M,{"data-testid":"submit",type:"submit"},{default:e(()=>[t("Scan")]),_:1})])]),_:1})],40,z))]),_:1}))}});export{ae as default};
