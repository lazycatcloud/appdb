import{t as q,r as w,h as c,f as o,o as n,y as B,z as b,T as s,n as p,a0 as y,U as m,B as x,s as i,G as D}from"./userStore-DI58VgZ6.js";import{u as I,c as F,h as N,p as _}from"./app-Dh_3ddLE.js";import{u as R}from"./useContextMenu-uqGsLwl5.js";import{u as U}from"./Btn-2hiIT76k.js";import"./index-bkhK2U3_.js";import"./common-Qp7bRr50.js";import"./index-BBRRzm9T.js";import"./index-SJV2sFs2.js";const Y=s("li",{class:"separator"},null,-1),Q=s("li",{class:"separator"},null,-1),Z=q({__name:"PlaylistContextMenu",setup(W){const{base:f,ContextMenu:d,open:h,trigger:a}=R(),{go:u}=I(),{toastWarning:l,toastSuccess:C}=U(),{isPlus:P}=F(),{currentUserCan:T}=N(),t=w(),v=c(()=>T.editPlaylist(t.value)),g=c(()=>{var e;return P.value&&!((e=t.value)!=null&&e.is_smart)}),k=()=>a(()=>o.emit("MODAL_SHOW_EDIT_PLAYLIST_FORM",t.value)),L=()=>a(()=>o.emit("PLAYLIST_DELETE",t.value)),S=()=>a(async()=>{const e=await i.fetchForPlaylist(t.value);e.length?(_.queueAndPlay(e),u("queue")):l("The playlist is empty.")}),A=()=>a(async()=>{const e=await i.fetchForPlaylist(t.value);e.length?(_.queueAndPlay(e,!0),u("queue")):l("The playlist is empty.")}),E=()=>a(async()=>{const e=await i.fetchForPlaylist(t.value);e.length?(D.queueAfterCurrent(e),C("Playlist added to queue.")):l("The playlist is empty.")}),M=()=>a(()=>o.emit("MODAL_SHOW_PLAYLIST_COLLABORATION",t.value));return o.on("PLAYLIST_CONTEXT_MENU_REQUESTED",async({pageX:e,pageY:r},O)=>{t.value=O,await h(r,e)}),(e,r)=>(n(),B(x(d),{ref_key:"base",ref:f},{default:b(()=>[s("li",{onClick:S},"Play"),s("li",{onClick:A},"Shuffle"),s("li",{onClick:E},"Add to Queue"),g.value?(n(),p(y,{key:0},[Y,s("li",{onClick:M},"Collaborate…")],64)):m("",!0),v.value?(n(),p(y,{key:1},[Q,s("li",{onClick:k},"Edit…"),s("li",{onClick:L},"Delete")],64)):m("",!0)]),_:1},512))}});export{Z as default};
