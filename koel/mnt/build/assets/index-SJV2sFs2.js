import{af as L,ag as c,ah as C,ai as k,aj as y,ak as D,al as W,am as A}from"./index-bkhK2U3_.js";import{t as S,r as w,a6 as M,w as h,h as Y}from"./userStore-DI58VgZ6.js";const R=S({name:"OnClickOutside",props:["as","options"],emits:["trigger"],setup(e,{slots:n,emit:t}){const o=w();return L(o,l=>{t("trigger",l)},e.options),()=>{if(n.default)return M(e.as||"div",{ref:o},n.default())}}});function _(e){var n;const t=c(e);return(n=t==null?void 0:t.$el)!=null?n:t}const j=A?window:void 0;function H(...e){let n,t,o,l;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,l]=e,n=j):[n,t,o,l]=e,!n)return D;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const a=[],r=()=>{a.forEach(i=>i()),a.length=0},s=(i,f,d,v)=>(i.addEventListener(f,d,v),()=>i.removeEventListener(f,d,v)),u=h(()=>[_(n),c(l)],([i,f])=>{if(r(),!i)return;const d=W(f)?{...f}:f;a.push(...t.flatMap(v=>o.map(E=>s(i,v,E,d))))},{immediate:!0,flush:"post"}),g=()=>{u(),r()};return k(g),g}function m(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function O(e){const n=window.getComputedStyle(e);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&e.clientWidth<e.scrollWidth||n.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const t=e.parentNode;return!t||t.tagName==="BODY"?!1:O(t)}}function I(e){const n=e||window.event,t=n.target;return O(t)?!1:n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)}const p=new WeakMap;function N(e,n=!1){const t=w(n);let o=null;h(C(e),r=>{const s=m(c(r));if(s){const u=s;p.get(u)||p.set(u,u.style.overflow),t.value&&(u.style.overflow="hidden")}},{immediate:!0});const l=()=>{const r=m(c(e));!r||t.value||(y&&(o=H(r,"touchmove",s=>{I(s)},{passive:!1})),r.style.overflow="hidden",t.value=!0)},a=()=>{var r;const s=m(c(e));!s||!t.value||(y&&(o==null||o()),s.style.overflow=(r=p.get(s))!=null?r:"",p.delete(s),t.value=!1)};return k(a),Y({get(){return t.value},set(r){r?l():a()}})}function X(){let e=!1;const n=w(!1);return(t,o)=>{if(n.value=o.value,e)return;e=!0;const l=N(t,o.value);h(n,a=>l.value=a)}}X();export{R as O};
