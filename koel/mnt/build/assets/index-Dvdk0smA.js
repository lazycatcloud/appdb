function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SongListFilter-C6oVqW1o.js","assets/userStore-DI58VgZ6.js","assets/userStore-CkW9hTsr.css","assets/index-bkhK2U3_.js","assets/app-Dh_3ddLE.js","assets/Btn-2hiIT76k.js","assets/common-Qp7bRr50.js","assets/index-BBRRzm9T.js","assets/app-ByHGIipi.css","assets/TextInput.vue_vue_type_script_setup_true_lang-Cn7Fe5WG.js","assets/usePlaylistManagement-BYa-nJNx.js","assets/downloadService-C6bGKWwx.js","assets/SoundBars-BQEuboqd.js","assets/index-SJV2sFs2.js","assets/UploadItem-D7WBI8fK.js","assets/UploadItem-B0iRfoK3.css","assets/UserListScreen-Br9tVcCd.js","assets/google-KJUKpri4.js","assets/invitationService-DTH8jUK0.js","assets/UserListScreen-BTkzwLMY.css","assets/AlbumArtOverlay-DiDZaPF7.js","assets/AlbumScreen-DVNZ1Tqi.js","assets/ScreenHeaderSkeleton-BPPtSZSV.js","assets/ArtistAlbumScreenTabs-BtbdPDVW.js","assets/ArtistAlbumScreenTabs-ClhHdOGy.css","assets/ArtistScreen-DpsttM1u.js","assets/GenreScreen-Dx5VMAVp.js","assets/PodcastScreen-DkvF4lJg.js","assets/PodcastScreen-DG7pLLP-.css","assets/EpisodeScreen-BCkM9__r.js","assets/EpisodeScreen-Co3LXFT4.css","assets/SettingsScreen-Bz47CDJ0.js","assets/FormRow.vue_vue_type_script_setup_true_lang-jRw1p4cD.js","assets/ProfileScreen-D0EcfZiE.js","assets/Tabs-D6rBcrC1.js","assets/YouTubeScreen-NKEIAId1.js","assets/YouTubeScreen-BJKp6R3x.css","assets/SearchSongResultsScreen-hxdX67IE.js","assets/NotFoundScreen-BKVjM1GT.js","assets/VisualizerScreen-BcrJh-W-.js","assets/SelectBox-CnkytuoA.js","assets/SelectBox-lAjypkF6.css","assets/VisualizerScreen-C4n8gvl-.css","assets/LyricsPane-CTQI65D3.js","assets/LyricsPane-CO7GfBl3.css","assets/ArtistInfo-Lz5UFYmJ.js","assets/ExpandableContentBlock.vue_vue_type_script_setup_true_lang-DjEn_-8g.js","assets/AlbumInfo-r6keh5TY.js","assets/YouTubeVideoList-DFqCEJ86.js","assets/ExtraDrawerTabHeader-mUuK_512.js","assets/ModalWrapper-nmqXkKy4.js","assets/ModalWrapper-Dt0yCcro.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{am as it,w as Ve,t as R,r as D,Z as ut,x as X,o,y as b,z as m,m as G,T as y,W as _,B as s,Y as $,aa as ge,an as eo,_ as Z,u as et,ac as ne,i as Ee,h as L,ao as to,E as bt,n as d,ap as Qs,U as T,v as le,k as Ce,aq as kt,A as B,j as Xe,L as xt,ar as so,a0 as M,V as z,X as _e,as as hs,a1 as Q,O as me,a as us,q as ce,F as _t,at as aa,au as $s,ad as ds,f as pe,G as Pe,a9 as oa,a3 as ps,s as Je,av as $t,af as no,b as wt,p as ht,a4 as ve,a5 as ye,M as On,C as zt,c as Fs,aw as la,K as ao,ax as Wt,ay as st,e as Yt,d as It,a7 as Xs,a8 as Zs,Q as Nn,S as Is,az as jt,aA as Fn,aB as oo,aC as lo,J as Un,D as Ps,aD as ro,aE as Bn,g as Vn}from"./userStore-DI58VgZ6.js";import{C as io,D as co,E as Vt,F as Ht,t as uo,v as fs,G as po,H as Js,I as fo,b as _o,J as Us,K as Bs,L as Hn,M as ra,N as ia,O as ho,P as mo,Q as go,R as Vs,S as vo,T as en,U as ca,V as yo,f as bo,W as ko,X as xo,Y as wo,Z as So,_ as Ao,$ as To,a0 as ua,a1 as Eo,a2 as da,a3 as Co,a4 as pa,a5 as $o,a6 as Io,a7 as Po,a8 as Lo,a9 as Do,k as Ro,aa as Mo,ab as Oo,ac as No,ad as Fo,ae as Uo}from"./index-bkhK2U3_.js";import{b as Bo,T as Vo,z as Ho,a as zo,m as Go,p as we,c as Kt,_ as fa,d as tn,e as Pt,u as be,f as Yo,g as sn,h as _a,i as qo,j as Wo}from"./app-Dh_3ddLE.js";import{P as nn,c as an,S as on,d as ha,e as ma,f as ga,g as jo,B as Fe,u as va,b as qe,C as ya}from"./Btn-2hiIT76k.js";import{_ as ba}from"./TextInput.vue_vue_type_script_setup_true_lang-Cn7Fe5WG.js";import{u as Ko,a as ka}from"./usePlaylistManagement-BYa-nJNx.js";import{g as qt,d as nt}from"./common-Qp7bRr50.js";import{d as ms}from"./downloadService-C6bGKWwx.js";import Qo from"./SoundBars-BQEuboqd.js";import{O as gs}from"./index-SJV2sFs2.js";import{a as Xo,f as Zo,b as Jo}from"./index-BBRRzm9T.js";const el={scrollTo(a,e,t,n){if(t<=0||!a)return;const i=(e-a.scrollTop)/t*10;window.setTimeout(()=>{if(a.scrollTop=a.scrollTop+i,a.scrollTop===e){n&&n();return}this.scrollTo(a,e,t-10)},10)}},tl=["image/jpeg","image/png","image/gif","image/webp"],xa=()=>{const a=new FileReader;return{readAsDataUrl:(t,n)=>{a.addEventListener("load",async()=>await n(a.result)),a.readAsDataURL(t)}}},ln=(a,e,t={})=>{const n=h=>{if(it(h)&&!h.value)throw new TypeError("Reference element is not defined");return it(h)?h.value:h},l=Object.assign({placement:"bottom",useArrow:!0,autoTrigger:!0},t);let i,r,c,u;return{setup:()=>{const h=n(a),g=n(e);g.style.display="none";const x=[Bo(),Vo(6)];let k;l.useArrow&&(k=document.createElement("div"),k.className="arrow",g.appendChild(k),x.push(Go({element:k,padding:6})));const E=async()=>await zo(h,g,{placement:l.placement,middleware:x},k);i=Ho(h,g,E),r=async()=>{g.style.display="block",await E()},c=()=>g.style.display="none",u=()=>g.style.display==="none"?r():c(),l.autoTrigger&&(h.addEventListener("mouseenter",r),h.addEventListener("focus",r),h.addEventListener("mouseleave",c),h.addEventListener("blur",c))},teardown:()=>i(),show:()=>r(),hide:()=>c(),trigger:()=>u()}};function ct(a){return Array.isArray?Array.isArray(a):Aa(a)==="[object Array]"}const sl=1/0;function nl(a){if(typeof a=="string")return a;let e=a+"";return e=="0"&&1/a==-sl?"-0":e}function al(a){return a==null?"":nl(a)}function at(a){return typeof a=="string"}function wa(a){return typeof a=="number"}function ol(a){return a===!0||a===!1||ll(a)&&Aa(a)=="[object Boolean]"}function Sa(a){return typeof a=="object"}function ll(a){return Sa(a)&&a!==null}function Be(a){return a!=null}function Ls(a){return!a.trim().length}function Aa(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}const rl="Incorrect 'index' type",il=a=>`Invalid value for key ${a}`,cl=a=>`Pattern length exceeds max of ${a}.`,ul=a=>`Missing ${a} property in key`,dl=a=>`Property 'weight' in key '${a}' must be a positive integer`,zn=Object.prototype.hasOwnProperty;class pl{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(n=>{let l=Ta(n);this._keys.push(l),this._keyMap[l.id]=l,t+=l.weight}),this._keys.forEach(n=>{n.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ta(a){let e=null,t=null,n=null,l=1,i=null;if(at(a)||ct(a))n=a,e=Gn(a),t=Hs(a);else{if(!zn.call(a,"name"))throw new Error(ul("name"));const r=a.name;if(n=r,zn.call(a,"weight")&&(l=a.weight,l<=0))throw new Error(dl(r));e=Gn(r),t=Hs(r),i=a.getFn}return{path:e,id:t,weight:l,src:n,getFn:i}}function Gn(a){return ct(a)?a:a.split(".")}function Hs(a){return ct(a)?a.join("."):a}function fl(a,e){let t=[],n=!1;const l=(i,r,c)=>{if(Be(i))if(!r[c])t.push(i);else{let u=r[c];const f=i[u];if(!Be(f))return;if(c===r.length-1&&(at(f)||wa(f)||ol(f)))t.push(al(f));else if(ct(f)){n=!0;for(let h=0,g=f.length;h<g;h+=1)l(f[h],r,c+1)}else r.length&&l(f,r,c+1)}};return l(a,at(e)?e.split("."):e,0),n?t:t[0]}const _l={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},hl={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(a,e)=>a.score===e.score?a.idx<e.idx?-1:1:a.score<e.score?-1:1},ml={location:0,threshold:.6,distance:100},gl={useExtendedSearch:!1,getFn:fl,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var q={...hl,..._l,...ml,...gl};const vl=/[^ ]+/g;function yl(a=1,e=3){const t=new Map,n=Math.pow(10,e);return{get(l){const i=l.match(vl).length;if(t.has(i))return t.get(i);const r=1/Math.pow(i,.5*a),c=parseFloat(Math.round(r*n)/n);return t.set(i,c),c},clear(){t.clear()}}}class rn{constructor({getFn:e=q.getFn,fieldNormWeight:t=q.fieldNormWeight}={}){this.norm=yl(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,at(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();at(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Be(e)||Ls(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((l,i)=>{let r=l.getFn?l.getFn(e):this.getFn(e,l.path);if(Be(r)){if(ct(r)){let c=[];const u=[{nestedArrIndex:-1,value:r}];for(;u.length;){const{nestedArrIndex:f,value:h}=u.pop();if(Be(h))if(at(h)&&!Ls(h)){let g={v:h,i:f,n:this.norm.get(h)};c.push(g)}else ct(h)&&h.forEach((g,x)=>{u.push({nestedArrIndex:x,value:g})})}n.$[i]=c}else if(at(r)&&!Ls(r)){let c={v:r,n:this.norm.get(r)};n.$[i]=c}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ea(a,e,{getFn:t=q.getFn,fieldNormWeight:n=q.fieldNormWeight}={}){const l=new rn({getFn:t,fieldNormWeight:n});return l.setKeys(a.map(Ta)),l.setSources(e),l.create(),l}function bl(a,{getFn:e=q.getFn,fieldNormWeight:t=q.fieldNormWeight}={}){const{keys:n,records:l}=a,i=new rn({getFn:e,fieldNormWeight:t});return i.setKeys(n),i.setIndexRecords(l),i}function as(a,{errors:e=0,currentLocation:t=0,expectedLocation:n=0,distance:l=q.distance,ignoreLocation:i=q.ignoreLocation}={}){const r=e/a.length;if(i)return r;const c=Math.abs(n-t);return l?r+c/l:c?1:r}function kl(a=[],e=q.minMatchCharLength){let t=[],n=-1,l=-1,i=0;for(let r=a.length;i<r;i+=1){let c=a[i];c&&n===-1?n=i:!c&&n!==-1&&(l=i-1,l-n+1>=e&&t.push([n,l]),n=-1)}return a[i-1]&&i-n>=e&&t.push([n,i-1]),t}const yt=32;function xl(a,e,t,{location:n=q.location,distance:l=q.distance,threshold:i=q.threshold,findAllMatches:r=q.findAllMatches,minMatchCharLength:c=q.minMatchCharLength,includeMatches:u=q.includeMatches,ignoreLocation:f=q.ignoreLocation}={}){if(e.length>yt)throw new Error(cl(yt));const h=e.length,g=a.length,x=Math.max(0,Math.min(n,g));let k=i,E=x;const C=c>1||u,I=C?Array(g):[];let w;for(;(w=a.indexOf(e,E))>-1;){let W=as(e,{currentLocation:w,expectedLocation:x,distance:l,ignoreLocation:f});if(k=Math.min(W,k),E=w+h,C){let ae=0;for(;ae<h;)I[w+ae]=1,ae+=1}}E=-1;let S=[],v=1,P=h+g;const se=1<<h-1;for(let W=0;W<h;W+=1){let ae=0,U=P;for(;ae<U;)as(e,{errors:W,currentLocation:x+U,expectedLocation:x,distance:l,ignoreLocation:f})<=k?ae=U:P=U,U=Math.floor((P-ae)/2+ae);P=U;let ee=Math.max(1,x-U+1),Y=r?g:Math.min(x+U,g)+h,te=Array(Y+2);te[Y+1]=(1<<W)-1;for(let ue=Y;ue>=ee;ue-=1){let Ge=ue-1,Le=t[a.charAt(Ge)];if(C&&(I[Ge]=+!!Le),te[ue]=(te[ue+1]<<1|1)&Le,W&&(te[ue]|=(S[ue+1]|S[ue])<<1|1|S[ue+1]),te[ue]&se&&(v=as(e,{errors:W,currentLocation:Ge,expectedLocation:x,distance:l,ignoreLocation:f}),v<=k)){if(k=v,E=Ge,E<=x)break;ee=Math.max(1,2*x-E)}}if(as(e,{errors:W+1,currentLocation:x,expectedLocation:x,distance:l,ignoreLocation:f})>k)break;S=te}const O={isMatch:E>=0,score:Math.max(.001,v)};if(C){const W=kl(I,c);W.length?u&&(O.indices=W):O.isMatch=!1}return O}function wl(a){let e={};for(let t=0,n=a.length;t<n;t+=1){const l=a.charAt(t);e[l]=(e[l]||0)|1<<n-t-1}return e}class Ca{constructor(e,{location:t=q.location,threshold:n=q.threshold,distance:l=q.distance,includeMatches:i=q.includeMatches,findAllMatches:r=q.findAllMatches,minMatchCharLength:c=q.minMatchCharLength,isCaseSensitive:u=q.isCaseSensitive,ignoreLocation:f=q.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:l,includeMatches:i,findAllMatches:r,minMatchCharLength:c,isCaseSensitive:u,ignoreLocation:f},this.pattern=u?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(x,k)=>{this.chunks.push({pattern:x,alphabet:wl(x),startIndex:k})},g=this.pattern.length;if(g>yt){let x=0;const k=g%yt,E=g-k;for(;x<E;)h(this.pattern.substr(x,yt),x),x+=yt;if(k){const C=g-yt;h(this.pattern.substr(C),C)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let E={isMatch:!0,score:0};return n&&(E.indices=[[0,e.length-1]]),E}const{location:l,distance:i,threshold:r,findAllMatches:c,minMatchCharLength:u,ignoreLocation:f}=this.options;let h=[],g=0,x=!1;this.chunks.forEach(({pattern:E,alphabet:C,startIndex:I})=>{const{isMatch:w,score:S,indices:v}=xl(e,E,C,{location:l+I,distance:i,threshold:r,findAllMatches:c,minMatchCharLength:u,includeMatches:n,ignoreLocation:f});w&&(x=!0),g+=S,w&&v&&(h=[...h,...v])});let k={isMatch:x,score:x?g/this.chunks.length:1};return x&&n&&(k.indices=h),k}}class mt{constructor(e){this.pattern=e}static isMultiMatch(e){return Yn(e,this.multiRegex)}static isSingleMatch(e){return Yn(e,this.singleRegex)}search(){}}function Yn(a,e){const t=a.match(e);return t?t[1]:null}class Sl extends mt{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Al extends mt{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Tl extends mt{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class El extends mt{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Cl extends mt{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class $l extends mt{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class $a extends mt{constructor(e,{location:t=q.location,threshold:n=q.threshold,distance:l=q.distance,includeMatches:i=q.includeMatches,findAllMatches:r=q.findAllMatches,minMatchCharLength:c=q.minMatchCharLength,isCaseSensitive:u=q.isCaseSensitive,ignoreLocation:f=q.ignoreLocation}={}){super(e),this._bitapSearch=new Ca(e,{location:t,threshold:n,distance:l,includeMatches:i,findAllMatches:r,minMatchCharLength:c,isCaseSensitive:u,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ia extends mt{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,n;const l=[],i=this.pattern.length;for(;(n=e.indexOf(this.pattern,t))>-1;)t=n+i,l.push([n,t-1]);const r=!!l.length;return{isMatch:r,score:r?0:1,indices:l}}}const zs=[Sl,Ia,Tl,El,$l,Cl,Al,$a],qn=zs.length,Il=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Pl="|";function Ll(a,e={}){return a.split(Pl).map(t=>{let n=t.trim().split(Il).filter(i=>i&&!!i.trim()),l=[];for(let i=0,r=n.length;i<r;i+=1){const c=n[i];let u=!1,f=-1;for(;!u&&++f<qn;){const h=zs[f];let g=h.isMultiMatch(c);g&&(l.push(new h(g,e)),u=!0)}if(!u)for(f=-1;++f<qn;){const h=zs[f];let g=h.isSingleMatch(c);if(g){l.push(new h(g,e));break}}}return l})}const Dl=new Set([$a.type,Ia.type]);class Rl{constructor(e,{isCaseSensitive:t=q.isCaseSensitive,includeMatches:n=q.includeMatches,minMatchCharLength:l=q.minMatchCharLength,ignoreLocation:i=q.ignoreLocation,findAllMatches:r=q.findAllMatches,location:c=q.location,threshold:u=q.threshold,distance:f=q.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:l,findAllMatches:r,ignoreLocation:i,location:c,threshold:u,distance:f},this.pattern=t?e:e.toLowerCase(),this.query=Ll(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:l}=this.options;e=l?e:e.toLowerCase();let i=0,r=[],c=0;for(let u=0,f=t.length;u<f;u+=1){const h=t[u];r.length=0,i=0;for(let g=0,x=h.length;g<x;g+=1){const k=h[g],{isMatch:E,indices:C,score:I}=k.search(e);if(E){if(i+=1,c+=I,n){const w=k.constructor.type;Dl.has(w)?r=[...r,...C]:r.push(C)}}else{c=0,i=0,r.length=0;break}}if(i){let g={isMatch:!0,score:c/i};return n&&(g.indices=r),g}}return{isMatch:!1,score:1}}}const Gs=[];function Ml(...a){Gs.push(...a)}function Ys(a,e){for(let t=0,n=Gs.length;t<n;t+=1){let l=Gs[t];if(l.condition(a,e))return new l(a,e)}return new Ca(a,e)}const _s={AND:"$and",OR:"$or"},qs={PATH:"$path",PATTERN:"$val"},Ws=a=>!!(a[_s.AND]||a[_s.OR]),Ol=a=>!!a[qs.PATH],Nl=a=>!ct(a)&&Sa(a)&&!Ws(a),Wn=a=>({[_s.AND]:Object.keys(a).map(e=>({[e]:a[e]}))});function Pa(a,e,{auto:t=!0}={}){const n=l=>{let i=Object.keys(l);const r=Ol(l);if(!r&&i.length>1&&!Ws(l))return n(Wn(l));if(Nl(l)){const u=r?l[qs.PATH]:i[0],f=r?l[qs.PATTERN]:l[u];if(!at(f))throw new Error(il(u));const h={keyId:Hs(u),pattern:f};return t&&(h.searcher=Ys(f,e)),h}let c={children:[],operator:i[0]};return i.forEach(u=>{const f=l[u];ct(f)&&f.forEach(h=>{c.children.push(n(h))})}),c};return Ws(a)||(a=Wn(a)),n(a)}function Fl(a,{ignoreFieldNorm:e=q.ignoreFieldNorm}){a.forEach(t=>{let n=1;t.matches.forEach(({key:l,norm:i,score:r})=>{const c=l?l.weight:null;n*=Math.pow(r===0&&c?Number.EPSILON:r,(c||1)*(e?1:i))}),t.score=n})}function Ul(a,e){const t=a.matches;e.matches=[],Be(t)&&t.forEach(n=>{if(!Be(n.indices)||!n.indices.length)return;const{indices:l,value:i}=n;let r={indices:l,value:i};n.key&&(r.key=n.key.src),n.idx>-1&&(r.refIndex=n.idx),e.matches.push(r)})}function Bl(a,e){e.score=a.score}function Vl(a,e,{includeMatches:t=q.includeMatches,includeScore:n=q.includeScore}={}){const l=[];return t&&l.push(Ul),n&&l.push(Bl),a.map(i=>{const{idx:r}=i,c={item:e[r],refIndex:r};return l.length&&l.forEach(u=>{u(i,c)}),c})}class Lt{constructor(e,t={},n){this.options={...q,...t},this.options.useExtendedSearch,this._keyStore=new pl(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof rn))throw new Error(rl);this._myIndex=t||Ea(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Be(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,l=this._docs.length;n<l;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,l-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:l,shouldSort:i,sortFn:r,ignoreFieldNorm:c}=this.options;let u=at(e)?at(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Fl(u,{ignoreFieldNorm:c}),i&&u.sort(r),wa(t)&&t>-1&&(u=u.slice(0,t)),Vl(u,this._docs,{includeMatches:n,includeScore:l})}_searchStringList(e){const t=Ys(e,this.options),{records:n}=this._myIndex,l=[];return n.forEach(({v:i,i:r,n:c})=>{if(!Be(i))return;const{isMatch:u,score:f,indices:h}=t.searchIn(i);u&&l.push({item:i,idx:r,matches:[{score:f,value:i,norm:c,indices:h}]})}),l}_searchLogical(e){const t=Pa(e,this.options),n=(c,u,f)=>{if(!c.children){const{keyId:g,searcher:x}=c,k=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(u,g),searcher:x});return k&&k.length?[{idx:f,item:u,matches:k}]:[]}const h=[];for(let g=0,x=c.children.length;g<x;g+=1){const k=c.children[g],E=n(k,u,f);if(E.length)h.push(...E);else if(c.operator===_s.AND)return[]}return h},l=this._myIndex.records,i={},r=[];return l.forEach(({$:c,i:u})=>{if(Be(c)){let f=n(t,c,u);f.length&&(i[u]||(i[u]={idx:u,item:c,matches:[]},r.push(i[u])),f.forEach(({matches:h})=>{i[u].matches.push(...h)}))}}),r}_searchObjectList(e){const t=Ys(e,this.options),{keys:n,records:l}=this._myIndex,i=[];return l.forEach(({$:r,i:c})=>{if(!Be(r))return;let u=[];n.forEach((f,h)=>{u.push(...this._findMatches({key:f,value:r[h],searcher:t}))}),u.length&&i.push({idx:c,item:r,matches:u})}),i}_findMatches({key:e,value:t,searcher:n}){if(!Be(t))return[];let l=[];if(ct(t))t.forEach(({v:i,i:r,n:c})=>{if(!Be(i))return;const{isMatch:u,score:f,indices:h}=n.searchIn(i);u&&l.push({score:f,key:e,value:i,idx:r,norm:c,indices:h})});else{const{v:i,n:r}=t,{isMatch:c,score:u,indices:f}=n.searchIn(i);c&&l.push({score:u,key:e,value:i,norm:r,indices:f})}return l}}Lt.version="7.0.0";Lt.createIndex=Ea;Lt.parseIndex=bl;Lt.config=q;Lt.parseQuery=Pa;Ml(Rl);const La=(a,e)=>{const t=new Lt([],{keys:e});let n=a;const l=r=>{n=r,t.setCollection(n)};return it(a)?(t.setCollection(a.value),Ve(a,()=>l(a.value))):l(a),{search:r=>(r=(r==null?void 0:r.trim())??null,r?t.search(r).map(c=>c.item):it(n)?n.value:n),setDocuments:l}},Hl=R({__name:"BtnScrollToTop",setup(a){const e=D(),t=D(!1),n=()=>{var l;return el.scrollTo((l=e.value)==null?void 0:l.parentElement,0,500,()=>t.value=!1)};return ut(()=>{var l,i;(i=(l=e.value)==null?void 0:l.parentElement)==null||i.addEventListener("scroll",r=>{t.value=r.target.scrollTop>64})}),(l,i)=>{const r=X("Icon");return o(),b(eo,{name:"fade"},{default:m(()=>[G(y("button",{ref_key:"el",ref:e,class:"sm:hidden block fixed right-[1.8rem] z-20 opacity-100 duration-500 transition-opacity rounded-full py-2 px-4 bg-black/50",title:"Scroll to top",type:"button",onClick:n},[_(r,{icon:s(io)},null,8,["icon"]),$("  Top ")],512),[[ge,t.value]])]),_:1})}}}),Da=Z(Hl,[["__scopeId","data-v-cfdfe1ff"]]),Ra=(a,e)=>{co(a,e,{distance:32});let t=0;const n=5,l=async()=>{const i=a.value;if(!i){window.setTimeout(()=>l(),200);return}i.scrollHeight<=i.clientHeight&&t<n&&(t++,await e(),window.setTimeout(()=>l(),200))};return{ToTopButton:Da,makeScrollable:l}},zl=()=>{const{isAdmin:a}=et(),e=ne(Ee.state,"latest_version"),t=ne(Ee.state,"current_version"),n=L(()=>to.compare(e.value,t.value,">")),l=L(()=>a.value&&n.value),i=L(()=>`https://github.com/koel/koel/releases/tag/${e.value}`);return{shouldNotifyNewVersion:l,currentVersion:t,latestVersion:e,latestVersionReleaseUrl:i}},Gl={key:0,class:"text-k-highlight text-base inline-block ml-2"},Yl=y("span",{class:"hidden"},"Toggle the song list controls",-1),ql=R({__name:"ScreenControlsToggle",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,n=L({get:()=>t.modelValue,set:l=>e("update:modelValue",l)});return(l,i)=>{const r=X("Icon");return s(bt).phone?(o(),d("label",Gl,[G(y("input",{"onUpdate:modelValue":i[0]||(i[0]=c=>n.value=c),class:"hidden",type:"checkbox"},null,512),[[Qs,n.value]]),_(r,{icon:n.value?s(Vt):s(Ht),class:"toggle"},null,8,["icon"]),Yl])):T("",!0)}}}),Wl=["title","onClick"],jl=["src"],Kl=y("span",{class:"absolute top-0 left-0 w-full h-full group-hover:bg-black/40 no-hover:bg-black/40 z-10"},null,-1),Ql={class:"absolute flex opacity-0 no-hover:opacity-100 items-center justify-center w-[24px] aspect-square rounded-full top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-k-highlight group-hover:opacity-100 duration-500 transition z-20"},Ma=R({__name:"SongThumbnail",props:{playable:{}},setup(a){const e=a,{playable:t}=le(e),n=L(()=>qt(t.value,"album_cover","episode_image")),l=()=>we.play(t.value),i=L(()=>t.value.playback_state==="Playing"?"Pause":t.value.playback_state==="Paused"?"Resume":"Play"),r=async()=>{t.value.playback_state==="Stopped"?await l():t.value.playback_state==="Paused"?await we.resume():we.pause()};return(c,u)=>{const f=X("Icon"),h=Ce("koel-hide-broken-icon");return o(),d("button",{style:kt({backgroundImage:`url(${s(nt)})`}),title:i.value,class:"song-thumbnail w-[48px] aspect-square bg-cover relative rounded overflow-hidden active:scale-95",onClick:B(r,["prevent"])},[G(y("img",{alt:"Cover image",src:n.value,class:"w-full aspect-square object-cover",loading:"lazy"},null,8,jl),[[h]]),Kl,y("span",Ql,[s(t).playback_state==="Playing"?(o(),b(f,{key:0,icon:s(uo),class:"text-white"},null,8,["icon"])):(o(),b(f,{key:1,icon:s(fs),class:"text-white ml-0.5"},null,8,["icon"]))])],12,Wl)}}}),Xl=["alt","src","title","onerror"],cn=R({__name:"UserAvatar",props:{user:{}},setup(a){const e=a,{user:t}=le(e);return(n,l)=>(o(),d("img",{alt:`Avatar of ${s(t).name}`,src:s(t).avatar,title:s(t).name,onerror:s(t).avatar=s(nt),class:"rounded-full aspect-square bg-k-bg-primary object-cover"},null,8,Xl))}}),Zl={class:"!opacity-50"},Oa=R({__name:"ExternalMark",setup(a){return(e,t)=>{const n=X("Icon");return o(),d("span",Zl,[_(n,{icon:s(po)},null,8,["icon"])])}}}),Jl=["onDblclick"],er={class:"track-number"},tr={key:1,class:"text-k-text-secondary"},sr={class:"thumbnail leading-none"},nr={class:"title-artist flex flex-col gap-2 overflow-hidden"},ar={class:"title text-k-text-primary !flex gap-2 items-center"},or={class:"artist"},lr={class:"album"},rr={class:"collaborator"},ir=["title"],cr={class:"time"},ur={class:"extra"},dr=R({__name:"SongListItem",props:{item:{}},emits:["play"],setup(a,{emit:e}){const t=a,[n]=Xe(nn,[{}]),{currentUser:l}=et(),{isPlus:i}=Kt(),{item:r}=le(t),c=L(()=>r.value.playable),u=L(()=>["Playing","Paused"].includes(c.value.playback_state)),f=L(()=>{var C;return xt(c.value)?i.value&&c.value.owner_id!==((C=l.value)==null?void 0:C.id):!1}),h=so(c.value.length),g=L(()=>qt(c.value,"artist_name","podcast_author")),x=L(()=>qt(c.value,"album_name","podcast_title")),k=L(()=>c.value.collaboration.user),E=()=>e("play",c.value);return(C,I)=>{const w=X("Icon");return o(),d("article",{class:_e([{playing:u.value,external:f.value,selected:s(r).selected},"song-item group text-k-text-secondary border-b border-k-border !max-w-full h-[64px] flex items-center transition-[background-color,_box-shadow] ease-in-out duration-200 focus:rounded-md focus focus-within:rounded-md focus:ring-inset focus:ring-1 focus:!ring-k-accent focus-within:ring-inset focus-within:ring-1 focus-within:!ring-k-accent hover:bg-white/5 hover:ring-inset hover:ring-1 hover:ring-white/10 hover:rounded-md"]),"data-testid":"song-item",tabindex:"0",onDblclick:B(E,["prevent","stop"])},[y("span",er,[c.value.playback_state==="Playing"?(o(),b(Qo,{key:0})):(o(),d("span",tr,[s(xt)(c.value)?(o(),d(M,{key:0},[$(z(c.value.track||""),1)],64)):(o(),b(w,{key:1,icon:s(Js)},null,8,["icon"]))]))]),y("span",sr,[_(Ma,{playable:c.value},null,8,["playable"])]),y("span",nr,[y("span",ar,[f.value?(o(),b(Oa,{key:0,class:"!inline-block"})):T("",!0),$(" "+z(c.value.title),1)]),y("span",or,z(g.value),1)]),y("span",lr,z(x.value),1),s(n).collaborative?(o(),d(M,{key:0},[y("span",rr,[_(cn,{user:k.value,width:"24"},null,8,["user"])]),y("span",{title:c.value.collaboration.added_at,class:"added-at"},z(c.value.collaboration.fmt_added_at),9,ir)],64)):T("",!0),y("span",cr,z(s(h)),1),y("span",ur,[_(fa,{playable:c.value},null,8,["playable"])])],42,Jl)}}}),pr=Z(dr,[["__scopeId","data-v-70feb585"]]),fr=["onClick"],_r={class:"icon hidden ml-3"},hr=R({__name:"SongListSorter",props:{field:{default:"title"},order:{default:"asc"},hasCustomOrderSort:{type:Boolean,default:!1},contentType:{default:"songs"}},emits:["sort"],setup(a,{emit:e}){const t=a,{field:n,order:l,hasCustomOrderSort:i,contentType:r}=le(t),c=D(),u=D(),f=L(()=>{const I={label:"Title",field:"title"},w={label:"Artist",field:"artist_name"},S={label:"Author",field:"podcast_author"},v={label:"Artist or Author",field:["artist_name","podcast_author"]},P={label:"Album",field:"album_name"},se={label:"Track & Disc",field:"track"},O={label:"Time",field:"length"},W={label:"Date Added",field:"created_at"},ae={label:"Podcast",field:"podcast_title"},U={label:"Album or Podcast",field:["album_name","podcast_title"]},ee={label:"Custom Order",field:"position"};let Y=[I,P,w,se,O,W];return r.value==="episodes"?Y=[I,ae,S,O,W]:r.value==="mixed"&&(Y=[I,U,v,O,W]),i.value&&Y.push(ee),Y}),{setup:h,teardown:g,trigger:x,hide:k}=ln(c,u,{placement:"bottom-end",useArrow:!1,autoTrigger:!1}),E=I=>{e("sort",I),k()},C=I=>me.isEqual(us(I),us(t.field));return ut(()=>u.value&&h()),hs(()=>g()),(I,w)=>{const S=X("Icon");return o(),d("article",null,[y("button",{ref_key:"button",ref:c,class:"w-full focus:text-k-highlight",title:"Sort",onClick:w[0]||(w[0]=B((...v)=>s(x)&&s(x)(...v),["stop"]))},[_(S,{icon:s(fo)},null,8,["icon"])],512),_(s(gs),{onTrigger:s(k)},{default:m(()=>[y("menu",{ref_key:"menu",ref:u,class:"context-menu normal-case tracking-normal"},[(o(!0),d(M,null,Q(f.value,v=>(o(),d("li",{key:v.label,class:_e([C(v.field)&&"active","cursor-pointer flex justify-between"]),onClick:P=>E(v.field)},[y("span",null,z(v.label),1),y("span",_r,[s(n)==="position"?(o(),b(S,{key:0,icon:s(_o)},null,8,["icon"])):s(l)==="asc"?(o(),b(S,{key:1,icon:s(Us)},null,8,["icon"])):(o(),b(S,{key:2,icon:s(Bs)},null,8,["icon"]))])],10,fr))),128))],512)]),_:1},8,["onTrigger"])])}}}),mr=Z(hr,[["__scopeId","data-v-76b89e8f"]]),jn=5,gr=R({__name:"VirtualScroller",props:{items:{},itemHeight:{}},emits:["scrolled-to-end","scroll"],setup(a,{emit:e}){const t=a,{items:n,itemHeight:l}=le(t),i=D(),r=D(0),c=D(0),u=L(()=>n.value.length*l.value),f=L(()=>Math.max(0,Math.floor(c.value/l.value)-jn)),h=L(()=>f.value*l.value),g=L(()=>{let E=Math.ceil(r.value/l.value)+2*jn;return E=Math.min(n.value.length-f.value,E),n.value.slice(f.value,f.value+E)}),x=E=>requestAnimationFrame(()=>{c.value=E.target.scrollTop,i.value&&(e("scroll",E),i.value.scrollTop+i.value.clientHeight+l.value>=i.value.scrollHeight&&e("scrolled-to-end"))}),k=new ResizeObserver(E=>E.forEach(C=>r.value=C.contentRect.height));return ut(()=>{k.observe(i.value),r.value=i.value.offsetHeight}),hs(()=>k.unobserve(i.value)),(E,C)=>{const I=Ce("koel-overflow-fade");return G((o(),d("div",{ref_key:"scroller",ref:i,class:"virtual-scroller will-change-transform overflow-scroll",onScrollPassive:x},[y("div",{style:kt({height:`${u.value}px`}),class:"will-change-transform overflow-hidden"},[y("div",{style:kt({transform:`translateY(${h.value}px)`}),class:"will-change-transform items-wrapper"},[(o(!0),d(M,null,Q(g.value,w=>ce(E.$slots,"default",{item:w},void 0,!0)),256))],4)],4)],32)),[[I]])}}}),vr=Z(gr,[["__scopeId","data-v-ad0897b4"]]),yr=["onKeydown"],br=["title"],kr=y("span",{class:"opacity-50"},"/",-1),xr={key:3,class:"ml-2"},wr=y("span",{class:"collaborator"},"User",-1),Sr=y("span",{class:"added-at"},"Added",-1),Ar={class:"extra"},Tr=R({__name:"SongList",emits:["press:enter","press:delete","reorder","sort","scroll-breakpoint","scrolled-to-end"],setup(a,{expose:e,emit:t}){const{startDragging:n}=Pt("playables"),{getDroppedData:l,acceptsDrop:i}=tn(["playables"]),[r]=Xe(an),[c,u]=Xe(on),[f,h]=Xe(ha),[g,x]=Xe(ma),[k]=Xe(nn,[{}]),[E]=Xe(ga),C=D(),I=D(),w=D([]),S=D([]),v=L(()=>_t.continuous_playback&&typeof E.type<"u"&&["Playlist","Album","Artist","Genre","Favorites"].includes(E.type)),P=L(()=>aa(S.value.map(({playable:N})=>N))),se=L(()=>{const N=us(f.value);return N[0]==="album_name"||N[0]==="podcast_title"});Ve(S,()=>u(S.value.filter(({selected:N})=>N).map(({playable:N})=>N)),{deep:!0});let O=0;const W=N=>{const H=N.target;H.scrollTop>512&&O<512?t("scroll-breakpoint","down"):H.scrollTop<512&&O>512&&t("scroll-breakpoint","up"),O=H.scrollTop},ae=()=>{const N=c.value.map(H=>H.id);return r.value.map(H=>({playable:H,selected:N.includes(H.id)}))},U=N=>{k.sortable&&(h(N),x(g.value==="asc"?"desc":"asc"),t("sort",N,g.value))},ee=()=>{k.sortable||(w.value=[]),S.value=ae()};Ve(r,()=>ee(),{deep:!0});const Y=()=>{t("press:delete"),ue()},te=N=>{t("press:enter",N),ue()},ke=()=>S.value.forEach(N=>N.selected=!0),ue=()=>S.value.forEach(N=>N.selected=!1),Ge=N=>(N.ctrlKey||N.metaKey)&&ke(),Le=()=>S.value.map(N=>N.playable),pt=(N,H)=>{if(bt.any){Se(N);return}(H.ctrlKey||H.metaKey)&&Se(N),H.button===0&&(H.ctrlKey||H.metaKey||H.shiftKey||(ue(),Se(N)),H.shiftKey&&I.value&&Ue(I.value,N))},Se=N=>{N.selected=!N.selected,I.value=N},Ue=(N,H)=>{const de=Math.max(0,me.findIndex(S.value,Ae=>Ae.playable.id===N.playable.id)),oe=Math.max(0,me.findIndex(S.value,Ae=>Ae.playable.id===H.playable.id)),ie=[de,oe];ie.sort((Ae,Rt)=>Ae-Rt);for(let Ae=ie[0];Ae<=ie[1];++Ae)S.value[Ae].selected=!0},re=async(N,H)=>{var de;N.selected||(ue(),N.selected=!0,await ds()),(de=C.value)==null||de.classList.add("dragging"),n(H,c.value)},$e=me.throttle(N=>{if(k.reorderable){if(i(N)){const H=N.target,de=H.getBoundingClientRect(),oe=de.top+de.height/2;H.classList.remove("dragover-top","dragover-bottom"),H.classList.add("droppable",N.clientY<oe?"dragover-top":"dragover-bottom")}return!1}},50),he=(N,H)=>{var de,oe;return!k.reorderable||!l(H)||!c.value.length?((de=C.value)==null||de.classList.remove("dragging"),ft(H)):((oe=C.value)==null||oe.classList.remove("dragging"),fe(N)||t("reorder",N.playable,H.target.classList.contains("dragover-bottom")?"after":"before"),ft(H))},ft=N=>{var H;return(H=N.target.closest(".song-item"))==null||H.classList.remove("droppable","dragover-top","dragover-bottom"),!1},j=()=>{var N;return(N=C.value)==null?void 0:N.classList.remove("dragging")},fe=N=>{if(!N.selected)return!1;const H=me.findIndex(S.value,({playable:ie})=>ie.id===N.playable.id),de=Math.max(0,me.findIndex(S.value,({selected:ie})=>ie)),oe=Math.max(0,me.findLastIndex(S.value,({selected:ie})=>ie));if(H<de||H>oe)return!1;for(let ie=de;ie<=oe;++ie)if(!S.value[ie].selected)return!1;return!0},ot=async(N,H)=>{N.selected||(ue(),Se(N),await ds()),pe.emit("PLAYABLE_CONTEXT_MENU_REQUESTED",H,c.value)},tt=async N=>{v.value&&Pe.replaceQueueWith(Le()),await we.play(N)};return e({getAllPlayablesWithSort:Le}),ut(()=>ee()),(N,H)=>{const de=X("Icon");return o(),d("div",{ref_key:"wrapper",ref:C,class:"song-list-wrap relative flex flex-col flex-1 overflow-auto py-0 px-3 md:p-0","data-testid":"song-list",tabindex:"0",onKeydown:[$s(B(Y,["prevent","stop"]),["delete"]),$s(B(te,["prevent","stop"]),["enter"]),$s(B(Ge,["prevent"]),["a"])]},[y("div",{class:_e([s(k).sortable?"sortable":"unsortable","song-list-header flex z-[2] bg-k-bg-secondary"])},[y("span",{class:"track-number","data-testid":"header-track-number",role:"button",title:"Sort by track number",onClick:H[0]||(H[0]=oe=>U("track"))},[$(" # "),s(k).sortable?(o(),d(M,{key:0},[s(f)==="track"&&s(g)==="asc"?(o(),b(de,{key:0,icon:s(Vt),class:"text-k-highlight"},null,8,["icon"])):T("",!0),s(f)==="track"&&s(g)==="desc"?(o(),b(de,{key:1,icon:s(Ht),class:"text-k-highlight"},null,8,["icon"])):T("",!0)],64)):T("",!0)]),y("span",{class:"title-artist","data-testid":"header-title",role:"button",title:"Sort by title",onClick:H[1]||(H[1]=oe=>U("title"))},[$(" Title "),s(k).sortable?(o(),d(M,{key:0},[s(f)==="title"&&s(g)==="asc"?(o(),b(de,{key:0,icon:s(Vt),class:"text-k-highlight"},null,8,["icon"])):T("",!0),s(f)==="title"&&s(g)==="desc"?(o(),b(de,{key:1,icon:s(Ht),class:"text-k-highlight"},null,8,["icon"])):T("",!0)],64)):T("",!0)]),y("span",{class:"album","data-testid":"header-album",role:"button",title:`Sort by ${P.value==="episodes"?"podcast":P.value==="songs"?"album":"album/podcast"}`,onClick:H[2]||(H[2]=oe=>U(P.value==="episodes"?"podcast_title":P.value==="songs"?"album_name":["album_name","podcast_title"]))},[P.value==="episodes"?(o(),d(M,{key:0},[$("Podcast")],64)):P.value==="songs"?(o(),d(M,{key:1},[$("Album")],64)):(o(),d(M,{key:2},[$("Album "),kr,$(" Podcast")],64)),s(k).sortable?(o(),d("span",xr,[se.value&&s(g)==="asc"?(o(),b(de,{key:0,icon:s(Vt),class:"text-k-highlight"},null,8,["icon"])):T("",!0),se.value&&s(g)==="desc"?(o(),b(de,{key:1,icon:s(Ht),class:"text-k-highlight"},null,8,["icon"])):T("",!0)])):T("",!0)],8,br),s(k).collaborative?(o(),d(M,{key:0},[wr,Sr],64)):T("",!0),y("span",{class:"time","data-testid":"header-length",role:"button",title:"Sort by duration",onClick:H[3]||(H[3]=oe=>U("length"))},[$(" Time "),s(k).sortable?(o(),d(M,{key:0},[s(f)==="length"&&s(g)==="asc"?(o(),b(de,{key:0,icon:s(Vt),class:"text-k-highlight"},null,8,["icon"])):T("",!0),s(f)==="length"&&s(g)==="desc"?(o(),b(de,{key:1,icon:s(Ht),class:"text-k-highlight"},null,8,["icon"])):T("",!0)],64)):T("",!0)]),y("span",Ar,[s(k).sortable?(o(),b(mr,{key:0,field:s(f),"has-custom-order-sort":s(k).hasCustomOrderSort,order:s(g),"content-type":P.value,onSort:U},null,8,["field","has-custom-order-sort","order","content-type"])):T("",!0)])],2),_(vr,{"item-height":64,items:S.value,onScroll:W,onScrolledToEnd:H[4]||(H[4]=oe=>N.$emit("scrolled-to-end"))},{default:m(({item:oe})=>[(o(),b(pr,{key:oe.playable.id,item:oe,draggable:"true",onClick:ie=>pt(oe,ie),onDragleave:ft,onDragstart:ie=>re(oe,ie),onPlay:ie=>tt(oe.playable),onDragover:B(s($e),["prevent"]),onDrop:B(ie=>he(oe,ie),["prevent"]),onDragend:B(j,["prevent"]),onContextmenu:B(ie=>ot(oe,ie),["prevent"])},null,8,["item","onClick","onDragstart","onPlay","onDragover","onDrop","onDragend","onContextmenu"]))]),_:1},8,["items"])],40,yr)}}}),Er=R({__name:"ThumbnailStack",props:{thumbnails:{}},setup(a){const e=a;oa(r=>({"6b3ab215":t}));const t=`url(${nt})`,{thumbnails:n}=le(e),l=L(()=>n.value.length==0?[nt]:(n.value.length<4?[n.value[0]]:me.take(n.value,4)).map(r=>r||nt)),i=L(()=>l.value.length<4?"single":"tiles");return(r,c)=>(o(),d("article",{class:_e([i.value,"thumbnail-stack aspect-square overflow-hidden grid bg-cover bg-no-repeat"]),style:kt({backgroundImage:`url(${s(nt)})`})},[(o(!0),d(M,null,Q(l.value,u=>(o(),d("span",{key:u,style:kt({backgroundImage:`url(${u}`}),class:"block will-change-transform w-full h-full bg-cover bg-no-repeat","data-testid":"thumbnail"},null,4))),128))],6))}}),Cr=Z(Er,[["__scopeId","data-v-01263919"]]),Qt=(a,e={},t={filterable:!0,sortable:!0,reorderable:!1,collaborative:!1,hasCustomOrderSort:!1})=>{const n=D("");t=ps(t),e=ps(e);const{isCurrentScreen:l,go:i}=be(),r=t.filterable?La(a,["title","artist_name","album_name","podcast_title","podcast_author","episode_description"]):null,c=D(),u=bt.phone,f=D([]),h=D(!1),g=D("expanded"),x=U=>{g.value=U==="down"?"collapsed":"expanded"},k=L(()=>Je.getFormattedLength(a.value)),E=L(()=>{const U=a.value.filter(Y=>qt(Y,"album_cover","episode_image")),ee=me.sampleSize(U,20).map(Y=>qt(Y,"album_cover","episode_image"));return me.take(Array.from(new Set(ee)),4)}),C=()=>c.value.getAllPlayablesWithSort(),I=U=>{we.queueAndPlay(C(),U),i("queue")},w=U=>we.queueAndPlay(f.value,U),S=me.throttle(U=>n.value=U,200),v=L(()=>r?O.value?me.orderBy(r.search(n.value),P.value,W.value):r.search(n.value):a.value),P=L(()=>{if(!O.value)return null;let U=us(O.value);return O.value==="track"?U=["disc","track","title"]:O.value.includes("album_name")&&!O.value.includes("disc")?U.push("artist_name","disc","track","title"):O.value.includes("artist_name")&&!O.value.includes("disc")&&U.push("album_name","disc","track","title"),U}),se=async U=>{if(f.value.length===1){await we.play(f.value[0]);return}U.shiftKey?Pe.queueToTop(f.value):Pe.queue(f.value),(U.ctrlKey||U.metaKey)&&await we.play(f.value[0]),i("queue")},O=D(t.sortable?l("Artist","Album")?"track":l("Search.Songs","Queue","RecentlyPlayed")?null:"title":null),W=D("asc"),ae=(U=O.value,ee=W.value)=>{O.value=U,W.value=ee};return pe.on("SONGS_DELETED",U=>a.value=me.differenceBy(a.value,U,"id")),$t(an,v,!1),$t(on,f,!1),$t(nn,t),$t(ga,e),$t(ha,O),$t(ma,W),no(jo,n),{SongList:Tr,ControlsToggle:ql,ThumbnailStack:Cr,songs:a,config:t,context:e,headerLayout:g,sortField:O,sortOrder:W,duration:k,thumbnails:E,songList:c,selectedPlayables:f,showingControls:h,isPhone:u,onPressEnter:se,playAll:I,playSelected:w,applyFilter:S,onScrollBreakpoint:x,sort:ae}},$r={class:"add-to w-full max-w-[256px] min-w-[200px] p-3 space-y-3","data-testid":"add-to-menu",tabindex:"0"},Ir={class:"existing-playlists"},Pr={class:"mb-2 text-[0.9rem]"},Lr={class:"relative max-h-48 overflow-y-scroll space-y-1.5"},Dr=["onClick"],Rr=R({__name:"AddToMenu",props:{playables:{},config:{}},emits:["closing"],setup(a,{emit:e}){const t=a,{playables:n,config:l}=le(t),i=ne(Pe.state,"playables"),r=Pe.current,c=ne(wt.state,"playlists"),u=L(()=>c.value.filter(({is_smart:I})=>!I)),f=()=>e("closing"),{queueAfterCurrent:h,queueToBottom:g,queueToTop:x,addToFavorites:k,addToExistingPlaylist:E,addToNewPlaylist:C}=Ko(n,f);return Ve(n,()=>n.value.length||f()),(I,w)=>{const S=Ce("koel-overflow-fade");return o(),d("div",$r,[y("section",Ir,[y("p",Pr,"Add "+z(s(ht)(s(n),"item"))+" to",1),G((o(),d("ul",Lr,[s(l).queue?(o(),d(M,{key:0},[i.value.length?(o(),d(M,{key:0},[s(r)?(o(),d("li",{key:0,class:"queue-after-current","data-testid":"queue-after-current",tabindex:"0",onClick:w[0]||(w[0]=(...v)=>s(h)&&s(h)(...v))}," After Current ")):T("",!0),y("li",{class:"bottom-queue","data-testid":"queue-bottom",tabindex:"0",onClick:w[1]||(w[1]=(...v)=>s(g)&&s(g)(...v))}," Bottom of Queue "),y("li",{class:"top-queue","data-testid":"queue-top",tabindex:"0",onClick:w[2]||(w[2]=(...v)=>s(x)&&s(x)(...v))},"Top of Queue")],64)):(o(),d("li",{key:1,"data-testid":"queue",tabindex:"0",onClick:w[3]||(w[3]=(...v)=>s(g)&&s(g)(...v))},"Queue"))],64)):T("",!0),s(l).favorites?(o(),d("li",{key:1,class:"favorites","data-testid":"add-to-favorites",tabindex:"0",onClick:w[4]||(w[4]=(...v)=>s(k)&&s(k)(...v))}," Favorites ")):T("",!0),(o(!0),d(M,null,Q(u.value,v=>(o(),d("li",{key:v.id,class:"playlist","data-testid":"add-to-playlist",tabindex:"0",onClick:P=>s(E)(v)},z(v.name),9,Dr))),128))])),[[S]])]),_(Fe,{class:"!w-full !border !border-solid !border-white/20",transparent:"",onClick:B(s(C),["prevent"])},{default:m(()=>[$(" New Playlist… ")]),_:1},8,["onClick"])])}}}),Mr=Z(Rr,[["__scopeId","data-v-b6bfc7af"]]),Or={},Nr={class:"btn-group inline-flex relative flex-nowrap"};function Fr(a,e){return o(),d("span",Nr,[ce(a.$slots,"default",{},void 0,!0)])}const Gt=Z(Or,[["render",Fr],["__scopeId","data-v-10e389f5"]]),Ur={class:"relative","data-testid":"song-list-controls"},Br={class:"flex gap-2 flex-wrap"},Vr=R({__name:"SongListControls",props:{config:{}},emits:["playAll","playSelected","filter","clearQueue","deletePlaylist","refresh"],setup(a,{emit:e}){const t=a,n=ve(()=>ye(()=>import("./SongListFilter-C6oVqW1o.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),l=ne(t,"config"),[i]=Xe(an),[r]=Xe(on),c=D(),u=D(),f=D(!1),h=D(!1),g=L(()=>!!r.value.length),x=()=>e("playAll",!0),k=()=>e("playSelected",!0),E=()=>e("playAll",!1),C=()=>e("playSelected",!1),I=()=>e("clearQueue"),w=()=>e("deletePlaylist"),S=()=>e("refresh"),v=U=>e("filter",U),P=U=>U.key==="Alt"&&(h.value=!0),se=U=>U.key==="Alt"&&(h.value=!1);let O;Ve(g,async U=>{await ds(),U?(O=ln(c.value.button,u,{autoTrigger:!1}),O.setup()):O==null||O.teardown()},{immediate:!0});const W=()=>{O==null||O.hide(),f.value=!1},ae=()=>{f.value?O==null||O.hide():O==null||O.show(),f.value=!f.value};return ut(()=>{window.addEventListener("keydown",P),window.addEventListener("keyup",se)}),hs(()=>{window.removeEventListener("keydown",P),window.removeEventListener("keyup",se),O==null||O.teardown()}),(U,ee)=>{const Y=X("Icon"),te=Ce("koel-tooltip");return o(),d("div",Ur,[y("div",Br,[_(Gt,{uppercase:""},{default:m(()=>[h.value?(o(),d(M,{key:0},[s(r).length<2&&s(i).length?G((o(),b(Fe,{key:0,class:"btn-play-all",highlight:"",title:"Play all. Press Alt/⌥ to change mode.",onClick:B(E,["prevent"])},{default:m(()=>[_(Y,{icon:s(fs),"fixed-width":""},null,8,["icon"]),$(" All ")]),_:1},8,["onClick"])),[[te,void 0,void 0,{bottom:!0}]]):T("",!0),s(r).length>1?G((o(),b(Fe,{key:1,class:"btn-play-selected",highlight:"",title:"Play selected. Press Alt/⌥ to change mode.",onClick:B(C,["prevent"])},{default:m(()=>[_(Y,{icon:s(fs),"fixed-width":""},null,8,["icon"]),$(" Selected ")]),_:1},8,["onClick"])),[[te,void 0,void 0,{bottom:!0}]]):T("",!0)],64)):(o(),d(M,{key:1},[s(r).length<2&&s(i).length?G((o(),b(Fe,{key:0,class:"btn-shuffle-all","data-testid":"btn-shuffle-all",highlight:"",title:"Shuffle all. Press Alt/⌥ to change mode.",onClick:B(x,["prevent"])},{default:m(()=>[_(Y,{icon:s(Hn),"fixed-width":""},null,8,["icon"]),$(" All ")]),_:1},8,["onClick"])),[[te,void 0,void 0,{bottom:!0}]]):T("",!0),s(r).length>1?G((o(),b(Fe,{key:1,class:"btn-shuffle-selected","data-testid":"btn-shuffle-selected",highlight:"",title:"Shuffle selected. Press Alt/⌥ to change mode.",onClick:B(k,["prevent"])},{default:m(()=>[_(Y,{icon:s(Hn),"fixed-width":""},null,8,["icon"]),$(" Selected ")]),_:1},8,["onClick"])),[[te,void 0,void 0,{bottom:!0}]]):T("",!0)],64)),g.value?(o(),b(Fe,{key:2,ref_key:"addToButton",ref:c,success:"",onClick:B(ae,["prevent","stop"])},{default:m(()=>[$(z(f.value?"Cancel":"Add To…"),1)]),_:1},8,["onClick"])):T("",!0),l.value.clearQueue?(o(),b(Fe,{key:3,danger:"",title:"Clear current queue",onClick:B(I,["prevent"])},{default:m(()=>[$("Clear")]),_:1},8,["onClick"])):T("",!0)]),_:1}),l.value.refresh||l.value.deletePlaylist?(o(),b(Gt,{key:0},{default:m(()=>[l.value.refresh?G((o(),b(Fe,{key:0,success:"",title:"Refresh",onClick:B(S,["prevent"])},{default:m(()=>[_(Y,{icon:s(ra),"fixed-width":""},null,8,["icon"])]),_:1},8,["onClick"])),[[te]]):T("",!0),l.value.deletePlaylist?G((o(),b(Fe,{key:1,class:"del btn-delete-playlist",danger:"",title:"Delete this playlist",onClick:B(w,["prevent"])},{default:m(()=>[_(Y,{icon:s(ia)},null,8,["icon"])]),_:1},8,["onClick"])),[[te]]):T("",!0)]),_:1})):T("",!0),l.value.filter&&s(i).length?(o(),b(Gt,{key:1},{default:m(()=>[_(s(n),{onChange:v})]),_:1})):T("",!0)]),_(s(gs),{onTrigger:W},{default:m(()=>[y("div",{ref_key:"addToMenu",ref:u,class:"context-menu p-0 hidden"},[_(Mr,{config:l.value.addTo,playables:s(r),onClosing:W},null,8,["config","playables"])],512)]),_:1})])}}}),Xt=(a,e={})=>{const t={addTo:{queue:a!=="Queue",favorites:a!=="Favorites"},clearQueue:a==="Queue",deletePlaylist:a==="Playlist",refresh:a==="Playlist",filter:["Queue","Artist","Album","Favorites","RecentlyPlayed","Playlist","Search.Songs"].includes(a)},n=me.merge(t,typeof e=="function"?e():e);return{SongListControls:Vr,config:ps(n)}},Na=()=>({useLastfm:ne(Ee.state,"uses_last_fm"),useYouTube:ne(Ee.state,"uses_you_tube"),useAppleMusic:ne(Ee.state,"uses_i_tunes"),useSpotify:ne(Ee.state,"uses_spotify")}),Hr={fetchAll:async()=>await On.get("genres"),fetchOne:async a=>await On.get(`genres/${a}`)};/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Yo("ListMusicIcon",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]),Gr=R({__name:"SongListFilter",emits:["change"],setup(a,{emit:e}){const t=D(!1),n=D(),l=D("");Ve(l,c=>e("change",c));const i=()=>{var c,u;t.value=!t.value,t.value?ds(()=>{var f,h,g,x;(h=(f=n.value)==null?void 0:f.el)==null||h.focus(),(x=(g=n.value)==null?void 0:g.el)==null||x.select()}):((u=(c=n.value)==null?void 0:c.el)==null||u.blur(),l.value="")},r=()=>{var c,u;l.value.trim()===""&&(t.value=!1,(u=(c=n.value)==null?void 0:c.el)==null||u.blur(),l.value="")};return(c,u)=>{const f=X("Icon"),h=Ce("koel-tooltip");return o(),b(s(gs),{onTrigger:r},{default:m(()=>[y("form",{class:"flex border rounded-md overflow-hidden border-solid border-white/10 focus-within:bg-black/10 focus-within:border-white/40",onSubmit:u[1]||(u[1]=B(()=>{},["prevent"]))},[G((o(),b(Fe,{title:"Filter",transparent:"",unrounded:"",onClick:B(i,["prevent"])},{default:m(()=>[_(f,{icon:s(ho),"fixed-width":""},null,8,["icon"])]),_:1},8,["onClick"])),[[h]]),G(_(ba,{ref_key:"input",ref:n,modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=g=>l.value=g),class:"!text-k-text-primary !bg-transparent !rounded-none !pl-0 !h-[unset] placeholder:text-white/50 focus-visible:outline-0",placeholder:"Keywords",type:"search",onBlur:r},null,8,["modelValue"]),[[ge,t.value]])],32)]),_:1})}}}),Yr=R({__name:"BtnUpgradeToPlus",setup(a){const e=()=>pe.emit("MODAL_SHOW_KOEL_PLUS");return(t,n)=>{const l=X("Icon");return o(),b(Fe,{class:"block w-full rounded-md px-4 py-3 text-white/80 hover:text-white bg-gradient-to-r to-[#c62be8] from-[#671ce4] !text-left",onClick:B(e,["prevent"])},{default:m(()=>[_(l,{icon:s(mo),"fixed-width":""},null,8,["icon"]),$(" Upgrade to Plus ")]),_:1},8,["onClick"])}}}),qr={},Wr={class:"relative flex items-center justify-center h-[42px] aspect-square rounded-full bg-none md:bg-black/30 text-xl opacity-70 transition-opacity duration-200 ease-in-out text-current cursor-pointer hover:active-state active:scale-90",type:"button"};function jr(a,e){return o(),d("button",Wr,[ce(a.$slots,"default",{},void 0,!0)])}const vs=Z(qr,[["render",jr],["__scopeId","data-v-2460bbb8"]]),Kr=R({__name:"HomeButton",setup(a){const e=()=>pe.emit("TOGGLE_SIDEBAR");return(t,n)=>{const l=X("Icon");return o(),d("a",{class:"bg-black/20 flex items-center px-3.5 rounded-md !text-k-text-secondary hover:!text-k-text-primary",href:"#/home",onClick:e},[_(l,{icon:s(go),"fixed-width":""},null,8,["icon"])])}}}),Qr=["onSubmit"],Xr={class:"hidden md:flex opacity-70 items-center"},Zr={class:"block md:hidden py-0 px-4 bg-white/5 rounded-none",title:"Search",type:"submit"},Jr=R({__name:"SearchForm",setup(a){const e=bt.any?"Search":"Press F to search",{go:t}=be(),n=D(),l=D("");let i=()=>{const u=l.value.trim();u&&pe.emit("SEARCH_KEYWORDS_CHANGED",u)};i=me.debounce(i,500);const r=()=>{pe.emit("TOGGLE_SIDEBAR"),t("search")},c=()=>bt.any||t("search");return pe.on("FOCUS_SEARCH_FIELD",()=>{var u,f,h,g;(f=(u=n.value)==null?void 0:u.el)==null||f.focus(),(g=(h=n.value)==null?void 0:h.el)==null||g.select()}),(u,f)=>{const h=X("Icon");return o(),d("form",{id:"searchForm",class:"text-k-text-secondary flex items-stretch border overflow-hidden gap-2 pl-4 pr-0 py-0 rounded-md border-solid border-transparent bg-black/20 focus-within:border-white/20 focus-within:bg-black/50 transition-[border,_background-color] duration-200 ease-in-out",role:"search",onSubmit:B(r,["prevent"])},[y("span",Xr,[_(h,{icon:s(Vs)},null,8,["icon"])]),_(ba,{ref_key:"input",ref:n,modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=g=>l.value=g),class:_e([{dirty:l.value},"w-full rounded-none h-[36px] !bg-transparent !text-k-text-primary !placeholder:text-white/50 focus-visible:outline-0 !px-2"]),placeholder:s(e),autocorrect:"false",name:"q",required:"",spellcheck:"false",type:"search",onFocus:c,onInput:s(i)},null,8,["modelValue","class","placeholder","onInput"]),y("button",Zr,[_(h,{icon:s(Vs)},null,8,["icon"])])],40,Qr)}}}),ei={},ti={class:"space-y-4"};function si(a,e){return o(),d("section",ti,[ce(a.$slots,"header"),ce(a.$slots,"default")])}const un=Z(ei,[["render",si]]),ni={},ai={class:"uppercase px-6 tracking-widest mb-3"};function oi(a,e){return o(),d("h3",ai,[ce(a.$slots,"default")])}const dn=Z(ni,[["render",oi]]),li=["href"],ri={class:"opacity-70"},ii={class:"overflow-hidden text-ellipsis whitespace-nowrap"},ci=R({__name:"SidebarItem",props:{href:{default:void 0},screen:{default:void 0}},setup(a){const e=a,t=D(!1),{onRouteChanged:n}=be(),l=()=>pe.emit("TOGGLE_SIDEBAR");return screen&&n(i=>t.value=i.screen===e.screen),(i,r)=>(o(),d("li",{class:_e([t.value&&"current","relative before:right-0 px-6 before:top-1/4 before:w-[4px] before:h-1/2 before:absolute before:rounded-full before:transition-[box-shadow,_background-color] before:ease-in-out before:duration-500"]),"data-testid":"sidebar-item",onClick:l},[y("a",{href:e.href,class:"flex items-center overflow-x-hidden gap-3 h-11 relative active:pt-0.5 active:pr-0 active:pb-0 active:pl-0.5 !text-k-text-secondary hover:!text-k-text-primary"},[y("span",ri,[ce(i.$slots,"icon",{},void 0,!0)]),y("span",ii,[ce(i.$slots,"default",{},void 0,!0)])],8,li)],2))}}),Ze=Z(ci,[["__scopeId","data-v-1e459fc4"]]),ui={class:"menu"},di=R({__name:"SidebarManageSection",setup(a){const{isAdmin:e}=et(),{allowsUpload:t}=sn();return(n,l)=>{const i=X("Icon");return o(),b(un,null,{header:m(()=>[_(dn,null,{default:m(()=>[$("Manage")]),_:1})]),default:m(()=>[y("ul",ui,[s(e)?(o(),b(Ze,{key:0,href:"#/settings",screen:"Settings"},{icon:m(()=>[_(i,{icon:s(vo),"fixed-width":""},null,8,["icon"])]),default:m(()=>[$(" Settings ")]),_:1})):T("",!0),s(t)?(o(),b(Ze,{key:1,href:"#/upload",screen:"Upload"},{icon:m(()=>[_(i,{icon:s(en),"fixed-width":""},null,8,["icon"])]),default:m(()=>[$(" Upload ")]),_:1})):T("",!0),s(e)?(o(),b(Ze,{key:2,href:"#/users",screen:"Users"},{icon:m(()=>[_(i,{icon:s(ca),"fixed-width":""},null,8,["icon"])]),default:m(()=>[$(" Users ")]),_:1})):T("",!0)])]),_:1})}}}),pi=R({__name:"PlaylistSidebarItem",props:{list:{}},setup(a){const e=a,{onRouteChanged:t}=be(),{startDragging:n}=Pt("playlist"),{acceptsDrop:l,resolveDroppedItems:i}=tn(["playables","album","artist"]),r=D(!1),{addToPlaylist:c}=ka(),{list:u}=le(e),f=P=>"id"in P,h=P=>P.name==="Favorites",g=P=>P.name==="Recently Played",x=D(!1),k=L(()=>{if(f(u.value))return`#/playlist/${u.value.id}`;if(h(u.value))return"#/favorites";if(g(u.value))return"#/recently-played";throw new Error("Invalid playlist-like type.")}),E=L(()=>g(u.value)?!1:h(u.value)?!0:!u.value.is_smart),C=P=>{f(u.value)&&(P.preventDefault(),pe.emit("PLAYLIST_CONTEXT_MENU_REQUESTED",P,u.value))},I=P=>f(u.value)&&n(P,u.value),w=P=>(!E.value||!l(P)||(P.preventDefault(),r.value=!0),!1),S=()=>r.value=!1,v=async P=>{if(r.value=!1,!E.value||!l(P))return!1;const se=await i(P);return se!=null&&se.length&&(h(u.value)?await zt.like(se):f(u.value)&&await c(u.value,se)),!1};return t(P=>{switch(P.screen){case"Favorites":x.value=h(u.value);break;case"RecentlyPlayed":x.value=g(u.value);break;case"Playlist":x.value=u.value.id===P.params.id;break;default:x.value=!1;break}}),(P,se)=>{const O=X("Icon");return o(),b(Ze,{class:_e([{current:x.value,droppable:r.value},"playlist select-none"]),href:k.value,draggable:"true",onContextmenu:C,onDragleave:S,onDragover:w,onDragstart:I,onDrop:v},{icon:m(()=>[g(s(u))?(o(),b(O,{key:0,icon:s(yo),class:"text-k-success","fixed-width":""},null,8,["icon"])):h(s(u))?(o(),b(O,{key:1,icon:s(bo),class:"text-k-love","fixed-width":""},null,8,["icon"])):s(u).is_smart?(o(),b(O,{key:2,icon:s(ko),"fixed-width":""},null,8,["icon"])):s(u).is_collaborative?(o(),b(O,{key:3,icon:s(ca),"fixed-width":""},null,8,["icon"])):(o(),b(s(zr),{key:4,size:16}))]),default:m(()=>[$(" "+z(s(u).name),1)]),_:1},8,["class","href"])}}}),is=Z(pi,[["__scopeId","data-v-c070f3f2"]]),fi={key:0},_i=["onDragleave","onDrop"],hi=R({__name:"PlaylistFolderSidebarItem",props:{folder:{}},setup(a){const e=a,{folder:t}=le(e),n=D(!1),l=D(!1),i=D(!1),r=L(()=>wt.byFolder(t.value)),{acceptsDrop:c,resolveDroppedValue:u}=tn(["playlist"]),{startDragging:f}=Pt("playlist-folder"),h=()=>n.value=!n.value,g=v=>f(v,t.value),x=v=>{if(!c(v))return!1;v.preventDefault(),l.value=!0,n.value=!0},k=()=>l.value=!1,E=async v=>{if(l.value=!1,!c(v))return!1;v.preventDefault();const P=await u(v);!P||P.folder_id===t.value.id||await Fs.addPlaylistToFolder(t.value,P)},C=()=>i.value=!1,I=v=>{if(!c(v))return!1;v.preventDefault(),i.value=!0},w=async v=>{i.value=!1,l.value=!1;const P=await u(v);P.folder_id===t.value.id&&(v.stopPropagation(),await Fs.removePlaylistFromFolder(t.value,P))},S=v=>pe.emit("PLAYLIST_FOLDER_CONTEXT_MENU_REQUESTED",v,t.value);return(v,P)=>{const se=X("Icon");return o(),d("li",{class:_e([{droppable:l.value},"playlist-folder relative"]),draggable:"true",tabindex:"0",onDragleave:k,onDragover:x,onDragstart:g,onDrop:E},[y("ul",null,[_(Ze,{onClick:h,onContextmenu:B(S,["prevent"])},{icon:m(()=>[_(se,{icon:n.value?s(xo):s(wo),"fixed-width":""},null,8,["icon"])]),default:m(()=>[$(" "+z(s(t).name),1)]),_:1},8,["onContextmenu"]),r.value.length?G((o(),d("li",fi,[y("ul",null,[(o(!0),d(M,null,Q(r.value,O=>(o(),b(is,{key:O.id,list:O,class:"pl-10"},null,8,["list"]))),128))])],512)),[[ge,n.value]]):T("",!0),n.value?(o(),d("li",{key:1,class:_e([i.value&&"droppable","hatch absolute bottom-0 w-full h-1"]),onDragover:I,onDragleave:B(C,["prevent"]),onDrop:B(w,["prevent"])},null,42,_i)):T("",!0)])],34)}}}),mi=Z(hi,[["__scopeId","data-v-1926cce8"]]),gi=["onClick"],vi=R({__name:"CreatePlaylistContextMenuButton",setup(a){const e=t=>{const{bottom:n,right:l}=t.currentTarget.getBoundingClientRect();pe.emit("CREATE_NEW_PLAYLIST_CONTEXT_MENU_REQUESTED",{top:n,left:l})};return(t,n)=>{const l=X("Icon");return o(),d("button",{class:"relative before:absolute before:w-[28px] before:aspect-square before:top-[-6px] before:left-[-6px] before:cursor-pointer",title:"Create a new playlist or folder",type:"button",onClick:B(e,["stop","prevent"])},[_(l,{icon:s(So)},null,8,["icon"])],8,gi)}}}),yi=y("span",{class:"flex-1"},"Playlists",-1),bi=R({__name:"SidebarPlaylistsSection",setup(a){const e=ne(Fs.state,"folders"),t=ne(wt.state,"playlists"),n=ne(zt.state,"playables"),l=L(()=>t.value.filter(({folder_id:i})=>i===null?!0:!e.value.find(r=>r.id===i)));return(i,r)=>(o(),b(un,null,{default:m(()=>[_(dn,{class:"flex items-center"},{default:m(()=>[yi,_(vi)]),_:1}),y("ul",null,[_(is,{list:{name:"Favorites",playables:n.value}},null,8,["list"]),_(is,{list:{name:"Recently Played",playables:[]}}),(o(!0),d(M,null,Q(e.value,c=>(o(),b(mi,{key:c.id,folder:c},null,8,["folder"]))),128)),(o(!0),d(M,null,Q(l.value,c=>(o(),b(is,{key:c.id,list:c},null,8,["list"]))),128))])]),_:1}))}}),ki={class:"btn-toggle hidden md:flex w-[24px] aspect-square absolute rounded-full -right-[12px] top-[27px] items-center justify-center z-10 text-k-text-secondary bg-k-bg-secondary border-[1.5px] border-white/20 cursor-pointer hover:text-k-text-primary hover:bg-k-highlight"},xi=R({__name:"SidebarToggleButton",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,n=L({get:()=>t.modelValue,set:l=>e("update:modelValue",l)});return(l,i)=>{const r=X("Icon");return o(),d("label",ki,[G(y("input",{"onUpdate:modelValue":i[0]||(i[0]=c=>n.value=c),class:"hidden",type:"checkbox"},null,512),[[Qs,n.value]]),_(r,{class:_e([n.value||"scale-x-[-1]","transition"]),icon:s(Ao)},null,8,["class","icon"])])}}});var If={prefix:"fab",iconName:"lastfm",icon:[512,512,[],"f202","M225.8 367.1l-18.8-51s-30.5 34-76.2 34c-40.5 0-69.2-35.2-69.2-91.5 0-72.1 36.4-97.9 72.1-97.9 66.5 0 74.8 53.3 100.9 134.9 18.8 56.9 54 102.6 155.4 102.6 72.7 0 122-22.3 122-80.9 0-72.9-62.7-80.6-115-92.1-25.8-5.9-33.4-16.4-33.4-34 0-19.9 15.8-31.7 41.6-31.7 28.2 0 43.4 10.6 45.7 35.8l58.6-7c-4.7-52.8-41.1-74.5-100.9-74.5-52.8 0-104.4 19.9-104.4 83.9 0 39.9 19.4 65.1 68 76.8 44.9 10.6 79.8 13.8 79.8 45.7 0 21.7-21.1 30.5-61 30.5-59.2 0-83.9-31.1-97.9-73.9-32-96.8-43.6-163-161.3-163C45.7 113.8 0 168.3 0 261c0 89.1 45.7 137.2 127.9 137.2 66.2 0 97.9-31.1 97.9-31.1z"]},wi={prefix:"fab",iconName:"microsoft",icon:[448,512,[],"f3ca","M0 32h214.6v214.6H0V32zm233.4 0H448v214.6H233.4V32zM0 265.4h214.6V480H0V265.4zm233.4 0H448V480H233.4V265.4z"]},Pf={prefix:"fab",iconName:"spotify",icon:[496,512,[],"f1bc","M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"]},Si={prefix:"fab",iconName:"youtube",icon:[576,512,[61802],"f167","M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"]};const Ai=R({__name:"YouTubeSidebarItem",setup(a){return(e,t)=>{const n=X("Icon");return o(),b(Ze,{href:"#/youtube",screen:"YouTube"},{icon:m(()=>[_(n,{icon:s(Si),"fixed-width":""},null,8,["icon"])]),default:m(()=>[ce(e.$slots,"default")]),_:3})}}}),Ti={class:"menu"},Ei=R({__name:"SidebarYourLibrarySection",setup(a){const e=D(null);return pe.on("PLAY_YOUTUBE_VIDEO",t=>e.value=me.unescape(t.title)),(t,n)=>{const l=X("Icon");return o(),b(un,null,{header:m(()=>[_(dn,null,{default:m(()=>[$("Your Library")]),_:1})]),default:m(()=>[y("ul",Ti,[_(Ze,{href:"#/songs",screen:"Songs"},{icon:m(()=>[_(l,{icon:s(To),"fixed-width":""},null,8,["icon"])]),default:m(()=>[$(" All Songs ")]),_:1}),_(Ze,{href:"#/albums",screen:"Albums"},{icon:m(()=>[_(l,{icon:s(ua),"fixed-width":""},null,8,["icon"])]),default:m(()=>[$(" Albums ")]),_:1}),_(Ze,{href:"#/artists",screen:"Artists"},{icon:m(()=>[_(l,{icon:s(Eo),"fixed-width":""},null,8,["icon"])]),default:m(()=>[$(" Artists ")]),_:1}),_(Ze,{href:"#/genres",screen:"Genres"},{icon:m(()=>[_(l,{icon:s(da),"fixed-width":""},null,8,["icon"])]),default:m(()=>[$(" Genres ")]),_:1}),e.value?(o(),b(Ai,{key:0,"data-testid":"youtube"},{default:m(()=>[$(z(e.value),1)]),_:1})):T("",!0),_(Ze,{href:"#/podcasts",screen:"Podcasts"},{icon:m(()=>[_(l,{icon:s(Js),"fixed-width":""},null,8,["icon"])]),default:m(()=>[$(" Podcasts ")]),_:1})])]),_:1})}}}),Ci={class:"btn-collapse-block flex md:hidden items-center border-b border-b-white/5 h-k-header-height px-6"},$i={class:"bg-white/5 rounded-full"},Ii={class:"home-search-block p-6 flex gap-2"},Pi={class:"pt-2 pb-10 overflow-y-auto space-y-8"},Li={key:0,class:"p-6 flex-1 flex flex-col-reverse"},Di=R({__name:"Sidebar",setup(a){const{onRouteChanged:e}=be(),{isAdmin:t}=et(),{allowsUpload:n}=sn(),{isPlus:l}=Kt(),{get:i,set:r}=la(),c=D(!1),u=D(!i("sidebar-collapsed",!1));Ve(u,C=>r("sidebar-collapsed",!C));const f=L(()=>t.value||n.value);let h;const g=D(!1),x=()=>{u.value||(h=window.setTimeout(()=>{u.value||(g.value=!0)},500))},k=C=>{C.relatedTarget&&(h&&(clearTimeout(h),h=void 0),g.value=!1)};e(C=>c.value=!1);const E=()=>c.value=!1;return pe.on("TOGGLE_SIDEBAR",()=>c.value=!c.value),(C,I)=>{const w=X("Icon"),S=Ce("koel-overflow-fade");return o(),d("nav",{class:_e([{collapsed:!u.value,"tmp-showing":g.value,showing:c.value},"group left-0 top-0 flex flex-col fixed h-full w-full md:relative md:w-k-sidebar-width z-[999] md:z-10"]),onMouseenter:x,onMouseleave:k},[y("section",Ci,[y("div",$i,[_(vs,{onClick:B(E,["prevent"])},{default:m(()=>[_(w,{icon:s(Co),"fixed-width":""},null,8,["icon"])]),_:1},8,["onClick"])])]),y("section",Ii,[_(Kr),_(Jr,{class:"flex-1"})]),G((o(),d("section",Pi,[_(Ei),_(bi),f.value?(o(),b(di,{key:0})):T("",!0)])),[[S]]),!s(l)&&s(t)?(o(),d("section",Li,[_(Yr)])):T("",!0),_(xi,{class:_e(["opacity-0 no-hover:hidden group-hover:opacity-100 transition",u.value||"opacity-100"]),modelValue:u.value,"onUpdate:modelValue":I[0]||(I[0]=v=>u.value=v)},null,8,["modelValue","class"])],34)}}}),Ri=Z(Di,[["__scopeId","data-v-beda73dc"]]),Mi=["onContextmenu","onDblclick"],Oi={class:"leading-none"},Ni={class:"flex-1 flex items-start overflow-hidden gap-2"},Fi={class:"flex-1 space-y-1 overflow-hidden"},Ui={class:"flex gap-2 w-full overflow-hidden"},Bi={class:"flex-1 block overflow-hidden text-ellipsis whitespace-nowrap"},Vi={class:"text-k-text-secondary text-[0.9rem] opacity-80 overflow-hidden"},Hi=["href"],zi=["href"],Gi=R({__name:"SongCard",props:{playable:{}},setup(a){const e=a,{playable:t}=le(e),{isPlus:n}=Kt(),{currentUser:l}=et(),{startDragging:i}=Pt("playables"),r=L(()=>{var h;return xt(t.value)?n.value&&t.value.owner_id!==((h=l.value)==null?void 0:h.id):!1}),c=h=>pe.emit("PLAYABLE_CONTEXT_MENU_REQUESTED",h,t.value),u=h=>i(h,[t.value]),f=()=>we.play(t.value);return(h,g)=>(o(),d("article",{class:_e([{playing:s(t).playback_state==="Playing"||s(t).playback_state==="Paused"},"group flex gap-3 py-2 pl-2.5 pr-3 rounded-md items-center bg-k-bg-secondary border border-k-border hover:border-white/15 transition-[border-color] duration-200 ease-in-out focus:ring-1 focus:ring-k-accent focus-within:ring-1 focus-within:ring-k-accent"]),draggable:"true",tabindex:"0",onDragstart:u,onContextmenu:B(c,["prevent"]),onDblclick:B(f,["prevent"])},[y("span",Oi,[_(Ma,{playable:s(t)},null,8,["playable"])]),y("main",Ni,[y("div",Fi,[y("h3",Ui,[r.value?(o(),b(Oa,{key:0})):T("",!0),y("span",Bi,z(s(t).title),1)]),y("p",Vi,[s(xt)(s(t))?(o(),d("a",{key:0,href:`#/artist/${s(t).artist_id}`,class:"!text-k-text-primary hover:!text-k-accent"},z(s(t).artist_name),9,Hi)):T("",!0),s(ao)(s(t))?(o(),d("a",{key:1,href:`#/podcasts/${s(t).podcast_id}`,class:"!text-k-text-primary hover:!text-k-accent"},z(s(t).podcast_title),9,zi)):T("",!0),$(" - "+z(s(ht)(s(t).play_count,"play")),1)])]),_(fa,{playable:s(t),class:"opacity-0 text-k-text-secondary group-hover:opacity-100"},null,8,["playable"])])],42,Mi))}}),ys=Z(Gi,[["__scopeId","data-v-ea07ea70"]]),Yi={},qi={class:"skeleton flex gap-4 p-3 rounded items-center border border-k-border"},Wi=Wt('<aside class="w-[48px] aspect-square rounded pulse"></aside><main class="flex items-start flex-1 gap-4"><div class="flex flex-1 flex-col gap-2"><h3 class="w-2/3 h-[1.2rem] pulse"></h3><p class="w-1/3 h-[1.2rem] pulse"></p></div></main>',2),ji=[Wi];function Ki(a,e){return o(),d("article",qi,ji)}const bs=Z(Yi,[["render",Ki]]),Qi={},Xi={class:"text-2xl mb-8 font-thin"};function Zi(a,e){return o(),d("div",null,[y("h3",Xi,[ce(a.$slots,"header")]),ce(a.$slots,"default")])}const Dt=Z(Qi,[["render",Zi]]),Ji={key:0,class:"space-y-3"},ec={key:0,class:"space-y-3"},tc={key:1,class:"text-k-text-secondary"},sc=R({__name:"MostPlayedSongs",props:{loading:{type:Boolean,default:!1}},setup(a){const e=a,{loading:t}=le(e),n=ne(st.state,"mostPlayedSongs");return(l,i)=>(o(),b(Dt,null,{header:m(()=>[$("Most Played")]),default:m(()=>[s(t)?(o(),d("ol",Ji,[(o(),d(M,null,Q(3,r=>y("li",{key:r},[_(bs)])),64))])):(o(),d(M,{key:1},[n.value.length?(o(),d("ol",ec,[(o(!0),d(M,null,Q(n.value,r=>(o(),d("li",{key:r.id},[_(ys,{playable:r},null,8,["playable"])]))),128))])):(o(),d("p",tc,"You don’t seem to have been playing."))],64))]),_:1}))}}),nc=R({__name:"ViewAllRecentSongsButton",setup(a){const{go:e}=be(),t=()=>e("recently-played");return(n,l)=>(o(),b(Fe,{highlight:"",rounded:"",small:"",onClick:B(t,["prevent"])},{default:m(()=>[$(" View All ")]),_:1},8,["onClick"]))}}),ac={key:0,class:"space-y-3"},oc={key:0,class:"space-y-3"},lc={key:1,class:"text-k-text-secondary"},rc=R({__name:"RecentlyPlayedSongs",props:{loading:{type:Boolean,default:!1}},setup(a){const e=a,{loading:t}=le(e),n=ne(st.state,"recentlyPlayed");return(l,i)=>(o(),b(Dt,null,{header:m(()=>[$(" Recently Played "),n.value.length?(o(),b(nc,{key:0,class:"float-right"})):T("",!0)]),default:m(()=>[s(t)?(o(),d("ol",ac,[(o(),d(M,null,Q(3,r=>y("li",{key:r},[_(bs)])),64))])):(o(),d(M,{key:1},[n.value.length?(o(),d("ol",oc,[(o(!0),d(M,null,Q(n.value,r=>(o(),d("li",{key:r.id},[_(ys,{playable:r},null,8,["playable"])]))),128))])):(o(),d("p",lc,"No songs played as of late."))],64))]),_:1}))}}),ic=a=>(Xs("data-v-bdd2e627"),a=a(),Zs(),a),cc=["onClick","onDragenter","onDragleave","onDrop"],uc=["src"],dc={class:"hidden"},pc=ic(()=>y("span",{class:"absolute top-0 left-0 w-full h-full group-hover:bg-black/40 no-hover:bg-black/40 z-10"},null,-1)),fc={class:"play-icon absolute flex opacity-0 no-hover:opacity-100 items-center justify-center w-[32px] aspect-square rounded-full top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-k-highlight group-hover:opacity-100 duration-500 transition z-20"},_c=R({__name:"AlbumOrArtistThumbnail",props:{entity:{}},setup(a){const e=a,{toastSuccess:t}=va(),{go:n}=be(),{currentUserCan:l}=_a(),{entity:i}=le(e),r=D(!1),c=L(()=>i.value.type==="albums"),u=L(()=>c.value?["disc","track"]:["album_id","disc","track"]),f=L(()=>c.value?i.value.cover||nt:i.value.image||nt),h=L(()=>c.value?`Play all songs in the album ${i.value.name}`:`Play all songs by ${i.value.name}`),g=l.changeAlbumOrArtistThumbnails(),x=async w=>{const S=c.value?await Je.fetchForAlbum(i.value):await Je.fetchForArtist(i.value);if(w.altKey){Pe.queue(me.orderBy(S,u.value)),t("Songs added to queue.");return}we.queueAndPlay(S),n("queue")},k=()=>r.value=g,E=w=>{var S,v;(v=(S=w.currentTarget)==null?void 0:S.contains)!=null&&v.call(S,w.relatedTarget)||(r.value=!1)},C=w=>!w.dataTransfer||!w.dataTransfer.items||w.dataTransfer.items.length!==1||w.dataTransfer.items[0].kind!=="file"?!1:tl.includes(w.dataTransfer.items[0].getAsFile().type),I=async w=>{if(r.value=!1,!g||!C(w))return;const S=c.value?i.value.cover:i.value.image;try{xa().readAsDataUrl(w.dataTransfer.files[0],async v=>{c.value?(i.value.cover=v,await Yt.uploadCover(i.value,v)):(i.value.image=v,await It.uploadImage(i.value,v))})}catch(v){c.value?i.value.cover=S:i.value.image=S,qe().handleHttpError(v)}};return(w,S)=>{const v=X("Icon"),P=Ce("koel-hide-broken-icon");return o(),d("button",{class:_e([{droppable:r.value},"thumbnail relative w-full aspect-square bg-no-repeat bg-cover bg-center overflow-hidden rounded-md active:scale-95"]),style:kt({backgroundImage:`url(${s(nt)})`}),"data-testid":"album-artist-thumbnail",onClick:B(x,["prevent"]),onDragenter:B(k,["prevent"]),onDragleave:B(E,["prevent"]),onDrop:B(I,["prevent"]),onDragover:S[0]||(S[0]=B(()=>{},["prevent"]))},[G(y("img",{alt:"Thumbnail",src:f.value,class:"w-full aspect-square object-cover",loading:"lazy"},null,8,uc),[[P]]),y("span",dc,z(h.value),1),pc,y("span",fc,[_(v,{icon:s(fs),class:"ml-0.5 text-white",size:"lg"},null,8,["icon"])])],46,cc)}}}),hc=Z(_c,[["__scopeId","data-v-bdd2e627"]]),mc=["onContextmenu"],gc={class:"flex flex-1 flex-col gap-1.5 overflow-hidden"},vc={class:"name flex flex-col gap-2 whitespace-nowrap"},yc={class:"meta text-[0.9rem] flex gap-1.5 opacity-70 hover:opacity-100"},bc=R({__name:"AlbumOrArtistCard",props:{layout:{default:"full"},entity:{}},emits:["dblclick","dragstart","contextmenu"],setup(a,{emit:e}){const t=a,n=L(()=>t.entity.type==="podcasts"),{layout:l}=le(t),i=()=>e("dblclick"),r=u=>e("dragstart",u),c=u=>e("contextmenu",u);return(u,f)=>(o(),d("article",{class:_e([s(l),"relative group flex max-w-full md:max-w-[256px] border p-5 rounded-lg flex-col gap-5 transition border-color duration-200"]),"data-testid":"artist-album-card",draggable:"true",tabindex:"0",onDblclick:i,onDragstart:r,onContextmenu:B(c,["prevent"])},[ce(u.$slots,"thumbnail",{},()=>[n.value?T("",!0):(o(),b(hc,{key:0,entity:u.entity},null,8,["entity"]))],!0),y("footer",gc,[y("div",vc,[ce(u.$slots,"name",{},void 0,!0)]),y("p",yc,[ce(u.$slots,"meta",{},void 0,!0)])])],42,mc))}}),pn=Z(bc,[["__scopeId","data-v-db220638"]]),kc=["href"],xc=["href"],wc={key:1,class:"text-k-text-secondary"},Sc=["title","onClick"],Ac=["title","onClick"],ks=R({__name:"AlbumCard",props:{album:{},layout:{default:"full"}},setup(a){const e=a,{go:t}=be(),{startDragging:n}=Pt("album"),{album:l,layout:i}=le(e),r=ne(Ee.state,"allows_download"),c=L(()=>It.isStandard(l.value.artist_id)),u=L(()=>!Yt.isUnknown(l.value)),f=async()=>{we.queueAndPlay(await Je.fetchForAlbum(l.value),!0),t("queue")},h=()=>ms.fromAlbum(l.value),g=k=>n(k,l.value),x=k=>pe.emit("ALBUM_CONTEXT_MENU_REQUESTED",k,l.value);return(k,E)=>u.value?(o(),b(pn,{key:0,entity:s(l),layout:s(i),title:`${s(l).name} by ${s(l).artist_name}`,onContextmenu:x,onDblclick:f,onDragstart:g},{name:m(()=>[y("a",{href:`#/album/${s(l).id}`,class:"font-medium","data-testid":"name"},z(s(l).name),9,kc),c.value?(o(),d("a",{key:0,href:`#/artist/${s(l).artist_id}`},z(s(l).artist_name),9,xc)):(o(),d("span",wc,z(s(l).artist_name),1))]),meta:m(()=>[y("a",{title:`Shuffle all songs in the album ${s(l).name}`,role:"button",onClick:B(f,["prevent"])}," Shuffle ",8,Sc),r.value?(o(),d("a",{key:0,title:`Download all songs in the album ${s(l).name}`,role:"button",onClick:B(h,["prevent"])}," Download ",8,Ac)):T("",!0)]),_:1},8,["entity","layout","title"])):T("",!0)}}),Tc=Wt('<aside class="aspect-square rounded-lg pulse" data-v-0d8cf2f5></aside><footer class="flex flex-col flex-1 gap-3" data-v-0d8cf2f5><p class="h-[1.2rem] w-3/4 pulse" data-v-0d8cf2f5></p><p class="h-[1.2rem] w-2/3 pulse" data-v-0d8cf2f5></p><p class="h-[1.2rem] w-1/3 pulse" data-v-0d8cf2f5></p></footer>',2),Ec=[Tc],Cc=R({__name:"ArtistAlbumCardSkeleton",props:{layout:{default:"full"}},setup(a){return(e,t)=>(o(),d("article",{class:_e([e.layout,"skeleton flex flex-col gap-3 p-5 rounded-lg max-w-[256px] border border-k-border"])},Ec,2))}}),dt=Z(Cc,[["__scopeId","data-v-0d8cf2f5"]]),Lf=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"})),$c={key:0,class:"space-y-3"},Ic={key:0,class:"space-y-3"},Pc={key:1,class:"text-k-text-secondary"},Lc=R({__name:"RecentlyAddedAlbums",props:{loading:{type:Boolean,default:!1}},setup(a){const e=a,{loading:t}=le(e),n=ne(st.state,"recentlyAddedAlbums");return(l,i)=>(o(),b(Dt,null,{header:m(()=>[$("New Albums")]),default:m(()=>[s(t)?(o(),d("ol",$c,[(o(),d(M,null,Q(2,r=>y("li",{key:r},[_(dt,{layout:"compact"})])),64))])):(o(),d(M,{key:1},[n.value.length?(o(),d("ol",Ic,[(o(!0),d(M,null,Q(n.value,r=>(o(),d("li",{key:r.id},[_(ks,{album:r,layout:"compact"},null,8,["album"])]))),128))])):(o(),d("p",Pc,"No albums added yet."))],64))]),_:1}))}}),Dc={key:0,class:"space-y-3"},Rc={key:0,class:"space-y-3"},Mc={key:1,class:"text-k-text-secondary"},Oc=R({__name:"RecentlyAddedSongs",props:{loading:{type:Boolean,default:!1}},setup(a){const e=a,{loading:t}=le(e),n=ne(st.state,"recentlyAddedSongs");return(l,i)=>(o(),b(Dt,null,{header:m(()=>[$("New Songs")]),default:m(()=>[s(t)?(o(),d("ol",Dc,[(o(),d(M,null,Q(3,r=>y("li",{key:r},[_(bs)])),64))])):(o(),d(M,{key:1},[n.value.length?(o(),d("ol",Rc,[(o(!0),d(M,null,Q(n.value,r=>(o(),d("li",{key:r.id},[_(ys,{playable:r},null,8,["playable"])]))),128))])):(o(),d("p",Mc,"No songs added so far."))],64))]),_:1}))}}),Nc=["href"],Fc=["title","onClick"],Uc=["title","onClick"],fn=R({__name:"ArtistCard",props:{artist:{},layout:{default:"full"}},setup(a){const e=a,{go:t}=be(),{startDragging:n}=Pt("artist"),{artist:l,layout:i}=le(e),r=ne(Ee.state,"allows_download"),c=L(()=>It.isStandard(l.value)),u=async()=>{we.queueAndPlay(await Je.fetchForArtist(l.value),!0),t("queue")},f=()=>ms.fromArtist(l.value),h=x=>n(x,l.value),g=x=>pe.emit("ARTIST_CONTEXT_MENU_REQUESTED",x,l.value);return(x,k)=>c.value?(o(),b(pn,{key:0,entity:s(l),layout:s(i),title:s(l).name,onContextmenu:g,onDblclick:u,onDragstart:h},{name:m(()=>[y("a",{href:`#/artist/${s(l).id}`,class:"font-medium","data-testid":"name"},z(s(l).name),9,Nc)]),meta:m(()=>[y("a",{title:`Shuffle all songs by ${s(l).name}`,role:"button",onClick:B(u,["prevent"])}," Shuffle ",8,Fc),r.value?(o(),d("a",{key:0,title:`Download all songs by ${s(l).name}`,role:"button",onClick:B(f,["prevent"])}," Download ",8,Uc)):T("",!0)]),_:1},8,["entity","layout","title"])):T("",!0)}}),Bc={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-3"},Vc={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-3"},Hc={key:1,class:"text-k-text-secondary"},zc=R({__name:"MostPlayedArtists",props:{loading:{type:Boolean,default:!1}},setup(a){const e=a,{loading:t}=le(e),n=ne(st.state,"mostPlayedArtists");return(l,i)=>(o(),b(Dt,null,{header:m(()=>[$("Top Artists")]),default:m(()=>[s(t)?(o(),d("ol",Bc,[(o(),d(M,null,Q(4,r=>y("li",{key:r},[_(dt,{layout:"compact"})])),64))])):(o(),d(M,{key:1},[n.value.length?(o(),d("ol",Vc,[(o(!0),d(M,null,Q(n.value,r=>(o(),d("li",{key:r.id},[_(fn,{artist:r,layout:"compact"},null,8,["artist"])]))),128))])):(o(),d("p",Hc,"No artists found."))],64))]),_:1}))}}),Gc={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-3"},Yc={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-3"},qc={key:1,class:"text-k-text-secondary"},Wc=R({__name:"MostPlayedAlbums",props:{loading:{type:Boolean,default:!1}},setup(a){const e=a,{loading:t}=le(e),n=ne(st.state,"mostPlayedAlbums");return(l,i)=>(o(),b(Dt,null,{header:m(()=>[$("Top Albums")]),default:m(()=>[s(t)?(o(),d("ol",Gc,[(o(),d(M,null,Q(4,r=>y("li",{key:r},[_(dt,{layout:"compact"})])),64))])):(o(),d(M,{key:1},[n.value.length?(o(),d("ol",Yc,[(o(!0),d(M,null,Q(n.value,r=>(o(),d("li",{key:r.id},[_(ks,{album:r,layout:"compact"},null,8,["album"])]))),128))])):(o(),d("p",qc,"No albums found."))],64))]),_:1}))}}),jc={key:0,class:"thumbnail-wrapper hidden md:block overflow-hidden w-0 rounded-md"},Kc={class:"flex flex-1 gap-5 items-center overflow-hidden"},Qc={class:"w-full flex-1 overflow-hidden"},Xc={class:"name overflow-hidden whitespace-nowrap text-ellipsis mr-4 font-thin md:font-bold my-0 leading-tight"},Zc={key:0,class:"meta text-k-text-secondary hidden text-[0.9rem] leading-loose"},Jc=R({__name:"ScreenHeader",props:{layout:{default:"expanded"},disabled:{type:Boolean,default:!1}},setup(a){return(e,t)=>(o(),d("header",{class:_e([[e.layout,e.disabled?"disabled":""],"screen-header min-h-0 md:min-h-full flex items-end flex-shrink-0 relative content-stretch leading-normal p-6 border-b border-b-k-bg-secondary"])},[e.$slots.thumbnail?(o(),d("aside",jc,[ce(e.$slots,"thumbnail")])):T("",!0),y("main",Kc,[y("div",Qc,[y("h1",Xc,[ce(e.$slots,"default")]),e.$slots.meta?(o(),d("span",Zc,[ce(e.$slots,"meta")])):T("",!0)]),ce(e.$slots,"controls")])],2))}}),je=Z(Jc,[["__scopeId","data-v-eb558dd7"]]),eu={},tu={class:"relative flex place-content-center place-items-center flex-1 text-white/50","data-testid":"screen-empty-state"},su={class:"md:max-w-3/4 px-6 pt-0 mx-auto flex flex-col items-center pb-k-header-height"},nu={class:"jumbo-icon block text-[6rem] mb-4 opacity-70"},au={class:"text text-center text-3xl font-light flex flex-col gap-2"};function ou(a,e){return o(),d("article",tu,[y("div",su,[y("span",nu,[ce(a.$slots,"icon",{},()=>[$("☕️")])]),y("div",au,[ce(a.$slots,"default",{},()=>[$("Placeholder text goes here.")])])])])}const He=Z(eu,[["render",ou]]),lu={},ru={class:"max-h-full min-h-full w-full flex flex-col transform-gpu"},iu={class:"overflow-scroll flex flex-col b-16 md:b-6 p-6 flex-1 place-content-start"};function cu(a,e){const t=Ce("koel-overflow-fade");return o(),d("section",ru,[ce(a.$slots,"header",{},void 0,!0),G((o(),d("main",iu,[ce(a.$slots,"default",{},void 0,!0)])),[[t]])])}const Ke=Z(lu,[["render",cu],["__scopeId","data-v-1e0e6447"]]),uu={class:"secondary d-block"},du={key:1,class:"space-y-12"},pu={class:"grid grid-cols-1 md:grid-cols-2 w-full gap-8 md:gap-4"},fu={class:"grid grid-cols-1 md:grid-cols-2 w-full gap-8 md:gap-4"},_u=R({__name:"HomeScreen",setup(a){const{isAdmin:e}=et(),t=["Oh hai!","Hey, %s!","Howdy, %s!","Yo!","How’s it going, %s?","Sup, %s?","How’s life, %s?","How’s your day, %s?","How have you been, %s?"],n=L(()=>Nn.current?me.sample(t).replace("%s",Nn.current.name):""),l=L(()=>Ee.state.song_length===0),i=D(!1);let r=!1;return pe.on("SONGS_DELETED",()=>st.fetch()).on("SONGS_UPDATED",()=>st.fetch()).on("SONG_UPLOADED",()=>st.fetch()),be().onScreenActivated("Home",async()=>{if(!r){i.value=!0;try{await st.fetch(),r=!0}catch(c){qe("dialog").handleHttpError(c)}finally{i.value=!1}}}),(c,u)=>{const f=X("Icon");return o(),b(Ke,{id:"homeWrapper"},{header:m(()=>[_(je,{layout:"collapsed"},{default:m(()=>[$(z(n.value),1)]),_:1})]),default:m(()=>[l.value?(o(),b(He,{key:0},{icon:m(()=>[_(f,{icon:s(pa)},null,8,["icon"])]),default:m(()=>[$(" No songs found. "),y("span",uu,z(s(e)?"Have you set up your library yet?":"Contact your administrator to set up your library."),1)]),_:1})):(o(),d("div",du,[y("div",pu,[_(sc,{loading:i.value,"data-testid":"most-played-songs"},null,8,["loading"]),_(rc,{loading:i.value,"data-testid":"recently-played-songs"},null,8,["loading"])]),y("div",fu,[_(Lc,{loading:i.value,"data-testid":"recently-added-albums"},null,8,["loading"]),_(Oc,{loading:i.value,"data-testid":"recently-added-songs"},null,8,["loading"])]),_(zc,{loading:i.value,"data-testid":"most-played-artists"},null,8,["loading"]),_(Wc,{loading:i.value,"data-testid":"most-played-albums"},null,8,["loading"]),_(Da)]))]),_:1})}}}),hu={},mu={class:"skeleton"},gu=Wt('<div class="song-list-header" data-v-ad864876><span class="track-number" data-v-ad864876><span class="text" data-v-ad864876></span></span><span class="title" data-v-ad864876><span class="text" data-v-ad864876></span></span><span class="artist" data-v-ad864876><span class="text" data-v-ad864876></span></span><span class="album" data-v-ad864876><span class="text" data-v-ad864876></span></span><span class="time" data-v-ad864876><span class="text" data-v-ad864876></span></span><span class="favorite" data-v-ad864876></span></div>',1),vu=Wt('<span class="track-number" data-v-ad864876><span class="text pulse" data-v-ad864876></span></span><span class="title" data-v-ad864876><span class="thumbnail pulse" data-v-ad864876></span><span class="text pulse" data-v-ad864876></span></span><span class="artist" data-v-ad864876><span class="text pulse" data-v-ad864876></span></span><span class="album" data-v-ad864876><span class="text pulse" data-v-ad864876></span></span><span class="time" data-v-ad864876><span class="text pulse" data-v-ad864876></span></span><span class="favorite" data-v-ad864876><span class="text pulse" data-v-ad864876></span></span>',6),yu=[vu];function bu(a,e){return o(),d("div",mu,[gu,(o(),d(M,null,Q(40,t=>y("div",{key:t,class:"song-item"},yu)),64))])}const Zt=Z(hu,[["render",bu],["__scopeId","data-v-ad864876"]]),ku={key:0,class:"d-block secondary"},xu=["onClick"],wu=R({__name:"QueueScreen",setup(a){const{go:e,onScreenActivated:t}=be(),{SongList:n,ControlsToggle:l,ThumbnailStack:i,headerLayout:r,songs:c,songList:u,duration:f,thumbnails:h,selectedPlayables:g,showingControls:x,isPhone:k,playSelected:E,applyFilter:C,onScrollBreakpoint:I}=Qt(ne(Pe.state,"playables"),{type:"Queue"},{reorderable:!0,sortable:!1}),{SongListControls:w,config:S}=Xt("Queue"),v=D(!1),P=L(()=>Ee.state.song_count>0),se=async(Y=!0)=>{we.queueAndPlay(c.value,Y),e("queue")},O=async()=>{try{v.value=!0,await Pe.fetchRandom(),await we.playFirstInQueue()}catch(Y){qe("dialog").handleHttpError(Y)}finally{v.value=!1}},W=()=>{we.stop(),Pe.clear()},ae=async()=>{var te;if(!g.value.length)return;const Y=(te=Pe.current)==null?void 0:te.id;Pe.unqueue(g.value),Y&&g.value.find(({id:ke})=>ke===Y)&&await we.playNext()},U=()=>g.value.length&&we.play(g.value[0]),ee=(Y,te)=>Pe.move(g.value,Y,te);return t("Queue",async()=>{if(!Is.get("song-to-queue"))return;let Y;try{if(v.value=!0,Y=await Je.resolve(Is.get("song-to-queue")),!Y)throw"Song not found"}catch(te){qe("dialog").handleHttpError(te);return}finally{Is.remove("song-to-queue"),v.value=!1}Pe.clearSilently(),Pe.queue(Y)}),(Y,te)=>{const ke=X("Icon");return o(),b(Ke,null,{header:m(()=>[_(je,{layout:s(c).length===0?"collapsed":s(r)},jt({thumbnail:m(()=>[_(s(i),{thumbnails:s(h)},null,8,["thumbnails"])]),controls:m(()=>[s(c).length&&(!s(k)||s(x))?(o(),b(s(w),{key:0,config:s(S),onFilter:s(C),onClearQueue:W,onPlayAll:se,onPlaySelected:s(E)},null,8,["config","onFilter","onPlaySelected"])):T("",!0)]),default:m(()=>[$(" Current Queue "),_(s(l),{modelValue:s(x),"onUpdate:modelValue":te[0]||(te[0]=ue=>it(x)?x.value=ue:null)},null,8,["modelValue"])]),_:2},[s(c).length?{name:"meta",fn:m(()=>[y("span",null,z(s(ht)(s(c),"item")),1),y("span",null,z(s(f)),1)]),key:"0"}:void 0]),1032,["layout"])]),default:m(()=>[v.value?(o(),b(Zt,{key:0,class:"-m-6"})):T("",!0),s(c).length?(o(),b(s(n),{key:1,ref_key:"songList",ref:u,class:"-m-6",onReorder:ee,"onPress:delete":ae,"onPress:enter":U,onScrollBreakpoint:s(I)},null,8,["onScrollBreakpoint"])):(o(),b(He,{key:2},{icon:m(()=>[_(ke,{icon:s($o)},null,8,["icon"])]),default:m(()=>[$(" No songs queued. "),P.value?(o(),d("span",ku,[$(" How about "),y("a",{class:"start",onClick:B(O,["prevent"])},"playing some random songs",8,xu),$("? ")])):T("",!0)]),_:1}))]),_:1})}}}),Fa=a=>(Xs("data-v-525a54d9"),a=a(),Zs(),a),Su={class:"flex w-[64px] border border-solid border-white/20 rounded-md overflow-hidden mt-[0.5rem] md:mt-0"},Au=Fa(()=>y("span",{class:"hidden"},"View as thumbnails",-1)),Tu=Fa(()=>y("span",{class:"hidden"},"View as list",-1)),Eu=R({__name:"ViewModeSwitch",props:{modelValue:{default:"thumbnails"}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,n=L({get:()=>t.modelValue,set:l=>e("update:modelValue",l)});return(l,i)=>{const r=X("Icon"),c=Ce("koel-tooltip");return o(),d("span",Su,[G((o(),d("label",{class:_e([{active:n.value==="thumbnails"},"thumbnails"]),"data-testid":"view-mode-thumbnail",title:"View as thumbnails"},[G(y("input",{"onUpdate:modelValue":i[0]||(i[0]=u=>n.value=u),class:"hidden",name:"view-mode",type:"radio",value:"thumbnails"},null,512),[[Fn,n.value]]),_(r,{icon:s(wi)},null,8,["icon"]),Au],2)),[[c]]),G((o(),d("label",{class:_e([{active:n.value==="list"},"list"]),"data-testid":"view-mode-list",title:"View as list"},[G(y("input",{"onUpdate:modelValue":i[1]||(i[1]=u=>n.value=u),class:"hidden",name:"view-mode",type:"radio",value:"list"},null,512),[[Fn,n.value]]),_(r,{icon:s(Io)},null,8,["icon"]),Tu],2)),[[c]])])}}}),Ua=Z(Eu,[["__scopeId","data-v-525a54d9"]]),Cu=R({__name:"AlbumOrArtistGrid",props:{viewMode:{default:"thumbnails"}},setup(a){const e=a,{viewMode:t}=le(e);return(n,l)=>(o(),d("div",{class:_e([`as-${s(t)}`,"grid gap-5 p-6"])},[ce(n.$slots,"default",{},void 0,!0)],2))}}),Ba=Z(Cu,[["__scopeId","data-v-db2964a8"]]),$u={class:"secondary d-block"},Iu=R({__name:"AlbumListScreen",setup(a){const{isAdmin:e}=et(),t=D(),n=D("thumbnails"),l=ne(Yt.state,"albums"),{ToTopButton:i,makeScrollable:r}=Ra(t,async()=>await E());Ve(n,()=>_t.albums_view_mode=n.value);let c=!1;const u=D(!1),f=D(1),h=L(()=>Ee.state.song_length===0),g=L(()=>n.value==="thumbnails"?"full":"compact"),x=L(()=>f.value!==null),k=L(()=>u.value&&l.value.length===0),E=async()=>{u.value||!x.value||(u.value=!0,f.value=await Yt.paginate(f.value),u.value=!1)};return be().onScreenActivated("Albums",async()=>{if(!h.value&&!c){n.value=_t.albums_view_mode||"thumbnails",c=!0;try{await r()}catch(C){c=!1,qe().handleHttpError(C)}}}),(C,I)=>{const w=X("Icon"),S=Ce("koel-overflow-fade");return o(),b(Ke,null,{header:m(()=>[_(je,{layout:"collapsed"},{controls:m(()=>[_(Ua,{modelValue:n.value,"onUpdate:modelValue":I[0]||(I[0]=v=>n.value=v)},null,8,["modelValue"])]),default:m(()=>[$(" Albums ")]),_:1})]),default:m(()=>[h.value?(o(),b(He,{key:0},{icon:m(()=>[_(w,{icon:s(ua)},null,8,["icon"])]),default:m(()=>[$(" No albums found. "),y("span",$u,z(s(e)?"Have you set up your library yet?":"Contact your administrator to set up your library."),1)]),_:1})):G((o(),d("div",{key:1,ref_key:"gridContainer",ref:t,class:"-m-6 overflow-auto"},[_(Ba,{"view-mode":n.value,"data-testid":"album-grid"},{default:m(()=>[k.value?(o(),d(M,{key:0},Q(10,v=>_(dt,{key:v,layout:g.value},null,8,["layout"])),64)):(o(),d(M,{key:1},[(o(!0),d(M,null,Q(l.value,v=>(o(),b(ks,{key:v.id,album:v,layout:g.value},null,8,["album","layout"]))),128)),_(s(i))],64))]),_:1},8,["view-mode"])])),[[S]])]),_:1})}}}),Pu={class:"secondary d-block"},Lu=R({__name:"ArtistListScreen",setup(a){const{isAdmin:e}=et(),t=D(),n=D("thumbnails"),l=ne(It.state,"artists"),{ToTopButton:i,makeScrollable:r}=Ra(t,async()=>await E());Ve(n,()=>_t.artists_view_mode=n.value);let c=!1;const u=D(!1),f=D(1),h=L(()=>Ee.state.song_length===0),g=L(()=>n.value==="thumbnails"?"full":"compact"),x=L(()=>f.value!==null),k=L(()=>u.value&&l.value.length===0),E=async()=>{u.value||!x.value||(u.value=!0,f.value=await It.paginate(f.value),u.value=!1)};return be().onScreenActivated("Artists",async()=>{if(!h.value&&!c){n.value=_t.artists_view_mode||"thumbnails",c=!0;try{await r()}catch(C){c=!1,qe().handleHttpError(C)}}}),(C,I)=>{const w=X("Icon"),S=Ce("koel-overflow-fade");return o(),b(Ke,null,{header:m(()=>[_(je,{layout:"collapsed"},{controls:m(()=>[_(Ua,{modelValue:n.value,"onUpdate:modelValue":I[0]||(I[0]=v=>n.value=v)},null,8,["modelValue"])]),default:m(()=>[$(" Artists ")]),_:1})]),default:m(()=>[h.value?(o(),b(He,{key:0},{icon:m(()=>[_(w,{icon:s(Po)},null,8,["icon"])]),default:m(()=>[$(" No artists found. "),y("span",Pu,z(s(e)?"Have you set up your library yet?":"Contact your administrator to set up your library."),1)]),_:1})):G((o(),d("div",{key:1,ref_key:"gridContainer",ref:t,class:"-m-6 overflow-auto"},[_(Ba,{"view-mode":n.value,"data-testid":"artist-list"},{default:m(()=>[k.value?(o(),d(M,{key:0},Q(10,v=>_(dt,{key:v,layout:g.value},null,8,["layout"])),64)):(o(),d(M,{key:1},[(o(!0),d(M,null,Q(l.value,v=>(o(),b(fn,{key:v.id,artist:v,layout:g.value},null,8,["artist","layout"]))),128)),_(s(i))],64))]),_:1},8,["view-mode"])])),[[S]])]),_:1})}}}),Du=y("span",{class:"flex-1"},null,-1),Ru=y("span",{class:"aspect-[1.2/1] rounded-full pulse"},null,-1),Mu=[Du,Ru],Ou=R({__name:"GenreItemSkeleton",setup(a){const e=Math.random()*100+80;return(t,n)=>(o(),d("article",{style:kt({width:`${e}px`}),class:"skeleton pulse flex rounded-md overflow-hidden h-[1.2rem] m-1 p-4 flex-shrink-0"},Mu,4))}}),Nu={class:"secondary d-block"},Fu={key:0,class:"genres text-center"},Uu=["href","title"],Bu={class:"name bg-white/5 px-[0.5em] py-[0.2em] leading-normal"},Vu={class:"count items-center px-[0.5em] py-[0.2em]"},Hu={key:1,class:"text-center"},zu=R({__name:"GenreListScreen",setup(a){const{isAdmin:e}=et(),{handleHttpError:t}=qe(),n=D(),l=L(()=>Ee.state.song_length===0),i=L(()=>me.maxBy(n.value,"song_count")),r=L(()=>me.minBy(n.value,"song_count")),c=L(()=>{var E,C;const h=((E=i.value)==null?void 0:E.song_count)||1,g=((C=r.value)==null?void 0:C.song_count)||1,k=(h-g)/5;return[g,g+k,g+k*2,g+k*3,g+k*4,h]}),u=h=>{const g=c.value.findIndex(x=>h.song_count<=x);return g===-1?5:g},f=async()=>{try{n.value=await Hr.fetchAll()}catch(h){t(h)}};return ut(async()=>{l.value||await f()}),(h,g)=>{const x=X("Icon");return o(),b(Ke,null,{header:m(()=>[_(je,{layout:"collapsed"},{default:m(()=>[$("Genres")]),_:1})]),default:m(()=>[l.value?(o(),b(He,{key:0},{icon:m(()=>[_(x,{icon:s(da)},null,8,["icon"])]),default:m(()=>[$(" No genres found. "),y("span",Nu,z(s(e)?"Have you set up your library yet?":"Contact your administrator to set up your library."),1)]),_:1})):(o(),d(M,{key:1},[n.value?(o(),d("ul",Fu,[(o(!0),d(M,null,Q(n.value,k=>(o(),d("li",{key:k.name,class:_e([`level-${u(k)}`,"rounded-[0.5em] inline-block m-1.5 align-middle overflow-hidden"])},[y("a",{href:`/#/genres/${encodeURIComponent(k.name)}`,title:`${k.name}: ${s(ht)(k.song_count,"song")}`,class:"bg-white/15 inline-flex items-center justify-center !text-k-text-secondary transition-colors duration-200 ease-in-out hover:!text-k-text-primary hover:bg-k-highlight"},[y("span",Bu,z(k.name),1),y("span",Vu,z(k.song_count),1)],8,Uu)],2))),128))])):(o(),d("ul",Hu,[(o(),d(M,null,Q(20,k=>y("li",{key:k,class:"inline-block"},[_(Ou)])),64))]))],64))]),_:1})}}}),Gu=Z(zu,[["__scopeId","data-v-e6291164"]]),Yu=["checked"],qu=R({__name:"CheckBox",props:{modelValue:{default:!1}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,n=L({get:()=>t.modelValue,set:l=>e("update:modelValue",l)});return(l,i)=>G((o(),d("input",oo({"onUpdate:modelValue":i[0]||(i[0]=r=>n.value=r),checked:n.value,class:"relative align-bottom inline-block w-[32px] h-[20px] bg-gray-400 rounded-full shadow-inner cursor-pointer transition-all duration-200 ease-in-out mr-2 after:h-[16px] after:aspect-square after:absolute after:bg-white after:top-[2px] after:left-[2px] after:rounded-full after:transition-left after:duration-200 after:ease-in-out checked:bg-k-highlight checked:after:left-[14px]",type:"checkbox"},l.$attrs),null,16,Yu)),[[Qs,n.value]])}}),Wu=a=>(Xs("data-v-ddb523b6"),a=a(),Zs(),a),ju={class:"controls w-full min-h-[32px] flex justify-between items-center gap-4"},Ku={key:1,class:"text-k-text-secondary inline-flex items-center text-base"},Qu=Wu(()=>y("span",null,"Own songs only",-1)),Xu=["onClick"],Zu=R({__name:"AllSongsScreen",setup(a){const e=ne(Ee.state,"song_count"),t=L(()=>lo(Ee.state.song_length)),{SongList:n,ControlsToggle:l,ThumbnailStack:i,headerLayout:r,thumbnails:c,songs:u,songList:f,showingControls:h,isPhone:g,onPressEnter:x,playSelected:k,onScrollBreakpoint:E}=Qt(ne(Je.state,"songs"),{type:"Songs"},{filterable:!1,sortable:!0}),{SongListControls:C,config:I}=Xt("Songs"),{go:w,onScreenActivated:S}=be(),{isPlus:v}=Kt(),{get:P,set:se}=la();let O=!1;const W=D(!1);let ae="title",U="asc";const ee=D(1),Y=L(()=>ee.value!==null),te=L(()=>W.value&&u.value.length===0),ke=D(v.value?!!P("own-songs-only"):!1);Ve(ke,async Se=>{se("own-songs-only",Se),ee.value=1,Je.state.songs=[],await Le()});const ue=async(Se,Ue)=>{ee.value=1,Je.state.songs=[],ae=Se,U=Ue,await Le()},Ge=async()=>{ke.value=!1,await Le()},Le=async()=>{if(!(!Y.value||W.value)){W.value=!0;try{ee.value=await Je.paginate({sort:ae,order:U,page:ee.value,own_songs_only:ke.value})}catch(Se){qe().handleHttpError(Se)}finally{W.value=!1}}},pt=async Se=>{Se?await Pe.fetchRandom():await Pe.fetchInOrder(ae,U),w("queue"),await we.playFirstInQueue()};return S("Songs",async()=>{O||(O=!0,await Le())}),(Se,Ue)=>{const re=X("Icon");return o(),b(Ke,null,{header:m(()=>[_(je,{layout:s(u).length===0?"collapsed":s(r)},jt({thumbnail:m(()=>[_(s(i),{thumbnails:s(c)},null,8,["thumbnails"])]),controls:m(()=>[y("div",ju,[e.value&&(!s(g)||s(h))?(o(),b(s(C),{key:0,config:s(I),onPlayAll:pt,onPlaySelected:s(k)},null,8,["config","onPlaySelected"])):T("",!0),s(v)?(o(),d("label",Ku,[_(qu,{modelValue:ke.value,"onUpdate:modelValue":Ue[1]||(Ue[1]=$e=>ke.value=$e)},null,8,["modelValue"]),Qu])):T("",!0)])]),default:m(()=>[$(" All Songs "),_(s(l),{modelValue:s(h),"onUpdate:modelValue":Ue[0]||(Ue[0]=$e=>it(h)?h.value=$e:null)},null,8,["modelValue"])]),_:2},[e.value?{name:"meta",fn:m(()=>[y("span",null,z(s(ht)(e.value,"song")),1),y("span",null,z(t.value),1)]),key:"0"}:void 0]),1032,["layout"])]),default:m(()=>{var $e;return[te.value?(o(),b(Zt,{key:0,class:"-m-6"})):(o(),d(M,{key:1},[(($e=s(u))==null?void 0:$e.length)>0?(o(),b(s(n),{key:0,ref_key:"songList",ref:f,class:"-m-6",onSort:ue,onScrollBreakpoint:s(E),"onPress:enter":s(x),onScrolledToEnd:Le},null,8,["onScrollBreakpoint","onPress:enter"])):(o(),b(He,{key:1},{icon:m(()=>[_(re,{icon:s(pa)},null,8,["icon"])]),default:m(()=>[$(" Your library is empty. "),s(v)&&ke.value?(o(),d("a",{key:0,class:"d-block secondary",role:"button",onClick:B(Ge,["prevent"])}," Show public songs from other users? ",8,Xu)):T("",!0)]),_:1}))],64))]}),_:1})}}}),Ju=Z(Zu,[["__scopeId","data-v-ddb523b6"]]),ed={class:"inline-block align-middle"},td={class:"align-middle -space-x-2"},sd={key:0,class:"ml-2"},nd=R({__name:"PlaylistCollaboratorsBadge",props:{collaborators:{}},setup(a){const e=a,{collaborators:t}=le(e),n=L(()=>t.value.slice(0,3)),l=L(()=>t.value.length-n.value.length);return(i,r)=>{const c=Ce("koel-tooltip");return o(),d("div",ed,[y("ul",td,[(o(!0),d(M,null,Q(n.value,u=>(o(),d("li",{key:u.id,class:"inline-block align-baseline"},[G(_(cn,{user:u,class:"border border-white/30",width:"24"},null,8,["user"]),[[c,void 0,void 0,{top:!0}]])]))),128))]),l.value?(o(),d("span",sd," +"+z(l.value)+" more ",1)):T("",!0)])}}}),ad={class:"cover relative w-full aspect-square block rounded-md overflow-hidden bg-no-repeat bg-cover bg-center","data-testid":"playlist-thumbnail"},od={key:0,class:"absolute inset-0 w-full h-full bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity duration-200 flex items-center justify-center"},ld={class:"border border-1.5 border-white/20 rounded-md overflow-hidden"},rd=["onClick"],id=["onClick"],cd=R({__name:"PlaylistThumbnail",props:{playlist:{}},setup(a){const e=a;oa(f=>({"664cabf1":r.value}));const{playlist:t}=le(e),{currentUserCan:n}=_a();Kt();const{toastSuccess:l}=va(),i=L(()=>n.editPlaylist(t.value)),r=L(()=>`url(${t.value.cover||nt})`),c=()=>{const f=document.createElement("input");f.setAttribute("type","file"),f.setAttribute("accept","image/*"),f.addEventListener("change",async()=>{var x;const h=(x=f.files)==null?void 0:x[0];if(!h)return;const g=t.value.cover;try{xa().readAsDataUrl(h,async k=>{t.value.cover=k,await wt.uploadCover(t.value,k),l("Playlist cover updated.")})}catch(k){t.value.cover=g,qe().handleHttpError(k)}}),f.dispatchEvent(new MouseEvent("click"))},u=async()=>await wt.removeCover(t.value);return(f,h)=>{const g=X("Icon");return o(),d("article",ad,[ce(f.$slots,"default",{},void 0,!0),i.value?(o(),d("div",od,[y("div",ld,[y("button",{class:"p-2 hover:bg-black/50",title:"Upload cover image",onClick:B(c,["prevent"])},[_(g,{icon:s(en),class:"text-white text-xl","fixed-width":""},null,8,["icon"])],8,rd),s(t).cover?(o(),d("button",{key:0,class:"p-2 hover:bg-black/30",title:"Remove cover image",onClick:B(u,["prevent"])},[_(g,{icon:s(Lo),class:"text-white text-xl","fixed-width":""},null,8,["icon"])],8,id)):T("",!0)])])):T("",!0)])}}}),ud=Z(cd,[["__scopeId","data-v-35e864d7"]]),dd=["onClick"],pd=["onClick"],fd=y("span",{class:"d-block secondary"},' Drag songs into its name in the sidebar or use the "Add To…" button to fill it up. ',-1),_d=R({__name:"PlaylistScreen",setup(a){const{currentUser:e}=et(),{triggerNotFound:t,getRouteParam:n,onScreenActivated:l}=be(),i=D(),r=D(),c=D(!1),{SongList:u,ControlsToggle:f,ThumbnailStack:h,headerLayout:g,songs:x,songList:k,duration:E,thumbnails:C,selectedPlayables:I,showingControls:w,isPhone:S,context:v,sortField:P,onPressEnter:se,playAll:O,playSelected:W,applyFilter:ae,onScrollBreakpoint:U,sort:ee,config:Y}=Qt(D([]),{type:"Playlist"}),{SongListControls:te,config:ke}=Xt("Playlist"),{removeFromPlaylist:ue}=ka(),Ge=ne(Ee.state,"allows_download"),Le=()=>pe.emit("PLAYLIST_DELETE",r.value),pt=()=>ms.fromPlaylist(r.value),Se=()=>pe.emit("MODAL_SHOW_EDIT_PLAYLIST_FORM",r.value),Ue=async()=>await ue(r.value,I.value);let re=D([]);const $e=async(j=!1)=>{var fe;if(!c.value)try{[x.value,re.value]=await Promise.all([Je.fetchForPlaylist(r.value,j),r.value.is_collaborative?qo.fetchCollaborators(r.value):Promise.resolve([])]),P.value??(P.value=(fe=r.value)!=null&&fe.is_smart?"title":"position"),he(P.value,"asc")}catch(ot){qe().handleHttpError(ot)}finally{c.value=!1}},he=(j,fe)=>{if(Y.reorderable=j==="position",j!=="position")return ee(j,fe);x.value=r.value.playables},ft=(j,fe)=>{wt.moveItemsInPlaylist(r.value,I.value,j,fe)};return Ve(i,async j=>{var fe;j&&(P.value=null,r.value=wt.byId(j),v.entity=r.value,Y.collaborative=!1,r.value?(await $e(),Y.collaborative=r.value.is_collaborative,Y.hasCustomOrderSort=!r.value.is_smart,ke.deletePlaylist=r.value.user_id===((fe=e.value)==null?void 0:fe.id)):await t())}),l("Playlist",()=>i.value=n("id")),pe.on("PLAYLIST_UPDATED",async({id:j})=>j===i.value&&await $e()).on("PLAYLIST_COLLABORATOR_REMOVED",async({id:j})=>j===i.value&&await $e()).on("PLAYLIST_CONTENT_REMOVED",async({id:j},fe)=>{j===i.value&&(x.value=me.differenceBy(x.value,fe,"id"))}),(j,fe)=>{const ot=X("Icon");return r.value?(o(),b(Ke,{key:0},{header:m(()=>[_(je,{disabled:c.value,layout:s(x).length===0?"collapsed":s(g)},jt({thumbnail:m(()=>[_(ud,{playlist:r.value},{default:m(()=>[r.value.cover?T("",!0):(o(),b(s(h),{key:0,thumbnails:s(C)},null,8,["thumbnails"]))]),_:1},8,["playlist"])]),controls:m(()=>[!s(S)||s(w)?(o(),b(s(te),{key:0,config:s(ke),onFilter:s(ae),onRefresh:fe[1]||(fe[1]=tt=>$e(!0)),onDeletePlaylist:Le,onPlayAll:s(O),onPlaySelected:s(W)},null,8,["config","onFilter","onPlayAll","onPlaySelected"])):T("",!0)]),default:m(()=>[$(z(r.value.name)+" ",1),s(x).length?(o(),b(s(f),{key:0,modelValue:s(w),"onUpdate:modelValue":fe[0]||(fe[0]=tt=>it(w)?w.value=tt:null)},null,8,["modelValue"])):T("",!0)]),_:2},[s(x).length||r.value.is_collaborative?{name:"meta",fn:m(()=>[s(re).length?(o(),b(nd,{key:0,collaborators:s(re)},null,8,["collaborators"])):T("",!0),y("span",null,z(s(ht)(s(x),"item")),1),y("span",null,z(s(E)),1),Ge.value?(o(),d("a",{key:1,role:"button",title:"Download all songs in playlist",onClick:B(pt,["prevent"])}," Download All ",8,dd)):T("",!0)]),key:"0"}:void 0]),1032,["disabled","layout"])]),default:m(()=>[G(_(Zt,{class:"-m-6"},null,512),[[ge,c.value]]),!c.value&&s(x).length?(o(),b(s(u),{key:0,ref_key:"songList",ref:k,class:"-m-6",onReorder:ft,onSort:he,"onPress:delete":Ue,"onPress:enter":s(se),onScrollBreakpoint:s(U)},null,8,["onPress:enter","onScrollBreakpoint"])):T("",!0),!s(x).length&&!c.value?(o(),b(He,{key:1},{icon:m(()=>[_(ot,{icon:s(Xo)},null,8,["icon"])]),default:m(()=>{var tt;return[(tt=r.value)!=null&&tt.is_smart?(o(),d(M,{key:0},[$(" No songs match the playlist's "),y("a",{onClick:B(Se,["prevent"])},"criteria",8,pd),$(". ")],64)):(o(),d(M,{key:1},[$(" The playlist is currently empty. "),fd],64))]}),_:1})):T("",!0)]),_:1})):T("",!0)}}}),hd=["onClick"],md={class:"secondary d-block"},gd=R({__name:"FavoritesScreen",setup(a){const{SongList:e,ControlsToggle:t,ThumbnailStack:n,headerLayout:l,songs:i,songList:r,duration:c,thumbnails:u,selectedPlayables:f,showingControls:h,isPhone:g,onPressEnter:x,playAll:k,playSelected:E,applyFilter:C,onScrollBreakpoint:I}=Qt(ne(zt.state,"playables"),{type:"Favorites"}),{SongListControls:w,config:S}=Xt("Favorites"),v=ne(Ee.state,"allows_download"),P=()=>ms.fromFavorites(),se=()=>f.value.length&&zt.unlike(f.value);let O=!1;const W=D(!1),ae=async()=>{W.value=!0,await zt.fetch(),W.value=!1};return be().onScreenActivated("Favorites",async()=>{O||(O=!0,await ae())}),(U,ee)=>{const Y=X("Icon");return o(),b(Ke,null,{header:m(()=>[_(je,{layout:s(i).length===0?"collapsed":s(l)},jt({thumbnail:m(()=>[_(s(n),{thumbnails:s(u)},null,8,["thumbnails"])]),controls:m(()=>[s(i).length&&(!s(g)||s(h))?(o(),b(s(w),{key:0,config:s(S),onFilter:s(C),onPlayAll:s(k),onPlaySelected:s(E)},null,8,["config","onFilter","onPlayAll","onPlaySelected"])):T("",!0)]),default:m(()=>[$(" Your Favorites "),_(s(t),{modelValue:s(h),"onUpdate:modelValue":ee[0]||(ee[0]=te=>it(h)?h.value=te:null)},null,8,["modelValue"])]),_:2},[s(i).length?{name:"meta",fn:m(()=>[y("span",null,z(s(ht)(s(i),"item")),1),y("span",null,z(s(c)),1),v.value?(o(),d("a",{key:0,class:"download",role:"button",title:"Download all songs in playlist",onClick:B(P,["prevent"])}," Download All ",8,hd)):T("",!0)]),key:"0"}:void 0]),1032,["layout"])]),default:m(()=>[W.value?(o(),b(Zt,{key:0,class:"-m-6"})):T("",!0),s(i).length?(o(),b(s(e),{key:1,ref_key:"songList",ref:r,class:"-m-6","onPress:delete":se,"onPress:enter":s(x),onScrollBreakpoint:s(I)},null,8,["onPress:enter","onScrollBreakpoint"])):(o(),b(He,{key:2},{icon:m(()=>[_(Y,{icon:s(Do)},null,8,["icon"])]),default:m(()=>[$(" No favorites yet. "),y("span",md,[$(" Click the  "),_(Y,{icon:s(Zo)},null,8,["icon"]),$("  icon to mark a song as favorite. ")])]),_:1}))]),_:1})}}}),vd=y("span",{class:"secondary d-block"},"Start playing to populate this playlist.",-1),yd=R({__name:"RecentlyPlayedScreen",setup(a){const e=ne(Un.state,"playables"),{SongList:t,ControlsToggle:n,ThumbnailStack:l,headerLayout:i,songs:r,songList:c,thumbnails:u,duration:f,showingControls:h,isPhone:g,onPressEnter:x,playAll:k,playSelected:E,applyFilter:C,onScrollBreakpoint:I}=Qt(e,{type:"RecentlyPlayed"},{sortable:!1}),{SongListControls:w,config:S}=Xt("RecentlyPlayed");let v=!1,P=D(!1);return be().onScreenActivated("RecentlyPlayed",async()=>{v||(P.value=!0,v=!0,await Un.fetch(),P.value=!1)}),(se,O)=>{const W=X("Icon");return o(),b(Ke,null,{header:m(()=>[_(je,{layout:s(r).length===0?"collapsed":s(i)},jt({thumbnail:m(()=>[_(s(l),{thumbnails:s(u)},null,8,["thumbnails"])]),controls:m(()=>[s(r).length&&(!s(g)||s(h))?(o(),b(s(w),{key:0,config:s(S),onFilter:s(C),onPlayAll:s(k),onPlaySelected:s(E)},null,8,["config","onFilter","onPlayAll","onPlaySelected"])):T("",!0)]),default:m(()=>[$(" Recently Played "),_(s(n),{modelValue:s(h),"onUpdate:modelValue":O[0]||(O[0]=ae=>it(h)?h.value=ae:null)},null,8,["modelValue"])]),_:2},[s(r).length?{name:"meta",fn:m(()=>[y("span",null,z(s(ht)(s(r),"item")),1),y("span",null,z(s(f)),1)]),key:"0"}:void 0]),1032,["layout"])]),default:m(()=>[s(P)?(o(),b(Zt,{key:0,class:"-m-6"})):T("",!0),s(r).length?(o(),b(s(t),{key:1,ref_key:"songList",ref:c,class:"-m-6","onPress:enter":s(x),onScrollBreakpoint:s(I)},null,8,["onPress:enter","onScrollBreakpoint"])):(o(),b(He,{key:2},{icon:m(()=>[_(W,{icon:s(Jo)},null,8,["icon"])]),default:m(()=>[$(" No songs recently played. "),vd]),_:1}))]),_:1})}}}),bd=["onDragenter","onDragleave","onDrop"],kd={key:0,class:"pb-4 space-y-3"},xd={class:"secondary block"},wd={class:"block relative",role:"button"},Sd=["accept"],Ad=R({__name:"UploadScreen",setup(a){const e=ve(()=>ye(()=>import("./Btn-2hiIT76k.js").then(w=>w.i),__vite__mapDeps([5,1,2]))),t=ve(()=>ye(()=>import("./UploadItem-D7WBI8fK.js"),__vite__mapDeps([14,1,2,3,15]))),n=Wo.join(","),{allowsUpload:l,mediaPathSetUp:i,queueFilesForUpload:r,handleDropEvent:c}=sn(),u=ne(Ps.state,"files"),f=D(!1),h=L(()=>u.value.filter(({status:w})=>w==="Errored").length>0),g=()=>f.value=l.value,x=w=>{var S,v;(v=(S=w.currentTarget)==null?void 0:S.contains)!=null&&v.call(S,w.relatedTarget)||(f.value=!1)},k=w=>{const S=w.target.files;S!=null&&S.length&&r(Array.from(S))},E=async w=>{f.value=!1,await c(w)},C=()=>Ps.retryAll(),I=()=>Ps.removeFailed();return(w,S)=>{const v=X("Icon");return o(),b(Ke,null,{header:m(()=>[_(je,{layout:"collapsed"},{controls:m(()=>[h.value?(o(),b(Gt,{key:0,uppercase:""},{default:m(()=>[_(s(e),{"data-testid":"upload-retry-all-btn",success:"",onClick:C},{default:m(()=>[_(v,{icon:s(ra)},null,8,["icon"]),$(" Retry All ")]),_:1}),_(s(e),{"data-testid":"upload-remove-all-btn",highlight:"",onClick:I},{default:m(()=>[_(v,{icon:s(ia)},null,8,["icon"]),$(" Remove Failed ")]),_:1})]),_:1})):T("",!0)]),default:m(()=>[$(" Upload Media ")]),_:1})]),default:m(()=>[s(i)?(o(),d("div",{key:0,class:_e([{droppable:f.value},"relative flex-1 flex flex-col"]),onDragenter:B(g,["prevent"]),onDragleave:B(x,["prevent"]),onDrop:B(E,["prevent"]),onDragover:S[0]||(S[0]=B(()=>{},["prevent"]))},[u.value.length?(o(),d("div",kd,[(o(!0),d(M,null,Q(u.value,P=>(o(),b(s(t),{key:P.id,file:P,"data-testid":"upload-item"},null,8,["file"]))),128))])):(o(),b(He,{key:1},{icon:m(()=>[_(v,{icon:s(en)},null,8,["icon"])]),default:m(()=>[$(" "+z(s(ro)?"Drop files or folders to upload":"Drop files to upload")+" ",1),y("span",xd,[y("a",wd,[$(" or click here to select songs "),y("input",{accept:s(n),class:"absolute opacity-0 w-full h-full z-[2] cursor-pointer left-0 top-0",multiple:"",name:"file[]",type:"file",onChange:k},null,40,Sd)])])]),_:1}))],42,bd)):(o(),b(He,{key:1},{icon:m(()=>[_(v,{icon:s(Ro)},null,8,["icon"])]),default:m(()=>[$(" No media path set. ")]),_:1}))]),_:1})}}}),Td=Z(Ad,[["__scopeId","data-v-6d142fd7"]]),Ed={},Cd={class:"text-2xl font-thin flex place-content-between mb-5"};function $d(a,e){return o(),d("section",null,[y("h3",Cd,[ce(a.$slots,"header")]),ce(a.$slots,"default")])}const xs=Z(Ed,[["render",$d]]),Id={key:0,class:"results"},Pd={key:0,class:"results"},Ld={key:1},Dd=R({__name:"SongExcerptResultsBlock",props:{playables:{default:()=>[]},query:{default:""},searching:{type:Boolean,default:!1}},setup(a){const e=a,t=L(()=>{switch(aa(e.playables)){case"episodes":return"Episodes";case"songs":return"Songs";default:return"Songs & Episodes"}}),{playables:n,query:l,searching:i}=le(e),{go:r}=be(),c=()=>r(`search/songs/?q=${l.value}`);return(u,f)=>(o(),b(xs,null,{header:m(()=>[$(z(t.value)+" ",1),s(n).length&&!s(i)?(o(),b(Fe,{key:0,"data-testid":"view-all-songs-btn",highlight:"",rounded:"",small:"",onClick:B(c,["prevent"])},{default:m(()=>[$(" View All ")]),_:1},8,["onClick"])):T("",!0)]),default:m(()=>[s(i)?(o(),d("ul",Id,[(o(),d(M,null,Q(6,h=>y("li",{key:h},[_(bs)])),64))])):(o(),d(M,{key:1},[s(n).length?(o(),d("ul",Pd,[(o(!0),d(M,null,Q(s(n),h=>(o(),d("li",{key:h.id},[_(ys,{playable:h},null,8,["playable"])]))),128))])):(o(),d("p",Ld,"None found."))],64))]),_:1}))}}),Rd=Z(Dd,[["__scopeId","data-v-aa412266"]]),Md={key:0,class:"results"},Od={key:0,class:"results"},Nd={key:1},Fd=R({__name:"ArtistExcerptResultsBlock",props:{artists:{default:()=>[]},searching:{type:Boolean,default:!1}},setup(a){const e=a,{artists:t,searching:n}=le(e);return(l,i)=>(o(),b(xs,null,{header:m(()=>[$("Artists")]),default:m(()=>[s(n)?(o(),d("ul",Md,[(o(),d(M,null,Q(6,r=>y("li",{key:r},[_(dt,{layout:"compact"})])),64))])):(o(),d(M,{key:1},[s(t).length?(o(),d("ul",Od,[(o(!0),d(M,null,Q(s(t),r=>(o(),d("li",{key:r.id},[_(fn,{artist:r,layout:"compact"},null,8,["artist"])]))),128))])):(o(),d("p",Nd,"None found."))],64))]),_:1}))}}),Ud=Z(Fd,[["__scopeId","data-v-3f8463ad"]]),Bd={key:0,class:"results"},Vd={key:0,class:"results"},Hd={key:1},zd=R({__name:"AlbumExcerptResultsBlock",props:{albums:{default:()=>[]},searching:{type:Boolean,default:!1}},setup(a){const e=a,{albums:t,searching:n}=le(e);return(l,i)=>(o(),b(xs,null,{header:m(()=>[$("Albums")]),default:m(()=>[s(n)?(o(),d("ul",Bd,[(o(),d(M,null,Q(6,r=>y("li",{key:r},[_(dt,{layout:"compact"})])),64))])):(o(),d(M,{key:1},[s(t).length?(o(),d("ul",Vd,[(o(!0),d(M,null,Q(s(t),r=>(o(),d("li",{key:r.id},[_(ks,{album:r,layout:"compact"},null,8,["album"])]))),128))])):(o(),d("p",Hd,"None found."))],64))]),_:1}))}}),Gd=Z(zd,[["__scopeId","data-v-8b1a573b"]]),Yd=["href"],qd={class:"text-k-text-secondary"},Wd=["src"],jd=R({__name:"PodcastCard",props:{podcast:{},layout:{default:"full"}},setup(a){const e=a,{podcast:t,layout:n}=le(e),{go:l}=be(),i=()=>l(`/podcasts/${t.value.id}`);return(r,c)=>(o(),b(pn,{entity:s(t),layout:s(n),title:`${s(t).title} by ${s(t).author}`,onClick:i,class:"cursor-pointer"},{name:m(()=>[y("a",{href:`#/podcasts/${s(t).id}`,class:"font-medium","data-testid":"title"},z(s(t).title),9,Yd),y("span",qd,z(s(t).author),1)]),thumbnail:m(()=>[y("img",{src:s(t).image,class:"aspect-square w-[80px] object-cover rounded-lg",alt:"Podcast image"},null,8,Wd)]),_:1},8,["entity","layout","title"]))}}),Kd={key:0,class:"results"},Qd={key:0,class:"results"},Xd={key:1},Zd=R({__name:"PodcastExcerptResultsBlock",props:{podcasts:{default:()=>[]},searching:{type:Boolean,default:!1}},setup(a){const e=a,{podcasts:t,searching:n}=le(e);return(l,i)=>(o(),b(xs,null,{header:m(()=>[$("Podcasts")]),default:m(()=>[s(n)?(o(),d("ul",Kd,[(o(),d(M,null,Q(6,r=>y("li",{key:r},[_(dt,{layout:"compact"})])),64))])):(o(),d(M,{key:1},[s(t).length?(o(),d("ul",Qd,[(o(!0),d(M,null,Q(s(t),r=>(o(),d("li",{key:r.id},[_(jd,{podcast:r,layout:"compact"},null,8,["podcast"])]))),128))])):(o(),d("p",Xd,"None found."))],64))]),_:1}))}}),Jd=Z(Zd,[["__scopeId","data-v-049ae759"]]),ep={key:0},tp={class:"font-thin"},sp={key:1},np={key:0,class:"space-y-8"},ap=y("span",{class:"secondary d-block"},"all in one place.",-1),op=R({__name:"SearchExcerptsScreen",setup(a){const e=ne(Bn.state,"excerpt"),t=D(""),n=D(!1),l=async()=>{n.value=!0,await Bn.excerptSearch(t.value),n.value=!1};return pe.on("SEARCH_KEYWORDS_CHANGED",async i=>{t.value=i,await l()}).on("SONGS_DELETED",async i=>{me.intersectionBy(i,e.value.playables,"id").length!==0&&await l()}),(i,r)=>{const c=X("Icon");return o(),b(Ke,null,{header:m(()=>[_(je,{layout:"collapsed"},{default:m(()=>[t.value?(o(),d("span",ep,[$("Searching for "),y("span",tp,z(t.value),1)])):(o(),d("span",sp,"Search"))]),_:1})]),default:m(()=>[t.value?(o(),d("div",np,[_(Rd,{query:t.value,searching:n.value,playables:e.value.playables,"data-testid":"song-excerpts"},null,8,["query","searching","playables"]),_(Ud,{artists:e.value.artists,searching:n.value,"data-testid":"artist-excerpts"},null,8,["artists","searching"]),_(Gd,{albums:e.value.albums,searching:n.value,"data-testid":"album-excerpts"},null,8,["albums","searching"]),_(Jd,{podcasts:e.value.podcasts,searching:n.value,"data-testid":"podcast-excerpts"},null,8,["podcasts","searching"])])):(o(),b(He,{key:1},{icon:m(()=>[_(c,{icon:s(Vs)},null,8,["icon"])]),default:m(()=>[$(" Find songs, artists, and albums, "),ap]),_:1}))]),_:1})}}});/*! @license DOMPurify 3.1.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.4/LICENSE */const{entries:Va,setPrototypeOf:Kn,isFrozen:lp,getPrototypeOf:rp,getOwnPropertyDescriptor:ip}=Object;let{freeze:Me,seal:We,create:Ha}=Object,{apply:js,construct:Ks}=typeof Reflect<"u"&&Reflect;Me||(Me=function(e){return e});We||(We=function(e){return e});js||(js=function(e,t,n){return e.apply(t,n)});Ks||(Ks=function(e,t){return new e(...t)});const os=ze(Array.prototype.forEach),Qn=ze(Array.prototype.pop),Ft=ze(Array.prototype.push),cs=ze(String.prototype.toLowerCase),Ds=ze(String.prototype.toString),Xn=ze(String.prototype.match),Ut=ze(String.prototype.replace),cp=ze(String.prototype.indexOf),up=ze(String.prototype.trim),Qe=ze(Object.prototype.hasOwnProperty),Re=ze(RegExp.prototype.test),Bt=dp(TypeError);function Zn(a){return typeof a=="number"&&isNaN(a)}function ze(a){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),l=1;l<t;l++)n[l-1]=arguments[l];return js(a,e,n)}}function dp(a){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ks(a,t)}}function J(a,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cs;Kn&&Kn(a,null);let n=e.length;for(;n--;){let l=e[n];if(typeof l=="string"){const i=t(l);i!==l&&(lp(e)||(e[n]=i),l=i)}a[l]=!0}return a}function pp(a){for(let e=0;e<a.length;e++)Qe(a,e)||(a[e]=null);return a}function vt(a){const e=Ha(null);for(const[t,n]of Va(a))Qe(a,t)&&(Array.isArray(n)?e[t]=pp(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=vt(n):e[t]=n);return e}function ls(a,e){for(;a!==null;){const n=ip(a,e);if(n){if(n.get)return ze(n.get);if(typeof n.value=="function")return ze(n.value)}a=rp(a)}function t(){return null}return t}const Jn=Me(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Rs=Me(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ms=Me(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),fp=Me(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Os=Me(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),_p=Me(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ea=Me(["#text"]),ta=Me(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ns=Me(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),sa=Me(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),rs=Me(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hp=We(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mp=We(/<%[\w\W]*|[\w\W]*%>/gm),gp=We(/\${[\w\W]*}/gm),vp=We(/^data-[\-\w.\u00B7-\uFFFF]/),yp=We(/^aria-[\-\w]+$/),za=We(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),bp=We(/^(?:\w+script|data):/i),kp=We(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ga=We(/^html$/i),xp=We(/^[a-z][.\w]*(-[.\w]+)+$/i);var na=Object.freeze({__proto__:null,MUSTACHE_EXPR:hp,ERB_EXPR:mp,TMPLIT_EXPR:gp,DATA_ATTR:vp,ARIA_ATTR:yp,IS_ALLOWED_URI:za,IS_SCRIPT_OR_DATA:bp,ATTR_WHITESPACE:kp,DOCTYPE_NAME:Ga,CUSTOM_ELEMENT:xp});const gt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},wp=function(){return typeof window>"u"?null:window},Sp=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const l="data-tt-policy-suffix";t&&t.hasAttribute(l)&&(n=t.getAttribute(l));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function Ya(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wp();const e=V=>Ya(V);if(e.version="3.1.4",e.removed=[],!a||!a.document||a.document.nodeType!==gt.document)return e.isSupported=!1,e;let{document:t}=a;const n=t,l=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:r,Node:c,Element:u,NodeFilter:f,NamedNodeMap:h=a.NamedNodeMap||a.MozNamedAttrMap,HTMLFormElement:g,DOMParser:x,trustedTypes:k}=a,E=u.prototype,C=ls(E,"cloneNode"),I=ls(E,"nextSibling"),w=ls(E,"childNodes"),S=ls(E,"parentNode");if(typeof r=="function"){const V=t.createElement("template");V.content&&V.content.ownerDocument&&(t=V.content.ownerDocument)}let v,P="";const{implementation:se,createNodeIterator:O,createDocumentFragment:W,getElementsByTagName:ae}=t,{importNode:U}=n;let ee={};e.isSupported=typeof Va=="function"&&typeof S=="function"&&se&&se.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Y,ERB_EXPR:te,TMPLIT_EXPR:ke,DATA_ATTR:ue,ARIA_ATTR:Ge,IS_SCRIPT_OR_DATA:Le,ATTR_WHITESPACE:pt,CUSTOM_ELEMENT:Se}=na;let{IS_ALLOWED_URI:Ue}=na,re=null;const $e=J({},[...Jn,...Rs,...Ms,...Os,...ea]);let he=null;const ft=J({},[...ta,...Ns,...sa,...rs]);let j=Object.seal(Ha(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),fe=null,ot=null,tt=!0,N=!0,H=!1,de=!0,oe=!1,ie=!0,Ae=!1,Rt=!1,ws=!1,St=!1,Jt=!1,es=!1,_n=!0,hn=!1;const qa="user-content-";let Ss=!0,Mt=!1,At={},Tt=null;const mn=J({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let gn=null;const vn=J({},["audio","video","img","source","image","track"]);let As=null;const yn=J({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ts="http://www.w3.org/1998/Math/MathML",ss="http://www.w3.org/2000/svg",lt="http://www.w3.org/1999/xhtml";let Et=lt,Ts=!1,Es=null;const Wa=J({},[ts,ss,lt],Ds);let Ot=null;const ja=["application/xhtml+xml","text/html"],Ka="text/html";let xe=null,Ct=null;const bn=255,Qa=t.createElement("form"),kn=function(p){return p instanceof RegExp||p instanceof Function},Cs=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ct&&Ct===p)){if((!p||typeof p!="object")&&(p={}),p=vt(p),Ot=ja.indexOf(p.PARSER_MEDIA_TYPE)===-1?Ka:p.PARSER_MEDIA_TYPE,xe=Ot==="application/xhtml+xml"?Ds:cs,re=Qe(p,"ALLOWED_TAGS")?J({},p.ALLOWED_TAGS,xe):$e,he=Qe(p,"ALLOWED_ATTR")?J({},p.ALLOWED_ATTR,xe):ft,Es=Qe(p,"ALLOWED_NAMESPACES")?J({},p.ALLOWED_NAMESPACES,Ds):Wa,As=Qe(p,"ADD_URI_SAFE_ATTR")?J(vt(yn),p.ADD_URI_SAFE_ATTR,xe):yn,gn=Qe(p,"ADD_DATA_URI_TAGS")?J(vt(vn),p.ADD_DATA_URI_TAGS,xe):vn,Tt=Qe(p,"FORBID_CONTENTS")?J({},p.FORBID_CONTENTS,xe):mn,fe=Qe(p,"FORBID_TAGS")?J({},p.FORBID_TAGS,xe):{},ot=Qe(p,"FORBID_ATTR")?J({},p.FORBID_ATTR,xe):{},At=Qe(p,"USE_PROFILES")?p.USE_PROFILES:!1,tt=p.ALLOW_ARIA_ATTR!==!1,N=p.ALLOW_DATA_ATTR!==!1,H=p.ALLOW_UNKNOWN_PROTOCOLS||!1,de=p.ALLOW_SELF_CLOSE_IN_ATTR!==!1,oe=p.SAFE_FOR_TEMPLATES||!1,ie=p.SAFE_FOR_XML!==!1,Ae=p.WHOLE_DOCUMENT||!1,St=p.RETURN_DOM||!1,Jt=p.RETURN_DOM_FRAGMENT||!1,es=p.RETURN_TRUSTED_TYPE||!1,ws=p.FORCE_BODY||!1,_n=p.SANITIZE_DOM!==!1,hn=p.SANITIZE_NAMED_PROPS||!1,Ss=p.KEEP_CONTENT!==!1,Mt=p.IN_PLACE||!1,Ue=p.ALLOWED_URI_REGEXP||za,Et=p.NAMESPACE||lt,j=p.CUSTOM_ELEMENT_HANDLING||{},p.CUSTOM_ELEMENT_HANDLING&&kn(p.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(j.tagNameCheck=p.CUSTOM_ELEMENT_HANDLING.tagNameCheck),p.CUSTOM_ELEMENT_HANDLING&&kn(p.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(j.attributeNameCheck=p.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),p.CUSTOM_ELEMENT_HANDLING&&typeof p.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(j.allowCustomizedBuiltInElements=p.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),oe&&(N=!1),Jt&&(St=!0),At&&(re=J({},ea),he=[],At.html===!0&&(J(re,Jn),J(he,ta)),At.svg===!0&&(J(re,Rs),J(he,Ns),J(he,rs)),At.svgFilters===!0&&(J(re,Ms),J(he,Ns),J(he,rs)),At.mathMl===!0&&(J(re,Os),J(he,sa),J(he,rs))),p.ADD_TAGS&&(re===$e&&(re=vt(re)),J(re,p.ADD_TAGS,xe)),p.ADD_ATTR&&(he===ft&&(he=vt(he)),J(he,p.ADD_ATTR,xe)),p.ADD_URI_SAFE_ATTR&&J(As,p.ADD_URI_SAFE_ATTR,xe),p.FORBID_CONTENTS&&(Tt===mn&&(Tt=vt(Tt)),J(Tt,p.FORBID_CONTENTS,xe)),Ss&&(re["#text"]=!0),Ae&&J(re,["html","head","body"]),re.table&&(J(re,["tbody"]),delete fe.tbody),p.TRUSTED_TYPES_POLICY){if(typeof p.TRUSTED_TYPES_POLICY.createHTML!="function")throw Bt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof p.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Bt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=p.TRUSTED_TYPES_POLICY,P=v.createHTML("")}else v===void 0&&(v=Sp(k,l)),v!==null&&typeof P=="string"&&(P=v.createHTML(""));Me&&Me(p),Ct=p}},xn=J({},["mi","mo","mn","ms","mtext"]),wn=J({},["foreignobject","annotation-xml"]),Xa=J({},["title","style","font","a","script"]),Sn=J({},[...Rs,...Ms,...fp]),An=J({},[...Os,..._p]),Za=function(p){let A=S(p);(!A||!A.tagName)&&(A={namespaceURI:Et,tagName:"template"});const F=cs(p.tagName),K=cs(A.tagName);return Es[p.namespaceURI]?p.namespaceURI===ss?A.namespaceURI===lt?F==="svg":A.namespaceURI===ts?F==="svg"&&(K==="annotation-xml"||xn[K]):!!Sn[F]:p.namespaceURI===ts?A.namespaceURI===lt?F==="math":A.namespaceURI===ss?F==="math"&&wn[K]:!!An[F]:p.namespaceURI===lt?A.namespaceURI===ss&&!wn[K]||A.namespaceURI===ts&&!xn[K]?!1:!An[F]&&(Xa[F]||!Sn[F]):!!(Ot==="application/xhtml+xml"&&Es[p.namespaceURI]):!1},Ye=function(p){Ft(e.removed,{element:p});try{p.parentNode.removeChild(p)}catch{p.remove()}},ns=function(p,A){try{Ft(e.removed,{attribute:A.getAttributeNode(p),from:A})}catch{Ft(e.removed,{attribute:null,from:A})}if(A.removeAttribute(p),p==="is"&&!he[p])if(St||Jt)try{Ye(A)}catch{}else try{A.setAttribute(p,"")}catch{}},Tn=function(p){let A=null,F=null;if(ws)p="<remove></remove>"+p;else{const Te=Xn(p,/^[\r\n\t ]+/);F=Te&&Te[0]}Ot==="application/xhtml+xml"&&Et===lt&&(p='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+p+"</body></html>");const K=v?v.createHTML(p):p;if(Et===lt)try{A=new x().parseFromString(K,Ot)}catch{}if(!A||!A.documentElement){A=se.createDocument(Et,"template",null);try{A.documentElement.innerHTML=Ts?P:K}catch{}}const Ie=A.body||A.documentElement;return p&&F&&Ie.insertBefore(t.createTextNode(F),Ie.childNodes[0]||null),Et===lt?ae.call(A,Ae?"html":"body")[0]:Ae?A.documentElement:Ie},En=function(p){return O.call(p.ownerDocument||p,p,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},Cn=function(p){return p instanceof g&&(typeof p.__depth<"u"&&typeof p.__depth!="number"||typeof p.__removalCount<"u"&&typeof p.__removalCount!="number"||typeof p.nodeName!="string"||typeof p.textContent!="string"||typeof p.removeChild!="function"||!(p.attributes instanceof h)||typeof p.removeAttribute!="function"||typeof p.setAttribute!="function"||typeof p.namespaceURI!="string"||typeof p.insertBefore!="function"||typeof p.hasChildNodes!="function")},$n=function(p){return typeof c=="function"&&p instanceof c},rt=function(p,A,F){ee[p]&&os(ee[p],K=>{K.call(e,A,F,Ct)})},In=function(p){let A=null;if(rt("beforeSanitizeElements",p,null),Cn(p))return Ye(p),!0;const F=xe(p.nodeName);if(rt("uponSanitizeElement",p,{tagName:F,allowedTags:re}),p.hasChildNodes()&&!$n(p.firstElementChild)&&Re(/<[/\w]/g,p.innerHTML)&&Re(/<[/\w]/g,p.textContent)||p.nodeType===gt.progressingInstruction||ie&&p.nodeType===gt.comment&&Re(/<[/\w]/g,p.data))return Ye(p),!0;if(!re[F]||fe[F]){if(!fe[F]&&Ln(F)&&(j.tagNameCheck instanceof RegExp&&Re(j.tagNameCheck,F)||j.tagNameCheck instanceof Function&&j.tagNameCheck(F)))return!1;if(Ss&&!Tt[F]){const K=S(p)||p.parentNode,Ie=w(p)||p.childNodes;if(Ie&&K){const Te=Ie.length;for(let Oe=Te-1;Oe>=0;--Oe){const Ne=C(Ie[Oe],!0);Ne.__removalCount=(p.__removalCount||0)+1,K.insertBefore(Ne,I(p))}}}return Ye(p),!0}return p instanceof u&&!Za(p)||(F==="noscript"||F==="noembed"||F==="noframes")&&Re(/<\/no(script|embed|frames)/i,p.innerHTML)?(Ye(p),!0):(oe&&p.nodeType===gt.text&&(A=p.textContent,os([Y,te,ke],K=>{A=Ut(A,K," ")}),p.textContent!==A&&(Ft(e.removed,{element:p.cloneNode()}),p.textContent=A)),rt("afterSanitizeElements",p,null),!1)},Pn=function(p,A,F){if(_n&&(A==="id"||A==="name")&&(F in t||F in Qa||F==="__depth"||F==="__removalCount"))return!1;if(!(N&&!ot[A]&&Re(ue,A))){if(!(tt&&Re(Ge,A))){if(!he[A]||ot[A]){if(!(Ln(p)&&(j.tagNameCheck instanceof RegExp&&Re(j.tagNameCheck,p)||j.tagNameCheck instanceof Function&&j.tagNameCheck(p))&&(j.attributeNameCheck instanceof RegExp&&Re(j.attributeNameCheck,A)||j.attributeNameCheck instanceof Function&&j.attributeNameCheck(A))||A==="is"&&j.allowCustomizedBuiltInElements&&(j.tagNameCheck instanceof RegExp&&Re(j.tagNameCheck,F)||j.tagNameCheck instanceof Function&&j.tagNameCheck(F))))return!1}else if(!As[A]){if(!Re(Ue,Ut(F,pt,""))){if(!((A==="src"||A==="xlink:href"||A==="href")&&p!=="script"&&cp(F,"data:")===0&&gn[p])){if(!(H&&!Re(Le,Ut(F,pt,"")))){if(F)return!1}}}}}}return!0},Ln=function(p){return p!=="annotation-xml"&&Xn(p,Se)},Dn=function(p){rt("beforeSanitizeAttributes",p,null);const{attributes:A}=p;if(!A)return;const F={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:he};let K=A.length;for(;K--;){const Ie=A[K],{name:Te,namespaceURI:Oe,value:Ne}=Ie,Nt=xe(Te);let De=Te==="value"?Ne:up(Ne);if(F.attrName=Nt,F.attrValue=De,F.keepAttr=!0,F.forceKeepAttr=void 0,rt("uponSanitizeAttribute",p,F),De=F.attrValue,F.forceKeepAttr||(ns(Te,p),!F.keepAttr))continue;if(!de&&Re(/\/>/i,De)){ns(Te,p);continue}if(ie&&Re(/((--!?|])>)|<\/(style|title)/i,De)){ns(Te,p);continue}oe&&os([Y,te,ke],Mn=>{De=Ut(De,Mn," ")});const Rn=xe(p.nodeName);if(Pn(Rn,Nt,De)){if(hn&&(Nt==="id"||Nt==="name")&&(ns(Te,p),De=qa+De),v&&typeof k=="object"&&typeof k.getAttributeType=="function"&&!Oe)switch(k.getAttributeType(Rn,Nt)){case"TrustedHTML":{De=v.createHTML(De);break}case"TrustedScriptURL":{De=v.createScriptURL(De);break}}try{Oe?p.setAttributeNS(Oe,Te,De):p.setAttribute(Te,De),Cn(p)?Ye(p):Qn(e.removed)}catch{}}}rt("afterSanitizeAttributes",p,null)},Ja=function V(p){let A=null;const F=En(p);for(rt("beforeSanitizeShadowDOM",p,null);A=F.nextNode();){if(rt("uponSanitizeShadowNode",A,null),In(A))continue;const K=S(A);A.nodeType===gt.element&&(K&&K.__depth?A.__depth=(A.__removalCount||0)+K.__depth+1:A.__depth=1),(A.__depth>=bn||A.__depth<0||Zn(A.__depth))&&Ye(A),A.content instanceof i&&(A.content.__depth=A.__depth,V(A.content)),Dn(A)}rt("afterSanitizeShadowDOM",p,null)};return e.sanitize=function(V){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=null,F=null,K=null,Ie=null;if(Ts=!V,Ts&&(V="<!-->"),typeof V!="string"&&!$n(V))if(typeof V.toString=="function"){if(V=V.toString(),typeof V!="string")throw Bt("dirty is not a string, aborting")}else throw Bt("toString is not a function");if(!e.isSupported)return V;if(Rt||Cs(p),e.removed=[],typeof V=="string"&&(Mt=!1),Mt){if(V.nodeName){const Ne=xe(V.nodeName);if(!re[Ne]||fe[Ne])throw Bt("root node is forbidden and cannot be sanitized in-place")}}else if(V instanceof c)A=Tn("<!---->"),F=A.ownerDocument.importNode(V,!0),F.nodeType===gt.element&&F.nodeName==="BODY"||F.nodeName==="HTML"?A=F:A.appendChild(F);else{if(!St&&!oe&&!Ae&&V.indexOf("<")===-1)return v&&es?v.createHTML(V):V;if(A=Tn(V),!A)return St?null:es?P:""}A&&ws&&Ye(A.firstChild);const Te=En(Mt?V:A);for(;K=Te.nextNode();){if(In(K))continue;const Ne=S(K);K.nodeType===gt.element&&(Ne&&Ne.__depth?K.__depth=(K.__removalCount||0)+Ne.__depth+1:K.__depth=1),(K.__depth>=bn||K.__depth<0||Zn(K.__depth))&&Ye(K),K.content instanceof i&&(K.content.__depth=K.__depth,Ja(K.content)),Dn(K)}if(Mt)return V;if(St){if(Jt)for(Ie=W.call(A.ownerDocument);A.firstChild;)Ie.appendChild(A.firstChild);else Ie=A;return(he.shadowroot||he.shadowrootmode)&&(Ie=U.call(n,Ie,!0)),Ie}let Oe=Ae?A.outerHTML:A.innerHTML;return Ae&&re["!doctype"]&&A.ownerDocument&&A.ownerDocument.doctype&&A.ownerDocument.doctype.name&&Re(Ga,A.ownerDocument.doctype.name)&&(Oe="<!DOCTYPE "+A.ownerDocument.doctype.name+`>
`+Oe),oe&&os([Y,te,ke],Ne=>{Oe=Ut(Oe,Ne," ")}),v&&es?v.createHTML(Oe):Oe},e.setConfig=function(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Cs(V),Rt=!0},e.clearConfig=function(){Ct=null,Rt=!1},e.isValidAttribute=function(V,p,A){Ct||Cs({});const F=xe(V),K=xe(p);return Pn(F,K,A)},e.addHook=function(V,p){typeof p=="function"&&(ee[V]=ee[V]||[],Ft(ee[V],p))},e.removeHook=function(V){if(ee[V])return Qn(ee[V])},e.removeHooks=function(V){ee[V]&&(ee[V]=[])},e.removeAllHooks=function(){ee={}},e}var Ap=Ya();const Tp=["href"],Ep={class:"hidden md:block md:flex-[0_0_128px]"},Cp=["src"],$p={class:"flex-1"},Ip={class:"text-3xl font-bold"},Pp={class:"mt-2"},Lp={class:"opacity-70"},Dp=["datetime","title"],Rp=["innerHTML"],Mp=R({__name:"PodcastItem",props:{podcast:{}},setup(a){const{podcast:e}=a,t=L(()=>Ap.sanitize(e.description)),n=L(()=>e.state.current_episode?Mo(new Date(e.last_played_at)):null);return(l,i)=>{const r=Ce("koel-new-tab");return o(),d("a",{"data-testid":"podcast-item",class:"flex gap-5 p-5 rounded-lg border border-white/5 hover:bg-white/10 bg-white/5 !text-k-text-primary !hover:text-k-text-primary",href:`#/podcasts/${l.podcast.id}`},[y("aside",Ep,[y("img",{src:l.podcast.image,alt:"Podcast image",class:"w-[128px] aspect-square object-cover rounded-lg"},null,8,Cp)]),y("main",$p,[y("header",null,[y("h3",Ip,z(l.podcast.title),1),y("p",Pp,[$(z(l.podcast.author)+" ",1),n.value?(o(),d(M,{key:0},[$(" • "),y("span",Lp,[$(" Last played "),y("time",{datetime:l.podcast.last_played_at,title:l.podcast.last_played_at},z(n.value),9,Dp)])],64)):T("",!0)])]),G(y("div",{class:"description text-k-text-secondary mt-3 line-clamp-3",innerHTML:t.value},null,8,Rp),[[r]])])],8,Tp)}}}),Op=Z(Mp,[["__scopeId","data-v-66b3bed5"]]),Np={},Fp={class:"skeleton flex gap-5 p-5 rounded-lg border border-white/5 hover:bg-white/10 bg-white/5 !text-k-text-primary !hover:text-k-text-primary"},Up=Wt('<aside class="flex-[0_0_128px]"><div class="pulse aspect-square rounded-lg"></div></aside><main class="flex-1"><header><h3 class="pulse w-2/3 mt-4 h-8"></h3><p class="mt-2 pulse w-1/4 h-6"></p></header><div class="space-y-2 mt-3"><p class="pulse w-full h-4"></p><p class="pulse w-1/5 h-4"></p></div></main>',2),Bp=[Up];function Vp(a,e){return o(),d("article",Fp,Bp)}const Hp=Z(Np,[["render",Vp]]),zp={class:"mr-2"},Gp=["onClick"],Yp={key:0,class:"opacity-80"},qp=R({__name:"PodcastListSorter",props:{field:{default:"last_played_at"},order:{default:"asc"}},emits:["sort"],setup(a,{emit:e}){const t=a,{field:n,order:l}=le(t),i=D(),r=D(),{setup:c,teardown:u,trigger:f,hide:h}=ln(i,r,{placement:"bottom-end",useArrow:!1,autoTrigger:!1}),g=[{label:"Last played",field:"last_played_at"},{label:"Subscribed",field:"subscribed_at"},{label:"Title",field:"title"},{label:"Author",field:"author"}],x=L(()=>{var C;return(C=g.find(I=>I.field===n.value))==null?void 0:C.label}),k=C=>{e("sort",C),h()},E=C=>C===n.value;return ut(()=>r.value&&c()),hs(()=>u()),(C,I)=>{const w=X("Icon");return o(),d("article",null,[y("button",{ref_key:"button",ref:i,class:"border px-3 rounded-md h-full border-white/10 w-full focus:text-k-highlight text-k-text-secondary active:text-white focus:text-white",title:"Sort",onClick:I[0]||(I[0]=B((...S)=>s(f)&&s(f)(...S),["stop"]))},[y("span",zp,z(x.value),1),_(w,{icon:s(l)==="asc"?s(Us):s(Bs)},null,8,["icon"])],512),_(s(gs),{onTrigger:s(h)},{default:m(()=>[y("menu",{ref_key:"menu",ref:r,class:"context-menu normal-case tracking-normal"},[(o(),d(M,null,Q(g,S=>y("li",{key:S.label,class:_e([E(S.field)&&"active","cursor-pointer flex justify-between"]),onClick:v=>k(S.field)},[y("span",null,z(S.label),1),E(S.field)?(o(),d("span",Yp,[s(l)==="asc"?(o(),b(w,{key:0,class:"",icon:s(Us)},null,8,["icon"])):(o(),b(w,{key:1,icon:s(Bs)},null,8,["icon"]))])):T("",!0)],10,Gp)),64))],512)]),_:1},8,["onTrigger"])])}}}),Wp={key:0,class:"flex gap-2"},jp=y("span",{class:"secondary d-block"},"Add a podcast to get started.",-1),Kp={key:1,class:"-m-6 p-6 overflow-auto space-y-3 min-h-full"},Qp=R({__name:"PodcastListScreen",setup(a){const{onScreenActivated:e}=be(),t=La([],["title","description","author"]);let n=!1;const l=D(!1),i=D(""),r=ps({field:"last_played_at",order:"desc"}),c=L(()=>!l.value&&f.value.length===0),u=async()=>{if(!l.value){l.value=!0;try{t.setDocuments(await Vn.fetchAll())}catch(k){qe().handleHttpError(k)}finally{l.value=!1}}},f=L(()=>me.orderBy(i.value?t.search(i.value):Vn.state.podcasts,r.field,r.order)),h=k=>i.value=k,g=()=>pe.emit("MODAL_SHOW_ADD_PODCAST_FORM"),x=k=>{r.field=k,r.order=r.order==="asc"?"desc":"asc"};return e("Podcasts",async()=>{n||(n=!0,await u())}),(k,E)=>{const C=X("Icon"),I=Ce("koel-overflow-fade");return o(),b(Ke,null,{header:m(()=>[_(je,{layout:"collapsed"},{controls:m(()=>[l.value?T("",!0):(o(),d("div",Wp,[_(qp,{field:r.field,order:r.order,onSort:x},null,8,["field","order"]),_(Gr,{onChange:h}),_(Gt,{uppercase:""},{default:m(()=>[_(Fe,{onClick:B(g,["prevent"]),highlight:""},{default:m(()=>[_(C,{icon:s(Oo),"fixed-width":""},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})]))]),default:m(()=>[$(" Podcasts ")]),_:1})]),default:m(()=>[c.value?(o(),b(He,{key:0},{icon:m(()=>[_(C,{icon:s(Js)},null,8,["icon"])]),default:m(()=>[$(" No podcasts found. "),jp]),_:1})):G((o(),d("div",Kp,[l.value?(o(),d(M,{key:0},Q(5,w=>_(Hp,{key:w})),64)):(o(!0),d(M,{key:1},Q(f.value,w=>(o(),b(Op,{podcast:w,key:w.id},null,8,["podcast"]))),128))])),[[I]])]),_:1})}}}),Xp={id:"mainContent",class:"flex-1 relative overflow-hidden"},Zp=R({__name:"MainContent",setup(a){const e=ve(()=>ye(()=>import("./UserListScreen-Br9tVcCd.js"),__vite__mapDeps([16,1,2,3,17,5,4,6,7,8,18,9,10,11,12,13,19]))),t=ve(()=>ye(()=>import("./AlbumArtOverlay-DiDZaPF7.js"),__vite__mapDeps([20,1,2]))),n=ve(()=>ye(()=>import("./AlbumScreen-DVNZ1Tqi.js"),__vite__mapDeps([21,1,2,11,5,4,3,6,7,8,22,23,24,9,10,12,13]))),l=ve(()=>ye(()=>import("./ArtistScreen-DpsttM1u.js"),__vite__mapDeps([25,1,2,11,5,4,3,6,7,8,22,23,24,9,10,12,13]))),i=ve(()=>ye(()=>import("./GenreScreen-Dx5VMAVp.js"),__vite__mapDeps([26,3,1,2,5,4,6,7,8,22,9,10,11,12,13]))),r=ve(()=>ye(()=>import("./PodcastScreen-DkvF4lJg.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,22,9,10,11,12,13,28]))),c=ve(()=>ye(()=>import("./EpisodeScreen-BCkM9__r.js"),__vite__mapDeps([29,1,2,3,11,4,5,6,7,8,22,9,10,12,13,30]))),u=ve(()=>ye(()=>import("./SettingsScreen-Bz47CDJ0.js"),__vite__mapDeps([31,1,2,6,5,4,3,7,8,9,32,10,11,12,13]))),f=ve(()=>ye(()=>import("./ProfileScreen-D0EcfZiE.js"),__vite__mapDeps([33,1,2,34,4,3,5,6,7,8,9,10,11,12,13]))),h=ve(()=>ye(()=>import("./YouTubeScreen-NKEIAId1.js"),__vite__mapDeps([35,1,2,5,4,3,6,7,8,9,10,11,12,13,36]))),g=ve(()=>ye(()=>import("./SearchSongResultsScreen-hxdX67IE.js"),__vite__mapDeps([37,1,2,4,3,5,6,7,8,9,10,11,12,13]))),x=ve(()=>ye(()=>import("./NotFoundScreen-BKVjM1GT.js"),__vite__mapDeps([38,3,1,2,4,5,6,7,8,9,10,11,12,13]))),k=ve(()=>ye(()=>import("./VisualizerScreen-BcrJh-W-.js"),__vite__mapDeps([39,1,2,3,40,41,42]))),{useYouTube:E}=Na(),{onRouteChanged:C,getCurrentScreen:I}=be(),w=Xe(ya,D(void 0)),S=ne(_t.state,"show_album_art_overlay"),v=D("Home");return C(P=>v.value=P.screen),ut(()=>v.value=I()),(P,se)=>{var O;return o(),d("section",Xp,[v.value==="Visualizer"?(o(),b(s(k),{key:0})):T("",!0),S.value&&s(w)&&s(xt)(s(w))?(o(),b(s(t),{key:1,album:(O=s(w))==null?void 0:O.album_id},null,8,["album"])):T("",!0),G(_(_u,null,null,512),[[ge,v.value==="Home"]]),G(_(wu,null,null,512),[[ge,v.value==="Queue"]]),G(_(Ju,null,null,512),[[ge,v.value==="Songs"]]),G(_(Iu,null,null,512),[[ge,v.value==="Albums"]]),G(_(Lu,null,null,512),[[ge,v.value==="Artists"]]),G(_(_d,null,null,512),[[ge,v.value==="Playlist"]]),G(_(gd,null,null,512),[[ge,v.value==="Favorites"]]),G(_(yd,null,null,512),[[ge,v.value==="RecentlyPlayed"]]),G(_(Td,null,null,512),[[ge,v.value==="Upload"]]),G(_(op,null,null,512),[[ge,v.value==="Search.Excerpt"]]),G(_(s(i),null,null,512),[[ge,v.value==="Genre"]]),G(_(Qp,null,null,512),[[ge,v.value==="Podcasts"]]),v.value==="Genres"?(o(),b(Gu,{key:2})):T("",!0),v.value==="Search.Songs"?(o(),b(s(g),{key:3})):T("",!0),v.value==="Album"?(o(),b(s(n),{key:4})):T("",!0),v.value==="Artist"?(o(),b(s(l),{key:5})):T("",!0),v.value==="Settings"?(o(),b(s(u),{key:6})):T("",!0),v.value==="Profile"?(o(),b(s(f),{key:7})):T("",!0),v.value==="Podcast"?(o(),b(s(r),{key:8})):T("",!0),v.value==="Episode"?(o(),b(s(c),{key:9})):T("",!0),v.value==="Users"?(o(),b(s(e),{key:10})):T("",!0),s(E)?G((o(),b(s(h),{key:11},null,512)),[[ge,v.value==="YouTube"]]):T("",!0),v.value==="404"?(o(),b(s(x),{key:12})):T("",!0)])}}}),Jp={key:0,class:"view-profile rounded-full","data-testid":"view-profile-link",href:"/#/profile",title:"Profile and preferences"},ef=R({__name:"ProfileAvatar",setup(a){const{currentUser:e}=et();return(t,n)=>{const l=Ce("koel-tooltip");return s(e)?G((o(),d("a",Jp,[_(cn,{user:s(e),class:"p-0.5 border border-solid border-white/10 transition duration-200 ease-in-out hover:border-white/30 active:scale-95",width:"40"},null,8,["user"])])),[[l,void 0,void 0,{left:!0}]]):T("",!0)}}}),tf={key:0,class:"absolute w-[10px] aspect-square right-px top-px rounded-full bg-k-highlight","data-testid":"new-version-indicator"},sf=R({__name:"AboutKoelButton",setup(a){const{shouldNotifyNewVersion:e}=zl(),t=()=>pe.emit("MODAL_SHOW_ABOUT_KOEL");return(n,l)=>{const i=X("Icon"),r=Ce("koel-tooltip");return G((o(),b(vs,{title:s(e)?"New version available!":"About Koel",onClick:B(t,["prevent"])},{default:m(()=>[_(i,{icon:s(No)},null,8,["icon"]),s(e)?(o(),d("span",tf)):T("",!0)]),_:1},8,["title","onClick"])),[[r,void 0,void 0,{left:!0}]])}}}),nf=R({__name:"LogoutButton",setup(a){const e=()=>pe.emit("LOG_OUT");return(t,n)=>{const l=X("Icon"),i=Ce("koel-tooltip");return G((o(),b(vs,{title:"Log out",onClick:B(e,["prevent"])},{default:m(()=>[_(l,{icon:s(Fo)},null,8,["icon"])]),_:1},8,["onClick"])),[[i,void 0,void 0,{left:!0}]])}}}),af={class:"controls flex md:flex-col justify-between items-center md:w-[64px] md:py-6 tw:px-0 bg-black/5 md:border-l border-solid md:border-l-white/5 md:border-b-0 md:shadow-none z-[2] w-screen flex-row border-b border-b-white/5 border-l-0 shadow-xl py-0 px-6 h-k-header-height"},of={class:"btn-group"},lf={class:"btn-group"},rf={key:0,class:"panes py-8 px-6 overflow-auto bg-k-bg-secondary"},cf={id:"extraPanelLyrics","aria-labelledby":"extraTabLyrics",role:"tabpanel",tabindex:"0"},uf={id:"extraPanelArtist","aria-labelledby":"extraTabArtist",role:"tabpanel",tabindex:"0"},df={key:1},pf={id:"extraPanelAlbum","aria-labelledby":"extraTabAlbum",role:"tabpanel",tabindex:"0"},ff={key:1},_f={id:"extraPanelYouTube","aria-labelledby":"extraTabYouTube","data-testid":"extra-drawer-youtube",role:"tabpanel",tabindex:"0"},hf=R({__name:"ExtraDrawer",setup(a){const e=ve(()=>ye(()=>import("./LyricsPane-CTQI65D3.js"),__vite__mapDeps([43,1,2,4,3,5,6,7,8,44]))),t=ve(()=>ye(()=>import("./ArtistInfo-Lz5UFYmJ.js"),__vite__mapDeps([45,1,2,46,5,3,4,6,7,8,9,10,11,12,13]))),n=ve(()=>ye(()=>import("./AlbumInfo-r6keh5TY.js"),__vite__mapDeps([47,1,2,46,5,3,4,6,7,8,9,10,11,12,13]))),l=ve(()=>ye(()=>import("./YouTubeVideoList-DFqCEJ86.js").then(I=>I.Y),__vite__mapDeps([48,1,2,5]))),i=ve(()=>ye(()=>import("./ExtraDrawerTabHeader-mUuK_512.js"),__vite__mapDeps([49,1,2,3,4,5,6,7,8,9,10,11,12,13]))),{useYouTube:r}=Na(),c=Xe(ya,D(void 0)),u=D(null),f=D(),h=D(),g=L(()=>c.value&&xt(c.value)),x=L(()=>r.value&&g.value),k=async I=>{c.value=I,f.value=void 0,h.value=void 0;try{f.value=await It.resolve(I.artist_id),h.value=await Yt.resolve(I.album_id)}catch(w){qe().handleHttpError(w)}};Ve(c,I=>{!I||!xt(I)||k(I)},{immediate:!0}),Ve(u,I=>_t.active_extra_panel_tab=I);const E=()=>bt.any&&(u.value=null),C=()=>pe.emit("TOGGLE_SIDEBAR");return ut(()=>bt.any||(u.value=_t.active_extra_panel_tab)),(I,w)=>{const S=X("Icon");return o(),d("aside",{class:_e([{"showing-pane":u.value},"fixed sm:relative top-0 w-screen md:w-auto flex flex-col md:flex-row-reverse z-[2] text-k-text-secondary"])},[y("div",af,[y("div",of,[_(vs,{class:"md:hidden",onClick:B(C,["prevent"])},{default:m(()=>[_(S,{icon:s(Uo),"fixed-width":""},null,8,["icon"])]),_:1},8,["onClick"]),g.value?(o(),b(s(i),{key:0,modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=v=>u.value=v)},null,8,["modelValue"])):T("",!0)]),y("div",lf,[_(sf),_(nf),_(ef,{onClick:E})])]),g.value?G((o(),d("div",rf,[G(y("div",cf,[s(c)?(o(),b(s(e),{key:0,song:s(c)},null,8,["song"])):T("",!0)],512),[[ge,u.value==="Lyrics"]]),G(y("div",uf,[f.value?(o(),b(s(t),{key:0,artist:f.value,mode:"aside"},null,8,["artist"])):(o(),d("span",df,"Loading…"))],512),[[ge,u.value==="Artist"]]),G(y("div",pf,[h.value?(o(),b(s(n),{key:0,album:h.value,mode:"aside"},null,8,["album"])):(o(),d("span",ff,"Loading…"))],512),[[ge,u.value==="Album"]]),G(y("div",_f,[x.value&&s(c)?(o(),b(s(l),{key:0,song:s(c)},null,8,["song"])):T("",!0)],512),[[ge,u.value==="YouTube"]])],512)),[[ge,u.value]]):T("",!0)],2)}}}),mf=Z(hf,[["__scopeId","data-v-8b808ece"]]),gf={class:"relative flex flex-1 overflow-hidden"},vf=R({__name:"index",setup(a){const e=ve(()=>ye(()=>import("./ModalWrapper-nmqXkKy4.js"),__vite__mapDeps([50,1,2,5,51])));return(t,n)=>(o(),d("div",gf,[_(Ri),_(Zp),_(mf),_(s(e))]))}}),Df=Object.freeze(Object.defineProperty({__proto__:null,default:vf},Symbol.toStringTag,{value:"Module"}));export{hc as A,Gt as B,vs as E,Lt as F,je as S,vr as V,cn as _,ql as a,Ke as b,Xt as c,Zt as d,Ba as e,Na as f,He as g,Hr as h,Gr as i,Si as j,zl as k,Yr as l,qu as m,ks as n,xa as o,Ap as p,If as q,Pf as r,Lf as s,Df as t,Qt as u};
