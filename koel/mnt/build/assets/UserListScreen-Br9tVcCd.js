function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/Btn-2hiIT76k.js","assets/userStore-DI58VgZ6.js","assets/userStore-CkW9hTsr.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{t as O,v as V,u as A,h as w,x as M,o as t,n as r,W as d,B as s,T as n,V as U,y as l,U as c,z as o,Y as m,a0 as g,X as $,f as E,Q as R,a4 as L,a5 as F,ac as T,E as H,r as N,Z as P,a1 as B,a7 as G,a8 as W,_ as z}from"./userStore-DI58VgZ6.js";import{h as j,an as Y,P as Q}from"./index-bkhK2U3_.js";import{_ as X,S as Z,B as q,a as J,b as K}from"./index-Dvdk0smA.js";import{g as ee}from"./google-KJUKpri4.js";import{u as te,a as se,B as b,b as ae}from"./Btn-2hiIT76k.js";import{u as oe}from"./app-Dh_3ddLE.js";import{i as re}from"./invitationService-DTH8jUK0.js";import"./TextInput.vue_vue_type_script_setup_true_lang-Cn7Fe5WG.js";import"./usePlaylistManagement-BYa-nJNx.js";import"./common-Qp7bRr50.js";import"./downloadService-C6bGKWwx.js";import"./SoundBars-BQEuboqd.js";import"./index-SJV2sFs2.js";import"./index-BBRRzm9T.js";const ne={class:"flex flex-col justify-between relative flex-1 gap-1"},ie={class:"font-medium flex gap-2 items-center"},le={key:0,class:"name"},ce={key:1,class:"name font-light text-k-text-secondary"},ue=["src"],de={class:"text-k-text-secondary"},pe={class:"space-x-2"},D=O({__name:"UserCard",props:{user:{}},setup(p){const h=p,{user:e}=V(h),{toastSuccess:v}=te(),{showConfirmDialog:f}=se(),{go:y}=oe(),{currentUser:x}=A(),i=w(()=>e.value.id===x.value.id),S=()=>i.value?y("profile"):E.emit("MODAL_SHOW_EDIT_USER_FORM",e.value),C=async()=>{await f(`Unperson ${e.value.name}?`)&&(await R.destroy(e.value),v(`User "${e.value.name}" deleted.`))},I=async()=>{if(await f(`Revoke the invite for ${e.value.email}?`))try{await re.revoke(e.value),v(`Invitation for ${e.value.email} revoked.`)}catch(a){ae("dialog").handleHttpError(a,{404:"Cannot revoke the invite. Maybe it has been accepted?"})}};return(a,_)=>{const k=M("Icon");return t(),r("article",{class:$([{me:i.value},"apply p-4 flex items-center rounded-md bg-k-bg-secondary border border-k-border gap-3 transition-[border-color] duration-200 ease-in-out hover:border-white/15"])},[d(X,{user:s(e),width:"48"},null,8,["user"]),n("main",ne,[n("h3",ie,[s(e).name?(t(),r("span",le,U(s(e).name),1)):(t(),r("span",ce,"Anonymous")),i.value?(t(),l(k,{key:2,icon:s(j),class:"you text-k-highlight",title:"This is you!"},null,8,["icon"])):c("",!0),s(e).is_admin?(t(),l(k,{key:3,icon:s(Y),class:"is-admin text-k-primary",title:"User has admin privileges"},null,8,["icon"])):c("",!0),s(e).sso_provider==="Google"?(t(),r("img",{key:4,src:s(ee),alt:"Google",height:"14",title:"Google SSO",width:"14"},null,8,ue)):c("",!0)]),n("p",de,U(s(e).email),1)]),n("div",pe,[s(e).is_prospect?(t(),l(b,{key:0,class:"btn-revoke",danger:"",small:"",onClick:I},{default:o(()=>[m("Revoke")]),_:1})):(t(),r(g,{key:1},[s(e).is_prospect?c("",!0):(t(),l(b,{key:0,highlight:"",small:"",onClick:S},{default:o(()=>[m(U(i.value?"Your Profile":"Edit"),1)]),_:1})),i.value?c("",!0):(t(),l(b,{key:1,danger:"",small:"",onClick:C},{default:o(()=>[m("Delete")]),_:1}))],64))])],2)}}}),_e=p=>(G("data-v-5b273a50"),p=p(),W(),p),me={class:"space-y-3"},ve=_e(()=>n("h2",{class:"px-0 pt-6 pb-3 uppercase tracking-widest text-center relative flex justify-center text-k-text-secondary","data-testid":"prospects-heading"},[n("i",{class:"invited-heading-decoration"}),n("span",{class:"px-4 py-1 relative rounded-md border border-k-text-secondary"}," Invited "),n("i",{class:"invited-heading-decoration"})],-1)),he={class:"space-y-3"},fe=O({__name:"UserListScreen",setup(p){const h=L(()=>F(()=>import("./Btn-2hiIT76k.js").then(a=>a.i),__vite__mapDeps([0,1,2]))),{currentUser:e}=A(),v=T(R.state,"users"),f=w(()=>v.value.filter(({is_prospect:a})=>!a).sort((a,_)=>a.id===e.value.id?-1:_.id===e.value.id?1:a.name.localeCompare(_.name))),y=w(()=>v.value.filter(({is_prospect:a})=>a)),x=H.phone,i=N(!1),S=window.MAILER_CONFIGURED,C=()=>E.emit("MODAL_SHOW_ADD_USER_FORM"),I=()=>E.emit("MODAL_SHOW_INVITE_USER_FORM");return P(async()=>await R.fetch()),(a,_)=>{const k=M("Icon");return t(),l(K,null,{header:o(()=>[d(Z,{layout:"collapsed"},{controls:o(()=>[i.value||!s(x)?(t(),l(q,{key:0,uppercase:""},{default:o(()=>[d(s(h),{success:"",onClick:C},{default:o(()=>[d(k,{icon:s(Q)},null,8,["icon"]),m(" Add ")]),_:1}),s(S)?(t(),l(s(h),{key:0,highlight:"",onClick:I},{default:o(()=>[m("Invite")]),_:1})):c("",!0)]),_:1})):c("",!0)]),default:o(()=>[m(" Users "),d(J,{modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=u=>i.value=u)},null,8,["modelValue"])]),_:1})]),default:o(()=>[n("ul",me,[(t(!0),r(g,null,B(f.value,u=>(t(),r("li",{key:u.id},[d(D,{user:u},null,8,["user"])]))),128))]),y.value.length?(t(),r(g,{key:0},[ve,n("ul",he,[(t(!0),r(g,null,B(y.value,u=>(t(),r("li",{key:u.id},[d(D,{user:u},null,8,["user"])]))),128))])],64)):c("",!0)]),_:1})}}}),Oe=z(fe,[["__scopeId","data-v-5b273a50"]]);export{Oe as default};
