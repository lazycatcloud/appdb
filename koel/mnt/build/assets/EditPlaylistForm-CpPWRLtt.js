import{t as D,r as v,ac as E,c as F,k as I,o as c,n as m,T as l,W as t,z as e,Y as d,m as N,a0 as K,a1 as M,V as O,A as y,au as T,b as H,a7 as U,a8 as $,_ as q}from"./userStore-DI58VgZ6.js";import{u as z,a as A,B as h,b as L}from"./Btn-2hiIT76k.js";import{u as R}from"./useModal-DVUoJGRd.js";import{k as W}from"./app-Dh_3ddLE.js";import{_ as Y}from"./TextInput.vue_vue_type_script_setup_true_lang-Cn7Fe5WG.js";import{_ as p}from"./FormRow.vue_vue_type_script_setup_true_lang-jRw1p4cD.js";import{S as j}from"./SelectBox-CnkytuoA.js";import"./index-bkhK2U3_.js";import"./common-Qp7bRr50.js";import"./index-BBRRzm9T.js";const w=s=>(U("data-v-282be0da"),s=s(),$(),s),G=["onSubmit","onKeydown"],J=w(()=>l("header",null,[l("h1",null,"Edit Playlist")],-1)),Q=w(()=>l("option",{value:null},null,-1)),X=["value"],Z=D({__name:"EditPlaylistForm",emits:["close"],setup(s,{emit:S}){const{showOverlay:b,hideOverlay:V}=W(),{toastSuccess:k}=z(),{showConfirmDialog:g}=A(),o=R().getFromContext("playlist"),r=v(o.name),n=v(o.folder_id),x=E(F.state,"folders"),u=()=>S("close"),C=async()=>{b();try{await H.update(o,{name:r.value,folder_id:n.value}),k("Playlist updated."),u()}catch(f){L("dialog").handleHttpError(f)}finally{V()}},B=()=>o.name===r.value&&o.folder_id===n.value,_=async()=>{if(B()){u();return}await g("Discard all changes?")&&u()};return(f,i)=>{const P=I("koel-focus");return c(),m("form",{onSubmit:y(C,["prevent"]),onKeydown:T(_,["esc"])},[J,l("main",null,[t(p,{cols:2},{default:e(()=>[t(p,null,{label:e(()=>[d("Name")]),default:e(()=>[N(t(Y,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=a=>r.value=a),name:"name",placeholder:"Playlist name",required:"",title:"Playlist name"},null,8,["modelValue"]),[[P]])]),_:1}),t(p,null,{label:e(()=>[d("Folder")]),default:e(()=>[t(j,{modelValue:n.value,"onUpdate:modelValue":i[1]||(i[1]=a=>n.value=a)},{default:e(()=>[Q,(c(!0),m(K,null,M(x.value,a=>(c(),m("option",{key:a.id,value:a.id},O(a.name),9,X))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),l("footer",null,[t(h,{type:"submit"},{default:e(()=>[d("Save")]),_:1}),t(h,{white:"",onClick:y(_,["prevent"])},{default:e(()=>[d("Cancel")]),_:1},8,["onClick"])])],40,G)}}}),ue=q(Z,[["__scopeId","data-v-282be0da"]]);export{ue as default};
