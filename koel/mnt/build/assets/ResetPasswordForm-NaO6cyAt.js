import{t as w,r as s,h as x,aF as y,o as u,n as c,A as g,T as t,W as d,z as S,Y as V,U as k,ae as i}from"./userStore-DI58VgZ6.js";import{u as N,B as P,b as B}from"./Btn-2hiIT76k.js";import{u as C}from"./app-Dh_3ddLE.js";import{_ as E}from"./PasswordField.vue_vue_type_script_setup_true_lang-Bm6xCQKi.js";import"./index-bkhK2U3_.js";import"./common-Qp7bRr50.js";import"./index-BBRRzm9T.js";import"./TextInput.vue_vue_type_script_setup_true_lang-Cn7Fe5WG.js";const R={class:"flex items-center justify-center h-screen"},T=["onSubmit"],M=t("h1",{class:"text-2xl mb-2"},"Set New Password",-1),U=t("span",{class:"help block mt-4"},"Min. 10 characters. Should be a mix of characters, numbers, and symbols.",-1),Y=w({__name:"ResetPasswordForm",setup(F){const{getRouteParam:m,go:p}=C(),{toastSuccess:v,toastError:f}=N(),e=s(""),o=s(""),a=s(""),r=s(!1),h=x(()=>e.value&&o.value);try{[e.value,o.value]=y(decodeURIComponent(m("payload"))).split("|")}catch{f("Invalid reset password link.")}const _=async()=>{try{r.value=!0,await i.resetPassword(e.value,a.value,o.value),v("Password set."),await i.login(e.value,a.value),setTimeout(()=>p("/",!0))}catch(l){B().handleHttpError(l)}finally{r.value=!1}};return(l,n)=>(u(),c("div",R,[h.value?(u(),c("form",{key:0,class:"flex flex-col gap-3 sm:w-[480px] sm:bg-white/10 sm:rounded-lg p-7",onSubmit:g(_,["prevent"])},[M,t("label",null,[d(E,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=b=>a.value=b),minlength:"10",placeholder:"New password",required:""},null,8,["modelValue"]),U]),t("div",null,[d(P,{disabled:r.value,type:"submit"},{default:S(()=>[V("Save")]),_:1},8,["disabled"])])],40,T)):k("",!0)]))}});export{Y as default};
