import{t as y,r as l,Z as g,k as B,o as m,n as f,A as S,W as t,z as e,Y as s,m as U,U as b,T as E}from"./userStore-DI58VgZ6.js";import{b as N,B as P}from"./Btn-2hiIT76k.js";import{u as T}from"./app-Dh_3ddLE.js";import{i as h}from"./invitationService-DTH8jUK0.js";import{_ as A}from"./PasswordField.vue_vue_type_script_setup_true_lang-Bm6xCQKi.js";import{_ as w}from"./TextInput.vue_vue_type_script_setup_true_lang-Cn7Fe5WG.js";import{_ as i}from"./FormRow.vue_vue_type_script_setup_true_lang-jRw1p4cD.js";import"./index-bkhK2U3_.js";import"./common-Qp7bRr50.js";import"./index-BBRRzm9T.js";const C={class:"flex items-center justify-center h-screen flex-col"},D=["onSubmit"],I=E("header",{class:"mb-4"}," Welcome to Koel! To accept the invitation, fill in the form below and click that button. ",-1),M={key:1},F=y({__name:"AcceptInvitation",setup(Y){const{getRouteParam:V}=T(),{handleHttpError:p}=N("dialog"),u=l(""),d=l(""),r=l(),v=l(!0),c=l(!1),_=String(V("token")),k=async()=>{try{c.value=!0,await h.accept(_,u.value,d.value),window.location.href="/"}catch(n){p(n)}finally{c.value=!1}};return g(async()=>{try{r.value=await h.getUserProspect(_)}catch(n){p(n,{404:()=>v.value=!1})}}),(n,a)=>{const x=B("koel-focus");return m(),f("div",C,[r.value?(m(),f("form",{key:0,autocomplete:"off",class:"w-full sm:w-[320px] p-7 sm:bg-white/10 rounded-lg flex flex-col space-y-5",onSubmit:S(k,["prevent"])},[I,t(i,null,{label:e(()=>[s("Your email")]),default:e(()=>[t(w,{modelValue:r.value.email,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value.email=o),disabled:""},null,8,["modelValue"])]),_:1}),t(i,null,{label:e(()=>[s("Your name")]),default:e(()=>[U(t(w,{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=o=>u.value=o),"data-testid":"name",placeholder:"Ermâ€¦ Bruce Dickinson?",required:""},null,8,["modelValue"]),[[x]])]),_:1}),t(i,null,{label:e(()=>[s("Password")]),help:e(()=>[s("Min. 10 characters. Should be a mix of characters, numbers, and symbols.")]),default:e(()=>[t(A,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=o=>d.value=o),"data-testid":"password",required:""},null,8,["modelValue"])]),_:1}),t(i,null,{default:e(()=>[t(P,{disabled:c.value,"data-testid":"submit",type:"submit"},{default:e(()=>[s("Accept & Log In")]),_:1},8,["disabled"])]),_:1})],40,D)):b("",!0),v.value?b("",!0):(m(),f("p",M,"Invalid or expired invite."))])}}});export{F as default};
